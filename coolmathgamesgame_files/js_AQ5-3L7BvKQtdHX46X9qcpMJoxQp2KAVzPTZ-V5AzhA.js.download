/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(){const settingsElement=document.querySelector('head > script[type="application/json"][data-drupal-selector="drupal-settings-json"], body > script[type="application/json"][data-drupal-selector="drupal-settings-json"]');window.drupalSettings={};if(settingsElement!==null)window.drupalSettings=JSON.parse(settingsElement.textContent);})();;
window.Drupal={behaviors:{},locale:{}};(function(Drupal,drupalSettings,drupalTranslations,console,Proxy,Reflect){Drupal.throwError=function(error){setTimeout(()=>{throw error;},0);};Drupal.attachBehaviors=function(context,settings){context=context||document;settings=settings||drupalSettings;const behaviors=Drupal.behaviors;Object.keys(behaviors||{}).forEach((i)=>{if(typeof behaviors[i].attach==='function')try{behaviors[i].attach(context,settings);}catch(e){Drupal.throwError(e);}});};Drupal.detachBehaviors=function(context,settings,trigger){context=context||document;settings=settings||drupalSettings;trigger=trigger||'unload';const behaviors=Drupal.behaviors;Object.keys(behaviors||{}).forEach((i)=>{if(typeof behaviors[i].detach==='function')try{behaviors[i].detach(context,settings,trigger);}catch(e){Drupal.throwError(e);}});};Drupal.checkPlain=function(str){str=str.toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');return str;};Drupal.formatString=function(str,args){const processedArgs={};Object.keys(args||{}).forEach((key)=>{switch(key.charAt(0)){case '@':processedArgs[key]=Drupal.checkPlain(args[key]);break;case '!':processedArgs[key]=args[key];break;default:processedArgs[key]=Drupal.theme('placeholder',args[key]);break;}});return Drupal.stringReplace(str,processedArgs,null);};Drupal.stringReplace=function(str,args,keys){if(str.length===0)return str;if(!Array.isArray(keys)){keys=Object.keys(args||{});keys.sort((a,b)=>a.length-b.length);}if(keys.length===0)return str;const key=keys.pop();const fragments=str.split(key);if(keys.length){for(let i=0;i<fragments.length;i++)fragments[i]=Drupal.stringReplace(fragments[i],args,keys.slice(0));}return fragments.join(args[key]);};Drupal.t=function(str,args,options){options=options||{};options.context=options.context||'';if(typeof drupalTranslations!=='undefined'&&drupalTranslations.strings&&drupalTranslations.strings[options.context]&&drupalTranslations.strings[options.context][str])str=drupalTranslations.strings[options.context][str];if(args)str=Drupal.formatString(str,args);return str;};Drupal.url=function(path){return drupalSettings.path.baseUrl+drupalSettings.path.pathPrefix+path;};Drupal.url.toAbsolute=function(url){const urlParsingNode=document.createElement('a');try{url=decodeURIComponent(url);}catch(e){}urlParsingNode.setAttribute('href',url);return urlParsingNode.cloneNode(false).href;};Drupal.url.isLocal=function(url){let absoluteUrl=Drupal.url.toAbsolute(url);let {protocol}=window.location;if(protocol==='http:'&&absoluteUrl.startsWith('https:'))protocol='https:';let baseUrl=`${protocol}//${window.location.host}${drupalSettings.path.baseUrl.slice(0,-1)}`;try{absoluteUrl=decodeURIComponent(absoluteUrl);}catch(e){}try{baseUrl=decodeURIComponent(baseUrl);}catch(e){}return absoluteUrl===baseUrl||absoluteUrl.startsWith(`${baseUrl}/`);};Drupal.formatPlural=function(count,singular,plural,args,options){args=args||{};args['@count']=count;const pluralDelimiter=drupalSettings.pluralDelimiter;const translations=Drupal.t(singular+pluralDelimiter+plural,args,options).split(pluralDelimiter);let index=0;if(typeof drupalTranslations!=='undefined'&&drupalTranslations.pluralFormula)index=count in drupalTranslations.pluralFormula?drupalTranslations.pluralFormula[count]:drupalTranslations.pluralFormula.default;else{if(args['@count']!==1)index=1;}return translations[index];};Drupal.encodePath=function(item){return window.encodeURIComponent(item).replace(/%2F/g,'/');};Drupal.deprecationError=({message})=>{if(drupalSettings.suppressDeprecationErrors===false&&typeof console!=='undefined'&&console.warn)console.warn(`[Deprecation] ${message}`);};Drupal.deprecatedProperty=({target,deprecatedProperty,message})=>{if(!Proxy||!Reflect)return target;return new Proxy(target,{get:(target,key,...rest)=>{if(key===deprecatedProperty)Drupal.deprecationError({message});return Reflect.get(target,key,...rest);}});};Drupal.theme=function(func,...args){if(func in Drupal.theme)return Drupal.theme[func](...args);};Drupal.theme.placeholder=function(str){return `<em class="placeholder">${Drupal.checkPlain(str)}</em>`;};Drupal.elementIsVisible=function(elem){return !!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length);};Drupal.elementIsHidden=function(elem){return !Drupal.elementIsVisible(elem);};})(Drupal,window.drupalSettings,window.drupalTranslations,window.console,window.Proxy,window.Reflect);;
if(window.jQuery)jQuery.noConflict();document.documentElement.className+=' js';(function(Drupal,drupalSettings){const domReady=(callback)=>{const listener=()=>{callback();document.removeEventListener('DOMContentLoaded',listener);};if(document.readyState!=='loading')setTimeout(callback,0);else document.addEventListener('DOMContentLoaded',listener);};domReady(()=>{Drupal.attachBehaviors(document,drupalSettings);});})(Drupal,window.drupalSettings);;
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;},e(t);}function t(){var e=document.querySelector(".advertisement-160x600-left"),t=document.getElementById("main-row");if(t&&e){var a=t.getBoundingClientRect().top,o=70;document.body.classList.contains("site-wide-alert")&&(o=110),a<=o?e.classList.add("ad-fixed"):e.classList.remove("ad-fixed");}}window.$=jQuery,function(t){var a=(new Date()).getTime(),o=window.location.pathname,n=[o],i=sessionStorage.getItem("total_page")?sessionStorage.getItem("total_page"):[];i.includes(o)?sessionStorage.setItem("total_page",i):sessionStorage.setItem("total_page",n.concat(i).reverse()),t(document).on("click",".sitewide-alert .close",(function(){t("body").removeClass("site-wide-alert");})),t(window).on("beforeunload",(function(){console.log("CMGCA: Link clicked "+location.pathname+" "+new Date());var e=(new Date()).getTime()-a;window.VWO=window.VWO||[],VWO.event=VWO.event||function(){VWO.push(["event"].concat([].slice.call(arguments)));},VWO.event("timeOnPage",{onPage:e/1e3}),ga4_trackEvent("user_engagement",["TimeOnPage"],[e/1e3]);})),window.onbeforeunload=function(e){console.log("CMGCA: Tab closed or page refreshed "+location.pathname+" "+new Date());var t=(new Date()).getTime()-a,o=sessionStorage.getItem("total_time_spent")?sessionStorage.getItem("total_time_spent"):0,n=parseInt(o)+parseInt(t),i=(sessionStorage.getItem("total_page").match(/,/g)||[]).length+1;VWO.event("sessionDuration",{sessionDuration:n/1e3}),VWO.event("uniquePageView",{uniquepageview:i}),ga4_trackEvent("user_engagement",["PagesperSession","SessionDuration"],[i,n/1e3]);},t("a").on("click",(function(){window.onbeforeunload=null;})),window.loadJs=function(e,t){var a=location.origin;null==document.querySelector("script[src='".concat(a).concat(t,"']"))&&((e=document.createElement("script")).setAttribute("src",a+t),document.head.appendChild(e));},jQuery(document).ready((function(){/^\/login|signup|password/.test(window.location.pathname)||"function"!=typeof getCookie||null!=getCookie("cmg_uid")?/^\/login|signup|password/.test(window.location.pathname)&&location.search&&(dest="/login"+location.search,t(".login-link").attr("href",dest)):(dest="/login?destination="+window.location.pathname,t(".login-link").attr("href",dest));var e=jQuery(".collection-faq"),a=jQuery(".about-data");e.find("div").length<2&&e.hide(),""==a.text()&&a.hide(),document.documentElement.clientWidth>768&&t(".mob-med-rect-atf-wrapper").length&&t(".mob-med-rect-atf-wrapper").remove(),t(".progress-bar").width(0),t(".progress .progress-bar").each((function(){var e=parseInt(t(this).attr("data-width"));e>0?t(this).animate({width:e+"%"},1200):t(this).css({color:"black",background:"none"},1200);}));var o=getCookie("cmg_uid");if(null==o||null==getCookie("cmg_sx")&&null==getCookie("cmg_fx")||t(".footer").hide(),"undefined"==typeof gameId){var n=window.location.pathname;if("/"==n){var i=jQuery(".login").attr("href");jQuery(".welcome-box .login-link .login").attr("href",i),jQuery(".progress-text a").attr("href",i);}else{i=jQuery(".login").attr("href")+"?destination="+n;jQuery(".welcome-box .login-link .login").attr("href",i),jQuery(".progress-text a").attr("href",i);}}if(jQuery(".welcome-box a.btn.free-account").length&&jQuery(".welcome-box a.btn.free-account").click((function(e){if(e.preventDefault(),"en"==drupalSettings.language)var t="/signup";else t="/"+drupalSettings.language+"/signup";"undefined"!=typeof signup_abtest_2_variations_custom_selection?window.location.href=window.location.protocol+"//"+window.location.host+t+"?signup_customize="+signup_abtest_2_variations_custom_selection:window.location.href=window.location.protocol+"//"+window.location.host+t+"?v1";})),jQuery(".leveled-up-status .close").length&&jQuery(".leveled-up-status .close").click((function(e){xp_levelup_alert_handler(e);})),null==o&&(null==getCookie("cmg_sx")||null==getCookie("cmg_fx"))&&jQuery(".login-link").length&&null!==localStorage.getItem("userprofile")){var r=localStorage.getItem("userprofile");void 0!==(r=JSON.parse(r)).userid&&"0"!=r.userid&&localStorage.removeItem("userprofile");}function s(e){var t=document.querySelector(e);t&&(t.onkeydown=function(e){13==e.keyCode&&t.querySelector("#edit-submit").click();});}null!==getCookie("cmg_sx")?(t(".pane-bean-new-go-ad-free").hide(),t("#monthly-subscription-plan").hide(),t("#cmg-goadfree").hide(),t("body").addClass("subscribed-users")):t("body").removeClass("subscribed-users"),null!==getCookie("cmg_l")&&t("#block-nodepagespromouserprofiles-2").hide(),null!==getCookie("cmg_l")&&t("#block-nodepagespromouserprofiles-2").hide(),s(".user-login-form"),s(".user-pass"),s(".user-register-form"),"?pwa"===location.search&&t("body").addClass("new-pwa");})),cmatgameSearchGames="",cmatgameSearchCats="",cmatgameTrSearch="",cmatgameTop9="",window.switchcount=0,jQuery.ajaxSetup({async:!1});var r="?ctok=b24295fa";void 0!==drupalSettings.cmg_itok&&(r="?ctok="+drupalSettings.cmg_itok);var s,c,l,m="/sites/default/files/cmatgame_games_with_levels.json"+r;switch("en"!==drupalSettings.language&&(m="/sites/default/files/cmatgame_games_with_levels_"+drupalSettings.language+".json"+r),void 0!==drupalSettings.cmg_sjpath&&(m=drupalSettings.cmg_sjpath),jQuery.getJSON(m,(function(e,t,a){void 0!==e&&(cmatgameSearchGames=void 0!==e.game&&null!==e.game?e.game:[],cmatgameSearchCats=void 0!==e.cat&&null!==e.cat?e.cat:[],cmatgameTrSearch=void 0!==e.search&&null!==e.search?e.search:[],cmatgameSugsGames=void 0!==e.suggestion&&null!==e.suggestion?e.suggestion:[],cmatgameTop9=void 0!==e.top9&&null!==e.top9?e.top9:[],cmatgameTrendy=void 0!==e.trendy&&null!==e.trendy?e.trendy:[]);})),window.searchGames=function(e,a,o,n,i){if(void 0!==e&&e.length)return regex=new RegExp(n+o,"i"),matches=t.grep(e,(function(e,t){return regex.test(e[a]);})),strLength=0,null!==i&&(strLength=i),"undefined"!=typeof matches&&matches.length&&o.length>strLength?matches:void 0;},gameTrans=Drupal.t("games"),new URLSearchParams(window.location.search).get("variant")){case "sdv2":t("html").addClass("sdv2");break;case "sdv3":t("html").addClass("sdv3");break;case "spv2":t("html").addClass("spv2");}window.searchGamesById=function(a){if("undefined"!=typeof cmatgameSearchGames&&cmatgameSearchGames.length){var o=t.grep(cmatgameSearchGames,(function(e,t){return e.id==a;}));return "undefined"!=o&&0!=o.length||"object"!=("undefined"==typeof gameDefData?"undefined":e(gameDefData))||"object"!=e(gameDefData[0])||"undefined"==gameDefData[0].id||parseInt(gameDefData[0].id)!=a||(o=gameDefData),o;}},window.debugOut=function(e){u&&console.log(e);},window.removeAdSwfJWPLayer=function(){},window.setCookie=function(e,t,a){var o=new Date();o.setTime(o.getTime()+a);var n="expires="+o.toUTCString();document.cookie=e+"="+t+"; "+n+"; path=/; domain=."+window.location.host;},window.getCookie=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null;},t("form").attr("autocomplete","off"),t(".mobile-device .game-item").on("click",(function(e){e.preventDefault(),window.location.href=t(this).find("a").attr("href");})),window.isUserValidFreeUserOrSubscriber=function(){return "undefined"==typeof cmg_uid&&null!=getCookie("cmg_uid")?cmg_uid=parseInt(getCookie("cmg_uid")):"undefined"==typeof cmg_uid&&null==getCookie("cmg_uid")&&(cmg_uid=0),0!=cmg_uid&&(null!=getCookie("cmg_sx")||null!=getCookie("cmg_fx"));},window.get_premium_access_leg_desc=function(e){var t="";switch(e){case "4c044106":t="Unlimited_Playlist";break;case "5b8689c9":t="Get_Premium_Access";break;case "be77d560":t="Freemium_Create_Account";break;case "6b3b61dc":t="Freemium_Profile_Customize";break;case "b2df5a33":t="Anon go_ad_free_no_trial";break;case "2efa4bc4":t="Anon pre_roll";break;case "849ef809":t="BigScreen Anon watch_or_join";break;case "0735a1f2":t="Anon support_cmg_overlay";break;case "791c674d":t="Anon ad_blocker";break;case "a1ca2f3b":t="Anon right_rail";break;case "6ea95de6":t="Anon hp_promo_bar";break;case "0c5a2b5b":t="Freemium go_ad_free_no_trial";break;case "bd07c4e6":t="Freemium pre_roll";break;case "e180e28d":t="BigScreen Freemium watch_or_join";break;case "d61242ac":t="Freemium support_cmg_overlay";break;case "b0e0a25a":t="Freemium ad_blocker";break;case "780ef8a3":t="Freemium right_rail";break;case "89bee87a":t="Freemium hp_promo_bar";break;case "553bdf22":t="Unified Premium Landing";break;case "9a55d86e":t="Major Promotions";break;case "67361110":t="Unified Freemium Landing";break;case "1bb008bd":t="Anon Big Screen";break;case "7859e605":t="Freemium Big Screen";}return t;},t('[data-toggle="popover"]').length&&"function"!=typeof t('[data-toggle="popover"]').popover&&t('[data-toggle="popover"]').popover({html:!0}),t(".popover-dismiss").length&&"function"!=typeof t(".popover-dismiss").popover&&t(".popover-dismiss").popover({trigger:"focus"}),window.location.href.indexOf("/blog/")>-1&&t(".node__meta").prepend('<div class="back-to-blog"><a href="/blog">Back to Blog</a><div>'),window.search_random_games=function(e,t){return e.filter((function(e){return Object.keys(t).every((function(a){return e[a]==t[a];}));}));},window.redirect_random_games=function(){jQuery(".menu-random > a").attr("href","javascript:void(0)"),jQuery(".menu-random > a").on("click",(function(){if(cmatgameSearchGames.length){var e=cmatgameSearchGames,t=JSON.stringify(e),a=search_random_games(JSON.parse(t),{rand:1}),o=a[Math.floor(Math.random()*a.length)];void 0!==o&&void 0!==o.alias&&""!==o.alias&&(window.location=window.location.protocol+"//"+window.location.hostname+"/0-"+o.alias+"?random_true");}}));},t(document).ready((function(){redirect_random_games();})),navigator.sayswho=(c=navigator.userAgent,l=c.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(l[1])?"IE "+((s=/\brv[ :]+(\d+)/g.exec(c)||[])[1]||""):"Chrome"===l[1]&&null!=(s=c.match(/\b(OPR|Edge)\/(\d+)/))?s.slice(1).join(" ").replace("OPR","Opera"):(l=l[2]?[l[1],l[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(s=c.match(/version\/(\d+)/i))&&l.splice(1,1,s[1]),l.join(" "))),window.checkVersionBrowser=function(){var e,t=navigator.userAgent,a=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return /trident/i.test(a[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===a[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&a.splice(1,1,e[1]),a.join(" "));},debugOut(navigator.sayswho),window.flashDetectionMessage=function(){t(".no-flash").css("display","none"),t("#afg_container").css("display","none").html("<div></div>");var e=checkVersionBrowser().split(" ");if(t("#flash-icon-title-heading").show(),"Chrome"==e[0]&&e[1]>=85||"Firefox"==e[0]&&e[1]>80||"Safari"==e[0]){t("#newFlashDetectHtml").show();var a=t(".game-xp-bar-immerse-button");void 0!==a&&null!=a&&a.hide(),t("#block-carouselingamedetailpage").hide(),drupalSettings.cmatgame.swfembed&&(debugOut("flash"),t("#flash-icon-aligned-title").html('<span class="icon-flash"> </span>'));}else t("#no-flash-overlay").show();if(t(".load-wrap").hide(),t("#continue-container").hide(),t("#afg_container").css({"margin-bottom":"0px"}),t(".unlock-link").length&&t("#subscriber-banner").hide(),"Chrome"==e[0]&&e[1]>=85){t(".game-field-wrapper #no-flash-overlay a img").attr("src","/themes/custom/coolmath/assets/images/enable-flash-chrome.png"),t("body.small-game-item").length?t(".game-field-wrapper #no-flash-overlay").css({position:"relative"}):t(".game-field-wrapper #no-flash-overlay").css({position:"relative",top:"25px"});/0-isoball|0-isoball-2|liquid-measure-3|0-isoball-x1|0-isoball-3/.test(document.location.pathname)&&(t(".game-field-wrapper #no-flash-overlay").css({position:"relative",top:"10px"}),t(".game-field-wrapper #no-flash-overlay img, .game-field-wrapper #no-flash-overlay .bottom-text p a").css({position:"relative",top:"20px"}));/0-slime-laboratory|0-slime-laboratory-2/.test(document.location.pathname)&&t(".game-field-wrapper #no-flash-overlay").css({position:"relative",top:"0px"});}},window.remove_anon_user_blocks=function(){var e=getCookie("cmg_sx");null!=e&&t("body").addClass("subscribed-users logged-in"),t(".pane-bean-subscriber-promo").length<=0&&t("body").hasClass("logged-in")&&t("body").addClass("subscribed-users"),t(".panel-pane.pane-block.pane-bean-coolmath-header").replaceWith(""),t(".panel-pane.pane-block.pane-bean-game-page-no-ads-promo").replaceWith(""),t(".pane-bean-subscriber-promo a").css({display:"inline-block",visibility:"hidden"}),t(".homepage-remove-ads-1").replaceWith(""),t(".pane-bean-game-page-no-ads-promo").replaceWith(""),t(".header-wrapper .item-list .panel-pane.pane-cmatgame-advertisement-cm-g-homepage-728-90").removeClass("top-728x90 pane-cmatgame-advertisement-cm-g-homepage-728-90"),t(".header-wrapper .item-list .panel-pane.pane-cmatgame-advertisement-cm-g-otherpages-728-90").removeClass("top-728x90 pane-cmatgame-advertisement-cm-g-otherpages-728-90"),t("body.front .panel-pane .pane-content .global-wrapper-content .new-games .link-more-wrapper").css("margin-bottom","53px"),t(".pane-bean-new-go-ad-free").length&&t(".pane-bean-new-go-ad-free").hide(),t(".homepage-signup-promo").length&&t(".homepage-signup-promo").hide(),t(".cmg-right-rail-signup-promo-2").length&&null!==getCookie("cmg_sx")&&t(".cmg-right-rail-signup-promo-2").parent().remove(),t(".cmg-right-rail-signup-promo-3").length&&null!==getCookie("cmg_sx")&&t(".cmg-right-rail-signup-promo-3").parent().remove();},window.cmg_rafgp=function(){("undefined"!=typeof freeTrialUser&&freeTrialUser||"undefined"!=typeof cmg_school_whitelisted&&cmg_school_whitelisted||"undefined"!=typeof cmg_no_ads&&cmg_no_ads)&&(t(".ad-wrapper").each((function(){t(this).replaceWith("");})),t(".pane-bean-new-go-ad-free").replaceWith(""),t(".panel-pane.pane-block.pane-bean-coolmath-header").replaceWith(""),t(".pane-cmatgame-advertisement-cm-g-otherpages-300x250-top").replaceWith(""),t(".homepage-remove-ads-1").replaceWith(""),t(".adobe-analytics-sub-experience").css("display","none"),t(".page-1-unlockable-game-list .view-header").replaceWith(""));},("undefined"!=typeof freeTrialUser&&freeTrialUser||"undefined"!=typeof cmg_school_whitelisted&&cmg_school_whitelisted||"undefined"!=typeof cmg_no_ads&&cmg_no_ads)&&cmg_rafgp(),window.session_expired_handler=function(){if(null!==getCookie("cmg_exp")){setCookie("cmg_exp","false",-1e6);var e='<div class="messages--status messages error" style="margin-bottom: 70px;"><h2 class="element-invisible">Error message</h2>Hi – You’ve automatically been logged out of your Coolmath Games subscription. Your subscription allows you to access Coolmath Games from up to 3 different web browsers at once – and you’ve now exceeded that limit or you have been logged out from an another session. Please login again to access your subscription.</div>';t(".panel-pane.pane-pane-messages .pane-content").length?t(".panel-pane.pane-pane-messages .pane-content").html(e):t("#block-cmatgame-cmatgame-system-main").before(e);}},session_expired_handler(),window.getParameterByName=function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.href);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "));},window.testCMGStorage=function(){var e="cmgls";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!0;}catch(e){return !1;}},window.subscription_event_handler=function(){var e=/signup|premium-access|user\/[0-9]*\/subscription|myaccount/,a=/cmgsubl/;if("/thankyou"===window.location.pathname&&"undefined"!=typeof subscriberLeg&&("undefined"!=typeof freeTrialUser&&freeTrialUser&&"Default Leg"!==subscriberLeg||a.test(location.search))){var o=/cmgtypl/;if((a.test(location.search)||!o.test(location.search))&&(!testCMGStorage()||testCMGStorage()&&null===localStorage.getItem("cmgtypl"))){var n=(new Date()).getHours(),i="Subscription success",r=getParameterByName("cmgsubl");2===r||"2"===r?(i="Subscription Reactivation success",trackEvent("Subscription Reactivation",i,document.title),trackEvent("Subscription Reactivation",i+" hour",n),ga4_trackEvent("subscription_signup",["subscription_category","promotion_type","subscription_action"],[subscriberLeg,"",i])):(trackEvent("Premium Subscription "+subscriberLeg,i,document.title),trackEvent("Premium Subscription "+subscriberLeg,i+" hour",n),ga4_trackEvent("subscription_signup",["subscription_category","promotion_type","subscription_action"],[subscriberLeg,"",i]));var s=!1;"function"==typeof getCookie&&null!==getCookie("cmg_go_adfree")&&(s=!0),s?(trackGoalVirtualPV("/virtual/subscription-adfree-thankyou"),setCookie("cmg_go_adfree","",0)):trackGoalVirtualPV("/virtual/subscription-overlay-thankyou"),localStorage.setItem("cmgtypl",!0);var c="cmgtypl="+(new Date()).getTime();location.search&&!o.test(location.search)?c=location.search+"&"+c:location.search&&(c=location.search),history.replaceState("Thank you","Thank you",location.pathname+c);}}else if("/signup/thank-you"===window.location.pathname){if((o=/cmgtypl/).test(location.search)&&(!testCMGStorage()||testCMGStorage()&&null===localStorage.getItem("cmgtypl"))){n=(new Date()).getHours(),i="Premium Access Signup success";var l=getParameterByName("cmgtypl"),m=get_premium_access_leg_desc(l);""===m&&(m="GoAdFree"),2===r||"2"===r?(i="Subscription Reactivation success",trackEvent("Subscription Reactivation",i,document.title),trackEvent("Subscription Reactivation",i+" hour",n),ga4_trackEvent("subscription_signup",["subscription_category","promotion_type","subscription_action"],[subscriberLeg,"",i])):(trackEvent("Premium Access Subscription "+m,i,document.title),trackEvent("Premium Access Subscription "+m,i+" hour",n),ga4_trackEvent("subscription_signup",["subscription_category","promotion_type","subscription_action"],[subscriberLeg,"",i]));s=!1;"function"==typeof getCookie&&null!==getCookie("cmg_go_adfree")&&(s=!0),s?(trackGoalVirtualPV("/virtual/subscription-adfree-thankyou"),setCookie("cmg_go_adfree","",0)):trackGoalVirtualPV("/virtual/subscription-overlay-thankyou"),localStorage.setItem("cmgtypl",!0);c="cmgtypl="+(new Date()).getTime();location.search&&!o.test(location.search)?c=location.search+"&"+c:location.search&&(c=location.search),history.replaceState(document.title,document.title,location.pathname+c);}}else if(/profile|premium-access/.test(location.pathname)&&/cmgtypl/.test(location.search))signupType=getParameterByName("cmgtypl"),trackEvent("XP SignUp Page","Submission successful",signupType);else if(e.test(location.pathname)&&testCMGStorage()&&null!==localStorage.getItem("cmgtypl"))localStorage.removeItem("cmgtypl");else{if("undefined"!=typeof freeTrialUser&&freeTrialUser&&e.test(location.pathname)&&"undefined"!=typeof subscriberLeg&&"Default Leg"!==subscriberLeg&&t(".messages--error.messages.error").length){var u=t(".messages--error.messages.error").text();u=(u=u.replace(/Error message/gm,"")).replace(/(\r\n|\n|\r)/gm,""),trackEventNonInteractive("Premium Subscription "+subscriberLeg,"Subscription error",u);}}!t("form#user-register-form").length&&navigator.cookieEnabled&&localStorage.getItem("cmgsignupname")&&localStorage.removeItem("cmgsignupname");},jQuery(document).ready((function(){"function"==typeof ga4_trackEvent?subscription_event_handler():setTimeout((function(){"function"==typeof ga4_trackEvent&&subscription_event_handler();}),1e3);})),window.get_premium_access_leg=function(){var e="";e="^(/premium-access/)";pPalReg=new RegExp("^(/profile/premium-access/)","i"),palReg=new RegExp(e,"i");var t=location.pathname.split("/");return "/signup/thank-you"===window.location.pathname&&/cmgtypl/.test(location.search)?e=getParameterByName("cmgtypl"):pPalReg.test(location.pathname)?e=t.length>=4?t[3]:"b2df5a33":palReg.test(location.pathname)&&(e=t.length>=3?t[2]:"b2df5a33"),e;},window.setSessionCookie=function(e,t){document.cookie=e+"="+t+"; path=/; domain=."+window.location.host;},t(document).on("click","#cmg-goadfree",(function(e){e.preventDefault(),setSessionCookie("cmg_go_adfree",!0);var t="/premium-access";getCookie("cmg_fx")&&(t="/profile/premium-access");var a="";if("function"==typeof getCookie&&null!==getCookie("cmg_fx")&&null===getCookie("cmg_sx")?(t="/profile/premium-access/0c5a2b5b/"+getCookie("cmg_fx").toLowerCase(),a=get_premium_access_leg_desc("0c5a2b5b")):(t="/premium-access/b2df5a33",a=get_premium_access_leg_desc("b2df5a33")),"function"==typeof get_signup_abtest_variant_3&&(t+=get_signup_abtest_variant_3()),trackEvent("Premium Subscription - "+a,"Go Ad-Free button clicked",document.title),ga4_trackEvent("subscription_promotion_click",["promotion_type","promotion_category","promotion_name"],[a,"Go Ad-Free Monthly Subscription","HeaderNav"]),trackGoalVirtualPV("/virtual/subscription-adfree-click"),"en"==drupalSettings.language)var o=t;else o="/"+drupalSettings.language+t;window.location.href=window.location.protocol+"//"+window.location.host+o;})),window.premium_access_event_handler=function(){sLeg=get_premium_access_leg_desc("5b8689c9"),trackEvent("Premium Subscription - "+sLeg,"Premium Access button clicked",document.title),trackGoalVirtualPV("/virtual/premium-access-click"),setSessionCookie("cmg_premium_access",!0);},window.isPremiumUser=function(){var e=getCookie("cmg_sx"),t=!1;return null!=e&&(t=!0),t;},window.getcmguserstatus=function(a,o){return url="/ajax/subscriber/status/"+a+"/"+a+"?"+(new Date()).getTime(),void 0!==o&&""!==o&&null!==o&&(url="/ajax/subscriber/status/"+a+"/"+o+"?"+(new Date()).getTime()),status=0,t.getJSON(url,(function(o){cmg_sx=getCookie("cmg_sx"),void 0!==e(o.sx)&&o.sx===a&&void 0!==e(o.st)&&o.st&&void 0!==("undefined"==typeof cmg_sx?"undefined":e(cmg_sx))&&""!==cmg_sx&&null!==cmg_sx&&(status=1,t("body").removeClass("not-logged-in"),t("body").addClass("subscribed-users"),t("body").addClass("logged-in"),t("body").removeClass("not-active-user"),t("body").addClass("active-user"),t("div[id^='block-coolmath-ads']").each((function(){t(this).replaceWith("");})),t("div[id^='block-ads']").each((function(){t(this).replaceWith("");})),t(".field-game").length&&(removeAdSwfJWPLayer(),t("#subscriber-banner").replaceWith('<div id="subscriber-banner" class="adobe-analytics-sub-unlock"><a onclick="unlockAllLevels();" class="unlock-link">click-to-unlock</a></div>')),remove_anon_user_blocks()),cmg_ll=getCookie("cmg_l"),void 0!==("undefined"==typeof cmg_ll?"undefined":e(cmg_ll))&&""!==cmg_ll&&null!==cmg_ll&&Drupal.behaviors.cmatgame_subscriber_behavior.user_loginbar_update();})),status;},window.splashmathclick=function(){trackEvent("SplashMath Promo","Clicked",document.title),window.location.href="https://www.splashmath.com";};var u=0;"function"==typeof getParameterByName&&""!==getParameterByName("debug")&&(u=getParameterByName("debug")),window.debug_sid=function(){(u||"function"==typeof getParameterByName&&""!==getParameterByName("debug"))&&t("#debug-sid").removeClass("hidden");},window.preroll_signup_bottom_image_handler=function(){trackEvent("Preroll Signup Clicked","Preroll Signup Bottom Image",document.title);},window.checkadsDivEmpty=function(){t(".page-frontpage .block-region-supporting > .block").each((function(){t(this).find(".ad-wrapper > div").is(":empty")&&t(this).find(".ad-wrapper > div").parents(".block-adsresponsive1colhome300x250second").addClass("empty");}));},cmg_pmtd_regex=/coolmathgames\.local$|coolmathgames\.com$/,cmg_pmtd="https://www.coolmathgames.com",cmg_pmtd_regex.test(location.origin)&&(cmg_pmtd=location.origin);document.documentElement.clientWidth;(window.addEventListener("resize",(function(){document.documentElement.clientWidth;t("body").hasClass("immersiveActive")&&adjustWidthHeightGame(),t("body").hasClass("isFullScreen")&&adjustWidthHeightGame(),t("body").find("#immersiveModal").length&&adjustWidthHeightModalGame(!0),checkadsDivEmpty();}),!1),/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&t(document).delegate(".game-item","click",(function(){window.location=t(this).find("a").attr("href");})),isUserValidFreeUserOrSubscriber()?t(".login-signup-container").hide():t(".login-signup-container").show(),checkadsDivEmpty(),"en"!=drupalSettings.language&&setCookie("cmg_translation",drupalSettings.language),window.cmg_view_default_lang_site=function(){event.preventDefault();var e=null!==getCookie("cmg_translation")?getCookie("cmg_translation"):"es";setCookie("cmg_translation","def"),/^(es|pt\-br|fr|it|hi|de|zh\-hans)?/.test(e)&&trackEvent("Translation site - "+e,"view site in english link clicked",document.title),location.pathname=="/"+e?document.location="/":"category"==jQuery("link[hreflang='"+e+"']").data("type")||"playlist"==jQuery("link[hreflang='"+e+"']").data("type")||"game_families"==jQuery("link[hreflang='"+e+"']").data("type")?window.location=jQuery("link[hreflang='en']").attr("href"):document.location=location.pathname.replace("/"+e+"/","/");},window.profileRedirect=function(){var e=localStorage.getItem("userprofile");localStorage.setItem("userprofile",JSON.stringify(e));var t="";"en"==drupalSettings.language?(window.location,t=null!==getCookie("cmg_fx")?"/profile/"+e.publicname:"/login"):(drupalSettings.language,t=null!==getCookie("cmg_fx")?drupalSettings.language+"/profile/"+e.publicname:NaN+drupalSettings.language+"/login"),window.location.href=window.location.protocol+"//"+window.location.host+t;},window.myFunction=function(){trackEvent("Popover login click","login link clicked",document.title),window.location="/login?destination="+window.location.pathname;},window.popover_signup_page=function(){trackEvent("Popover signup click ","signup link clicked",document.title);},window.location.href.indexOf("?random_true")>-1&&t(".menu_random").addClass(" active"),abTestCookie=getCookie("new-ab-test-cookie"),"true"==abTestCookie&&removeAdSwfJWPLayer(),"true"!=abTestCookie||null!=("undefined"==typeof preRollCookie?"undefined":e(preRollCookie))&&"undefined"!=typeof preRollCookie||setCookie("new-ab-test-cookie","false","1800000"),abTestCookie_1=getCookie("no-refresh-cookie"),"true"!=abTestCookie_1||null!=("undefined"==typeof noRefreshCookie?"undefined":e(noRefreshCookie))&&"undefined"!=typeof noRefreshCookie||setCookie("no-refresh-cookie","false","1800000"),t(".profiles-promo").length&&null!==getCookie("cmg_fx")&&t(".profiles-promo").parent().remove(),null!=function(){var t;try{t=window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){t=!1;}return void 0!==navigator.plugins&&"object"==e(navigator.plugins["Shockwave Flash"])||t;}())&&(null!=localStorage.getItem("flash_disabled")&&("undefined"!=typeof __gaTracker&&__gaTracker("send",{hitType:"event",eventCategory:"Flash Status",eventAction:"Flash Re Enabled",eventLabel:document.title,eventValue:"0",nonInteraction:1}),localStorage.removeItem("flash_disabled")));function g(e){t("body").addClass("search-expanded"),t(".menu-search-bar").length>=1&&t(".menu-search-bar")[0].focus(),t(".search-dropdown").show(),t(".search-results-container li").show(),e.stopPropagation(),null==getCookie("cmg_l")&&(loadJs("markJs","/themes/custom/coolmath/assets/js/mark.min.js"),loadJs("searchJs","/themes/custom/coolmath/assets/js/coolmath.search.js"+r));}window.addEventListener("keydown",(function(e){32===e.keyCode&&e.target===document.body&&e.preventDefault();})),t(".pane-bean-new-go-ad-free").length&&t(".pane-bean-new-go-ad-free").is(":visible")&&trackGoalVirtualPV("/virtual/subscription-adfree-impression"),t(".popular-cat-block").length&&t(".popular-cat-block").parents(".block-block-content").addClass("popularCatBlock"),t("html").addClass("search-ready"),t(document).on("click","#cmatgame-search-block-form .search-input, .tabbed-navbar .tab-search",(function(e){g(e);})),t(document).ready((function(){t("#cmatgame-search-block-form [name='search_bar']").on("focus",(function(e){g(e),t(".menu-search-bar").attr("placeholder",Drupal.t("Search for games"));}));})),window.cmg_get_lpg=function(){var t,a="";if(navigator.cookieEnabled&&(null!=localStorage.getItem("userprofile")&&"function"==typeof generateMyGamesData&&"object"==e(t=""!=(t=localStorage.getItem("userprofile"))&&"0"!=t?JSON.parse(t):[])&&t.mygameslist&&t.mygameslist.length)){var o=generateMyGamesData(t.mygameslist),n=sortMyGamesDataByTimestamp(o);n.splice(10),a=n;}return a;},null!==getCookie("cmg_l")&&""!==getCookie("cmg_l")||"optimized"!==document.documentElement.getAttribute("rel")?(loadJs("markJs","/themes/custom/coolmath/assets/js/mark.min.js"),loadJs("searchJs","/themes/custom/coolmath/assets/js/coolmath.search.js"+r)):t(document).on("click",".page-header-mobile .navbar-toggler",(function(e){loadJs("markJs","/themes/custom/coolmath/assets/js/mark.min.js"),loadJs("searchJs","/themes/custom/coolmath/assets/js/coolmath.search.js"+r);})),t(".hover-video").each((function(){var e=t(this).find("video");null!=e&&e.attr("src")&&t(this).on("mouseenter",(function(){e[0].play(),t(this).addClass("hovered");})).on("mouseleave",(function(){t(this).removeClass("hovered"),e[0].pause(),e[0].currentTime=0;}));})),window.matchMedia("(display-mode: standalone)").matches&&t("body").addClass("pwa-app");}(jQuery),window.p_Levels={level_01:Drupal.t("STARRY-EYED<br/>ROOKIE TO WATCH"),level_02:Drupal.t("SPRING-LOADED <br/>LEVEL ASCENDER"),level_03:Drupal.t("SEMI-PRO NINJA <br/>UNICORN GROOMER"),level_04:Drupal.t("ALL-STAR NINJA<br/>UNICORN TRAINER"),level_05:Drupal.t("DIESEL-FUELED <br/>XP MACHINE"),level_06:Drupal.t("SOLAR-POWERED<br/>XP MACHINE"),level_07:Drupal.t("MODESTLY HEROIC<br/>CHAMPION"),level_08:Drupal.t("HEROICALLY MODEST<br/>CHAMPION"),level_09:Drupal.t("GALAXY COMMANDER<br/>PART-TIME UNICORN GROOMER"),level_10:Drupal.t("ABSOLUTELY SUPERCOOL<br/>COOLMATH GAMER")},window.logout_tr=Drupal.t("Log Out"),window.myPage_tr=Drupal.t("My Page"),window.likemsgU=Drupal.t("You haven't given a like to any games yet. Look for the thumbs up icon on game pages to add them here!"),window.likemsgV=Drupal.t("This user has not given a Like to any games yet"),window.profileBtnTxt=Drupal.t("Get a Premium Profile"),window.noTxt=Drupal.t("No"),window.timerOfftxt=Drupal.t("Turn Timer Off"),window.timerOntxt=Drupal.t("Turn Timer On"),window.viewAlltxt=Drupal.t("View All"),jQuery(document).ready((function(){var e=localStorage.getItem("userprofile");e=JSON.parse(e);window.location.pathname;var t="",a=window.location.pathname;if("en"!=drupalSettings.language)var o=a.split("/")[3];else o=a.split("/")[2];var n=getCookie("cmg_l");$(".playlistcontainer").each((function(){var a=$(this).attr("data-id"),i=$(this).attr("data-alias");t="",t=null!==n&&e.publicname.toLowerCase()==o.toLowerCase()?"en"!=drupalSettings.language?"/"+drupalSettings.language+"/playlist/"+a+"/edit":"/playlist/"+a+"/edit":"en"!=drupalSettings.language?location.origin+"/"+drupalSettings.language+i:location.origin+i,$(this).find(".myplaylist-title a").attr("href",t),$(this).find(".playlist-profile-image a").attr("href",t);})),$(".field--name-field-avatar-id fieldset").removeAttr("aria-required");})),window.continue_not_available_in_your_area_hexanaut_images=function(){window.location!==window.parent.location&&"function"==typeof getParameterByName?window.parent.postMessage("not-available-in-your-area-hexanaut",cmg_pmtd):event&&event.currentTarget&&void 0!==jQuery(event.currentTarget).attr("href")?window.location=jQuery(event.currentTarget).attr("href"):event&&event.currentTarget&&void 0!==jQuery(event.currentTarget).find("a").attr("href")?window.location=jQuery(event.currentTarget).find("a").attr("href"):window.location="/";},window.continue_not_available_in_your_area_signup_images=function(){window.location!==window.parent.location&&"function"==typeof getParameterByName?window.parent.postMessage("not-available-in-your-area-signup",cmg_pmtd):event&&event.currentTarget&&void 0!==jQuery(event.currentTarget).attr("href")?window.location=jQuery(event.currentTarget).attr("href"):event&&event.currentTarget&&void 0!==jQuery(event.currentTarget).find("a").attr("href")?window.location=jQuery(event.currentTarget).find("a").attr("href"):window.location="/";},t(),window.addEventListener("scroll",t);})();;
({529:function(){function e(a){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;},e(a);}var a=getCookie("cmg_uid"),t=Drupal.t("Log Out");Drupal.t("My Page"),isCurrentUserAVisitor=!1,jQuery("input#edit-submit").click((function(){null!==document.getElementById("user-follow-form")&&document.getElementById("user-follow-form").reset();}));var l="",r="",s="";!function(e,a,t){l=t.cmatgame.mongodb_user_profile_config,r=t.cmatgame.environment_indicator_overwritten_name,s=t.cmatgame.mongodb_url;}(jQuery,Drupal,drupalSettings),window.afterLogout=function(){navigator.cookieEnabled&&(localStorage.removeItem("userprofile"),localStorage.removeItem("cmg_lpg"),localStorage.removeItem("cmg_avatar_fullbody_image"),localStorage.removeItem("cmg_avatar_profile_image"),localStorage.removeItem("unauthorized"),sessionStorage.removeItem("total_page"),sessionStorage.removeItem("escapeAdminPath"),"function"==typeof setCookie&&(setCookie("cmg_sx","",-1e6),setCookie("cmg_l","",-1e6),setCookie("cmg_uid","",-1e6),setCookie("cmg_xpp","",-1e6),setCookie("ascmg","",-1e6),setCookie("cmg_vs","",-1e6),setCookie("cmg_fx","",-1e6),setCookie("cmg_xps","",-1e6),setCookie("cmg_editor","",-1e6)));},window.cmg_user_logout=function(e){e.preventDefault(),jQuery.ajax({url:"/ajax/cmg-csrf-token",method:"GET",success:function(e){e&&e.logout_token?(afterLogout(),window.location.href="/user/logout?token="+e.logout_token):console.error("Invalid response:",e);},error:function(e){afterLogout();var a=window.location.pathname;/check_logged_in|login|logout/.test(a)&&(a=location.protocol+"//"+location.host+"/"),window.location.href=a,console.error("Failed to fetch logout URL:",e);}});},window.checkProfileVisit=function(){profilevisited=parseInt(localStorage.getItem("profilePgVisit")||0),localStorage.setItem("profilePgVisit",++profilevisited);};var n="userProgressLocal",m="userProfileLeaderboardLocal";if("prod"==r?(n="userProgressProd",m="userProfileLeaderboardProd"):"stage"==r?(n="userProgressStage",m="userProfileLeaderboardStage"):"dev"==r&&(n="userProgressDev",m="userProfileLeaderboardDev"),userprofile="",window.cmg_userprofile_api_settings=function(){var e=!1;void 0!==drupalSettings.userprofile&&void 0!==drupalSettings.userprofile.profile_pages_prod_test&&1==drupalSettings.userprofile.profile_pages_prod_test&&(e=!0),"prod"==r&&void 0!==e&&e?(apiServerURL="https://api.coolmathgames.com/userProfileProd",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboardProd"):"dev"==r?(apiServerURL="https://api.coolmathgames.com/userProfile",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboard"):"stage"==r?(apiServerURL="https://api.coolmathgames.com/userProfileStage",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboardStage"):"prod"==r?(apiServerURL="https://api.coolmathgames.com/userProfileProd",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboardProd"):(apiServerURL="https://api.coolmathgames.com/userProfileLocal",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboardLocal");},"/profile/following"==window.location.pathname&&isUserValidFreeUserOrSubscriber()&&(userprofile=localStorage.getItem("userprofile"),null!=userprofile&&(userprofile=JSON.parse(userprofile),void 0!==userprofile.mfi&&displayUserFollowingDataOnFollowingPage(userprofile.mfi))),window.display_user_profile_block=function(){var e=localStorage.getItem("userprofile");if("en"==drupalSettings.language)var a="/profile/";else a="/"+drupalSettings.language+"/profile/",drupalSettings.language;null!=e&&(e=JSON.parse(e)).user_level;var t="";if(null!=e&&void 0!==e.avatarimage&&""!=e&&null!=e.avatarimage&&""!=e.avatarimage&&"undefined"!=e.avatarimage){var l=e.avatarimage.split("&&");t=l[0],l[1];}var r=null!=e&&e.publicname?e.publicname:"";null==e&&""==r&&"function"==typeof getCookie&&null!=getCookie("cmg_fx")&&(r=getCookie("cmg_fx"));var s=r.toLocaleLowerCase();location.pathname!==a+"subscribe"&&location.pathname!==a+"premium-access"||"undefined"==typeof premium_nickname||null==premium_nickname||""===premium_nickname?"undefined"!=typeof user_nickname&&""!=user_nickname&&getCookie("cmg_fx")==user_nickname&&(s=(r=user_nickname).toLocaleLowerCase()):r=premium_nickname,location.pathname!==a+"subscribe"&&location.pathname!==a+"premium-access"||"undefined"==typeof premium_avatar||null==premium_avatar||""===premium_avatar||(t=premium_avatar),"/profile/subscribe"!==location.pathname&&"/profile/premium-access"!==location.pathname||"undefined"==typeof premium_avatar||null==premium_avatar||""===premium_avatar?"undefined"!=typeof user_avatar_path&&""!==user_avatar_path&&"undefined"!=typeof user_id&&void 0!==o&&user_id==o?avatar_path=user_avatar_path:avatar_path=decodeURIComponent(t):avatar_path=decodeURIComponent(premium_avatar);var i='\n  <div class="welcome-box" style="display:block"><div class="user-profile-promo"  >\n    <div class="user-avatar-info avatar">\n      <div class="user-avatar">\n        <a href="'.concat(a+s,'">\n          <img src="').concat(avatar_path,'" alt="').concat(r,'" />\n        </a>\n      </div>\n      <div class="level">\n        <a class="nav-link text-center">\n          <span class="badge badge-primary">1</span>\n        </a>\n      </div>\n    </div>\n    <div class="user-promo-info">\n      <div class="user-name">\n        <a href="').concat(a+s,'">').concat(r,'</a>\n      </div>\n      <div class="progress user-xp"></div>\n      <div class="user-level-info">\n        <div class="user-level">').concat(Drupal.t("Level"),' <span>1</span></div>\n        <div class="user-total-xp"></div>\n      </div>\n    </div>\n  </div>\n  <a class="profile-edit-button" href="').concat(a+s+"/edit",'">\n    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">\n      <path d="M12.0282 16.6901H1.66197C0.741784 16.6901 0 15.9484 0 15.0282V4.66197C0 3.74178 0.741784 3 1.66197 3H4.65728C4.97653 3 5.23944 3.26291 5.23944 3.58216C5.23944 3.90141 4.97653 4.16432 4.65728 4.16432H1.66197C1.38967 4.16432 1.17371 4.38028 1.17371 4.65258V15.0282C1.17371 15.3005 1.38967 15.5164 1.66197 15.5164H12.0282C12.3005 15.5164 12.5164 15.3005 12.5164 15.0282V12.3427C12.5164 12.0235 12.7793 11.7606 13.0986 11.7606C13.4178 11.7606 13.6808 12.0235 13.6808 12.3427V15.0282C13.6808 15.9484 12.939 16.6901 12.0188 16.6901H12.0282Z" fill="white"></path>\n      <path d="M9.02355 12.9248H4.65735C4.33811 12.9248 4.0752 12.6619 4.0752 12.3426V7.96704C4.0752 7.80742 4.14092 7.66657 4.24421 7.5539L10.216 1.58207C10.9954 0.802723 12.2536 0.802723 13.0329 1.58207L15.4179 3.94826C15.7935 4.32385 16.0095 4.83089 16.0095 5.35671C16.0095 5.89192 15.8029 6.38958 15.4273 6.76516L9.44609 12.7464C9.33341 12.8591 9.18318 12.9154 9.03294 12.9154L9.02355 12.9248ZM5.23951 11.7511H8.77942L14.5822 5.93887C14.7419 5.77925 14.8264 5.57268 14.8264 5.35671C14.8264 5.14075 14.7419 4.93418 14.5822 4.77455L12.1973 2.40836C11.878 2.08911 11.3522 2.08911 11.0329 2.40836L5.2489 8.21117V11.7511H5.23951Z" fill="white" style="/* fill: white; *//* stroke: white; *//* stroke-width: 3px; *//* stroke-linecap: square; */"></path>\n    </svg>\n  </a>\n  </div>\n  ');jQuery(".page-header, .page-header-mobile").find(".welcome-box").replaceWith(i);var o=getCookie("cmg_uid"),n='<div class="header-user-widget user-promo-menu"><ul>\n    <li><a href="'.concat(a+s,'" title="').concat(Drupal.t("My Profile"),'">').concat(Drupal.t("My Profile"),'</a></li>\n    <li><a href="').concat(a+s+"#tab5",'" title="').concat(Drupal.t("My Favorites"),'">').concat(Drupal.t("My Favorites"),'</a></li>\n    <li><a href="').concat(a+s+"/edit",'" title="').concat(Drupal.t("Customize"),'">').concat(Drupal.t("Customize"),'</a></li>\n    <li class="go-ad-free-dd-link"><a href="').concat(a+"premium-access/5b8689c9/"+s,'" title="').concat(Drupal.t("Go Ad-Free"),'">').concat(Drupal.t("Go Ad-Free"),'</a></li>\n    <li><a href="').concat(a+"account-settings",'" title="').concat(Drupal.t("Account Settings"),'">').concat(Drupal.t("Account Settings"),'</a></li>\n    <li><a href="/user/logout" onClick="Drupal.behaviors.cmatgame_subscriber_behavior.user_logout(event); return false;" class="logout" title="').concat(Drupal.t("Log Out"),'">').concat(Drupal.t("Log Out"),"</a></li>\n  </ul></div>");jQuery(".menu-profile ul").length||jQuery(".menu-profile  .mnav-scroller").html(n),jQuery(".navbar-right a.login-link").replaceWith('<a class="profile-image" href="#" title="'.concat(Drupal.t("My Profile"),'"><img width="40px" height="40px" src="').concat(avatar_path,'" alt="').concat(r,'" /></a>')),void 0!==o&&null!=o&&""!=o&&null!=(e=localStorage.getItem("userprofile"))&&void 0!==(e=JSON.parse(e)).avatarimage&&""!=e.avatarimage&&null!=e.avatarimage&&setTimeout((function(){e=JSON.parse(localStorage.getItem("userprofile")),t=e.avatarimage.split("&&"),jQuery(".page-header, .page-header-mobile").find(".profile-image").children().attr("src",decodeURIComponent(t[0])),jQuery(".page-header, .page-header-mobile").find(".user-avatar").children().children().attr("src",decodeURIComponent(t[0])),"undefined"!=typeof user_id&&void 0!==o&&parseInt(user_id)==parseInt(o)&&jQuery(".avatar-image-wrapper").children().children().children().attr("src",decodeURIComponent(t[0]));}),1e3),jQuery(".tabbed-navbar").find(".icon-profile").html("<img src='"+avatar_path+"' alt='"+r+"' width='18' height='18' />").css("background","transparent"),display_user_profile_progressbar();},window.profile_switch_userstyle=function(){if(isUserValidFreeUserOrSubscriber()){if(userprofile=localStorage.getItem("userprofile"),display_user_profile_block(),"/profile/subscribe"!==location.pathname&&"/profile/premium-access"!==location.pathname||"undefined"==typeof premium_nickname||null==premium_nickname||""===premium_nickname||(user_styleName=premium_nickname),"/profile/subscribe"!==location.pathname&&"/profile/premium-access"!==location.pathname||"undefined"==typeof premium_theme_path||null==premium_theme_path||""===premium_theme_path||(user_stylePath=premium_theme_path),("undefined"==typeof user_styleName||""==user_styleName||"undefined"==typeof user_stylePath||""==user_stylePath||!isCurrentUserAVisitor&&""!=getCookie("cmg_xps")&&user_styleName!=getCookie("cmg_xps"))&&(user_styleName=getCookie("cmg_xps"),user_stylePath=getCookie("cmg_xpp")),"undefined"!=typeof user_styleName&&null!=user_styleName&&""!==user_styleName&&null!=user_stylePath&&""!==user_stylePath){var e=[];e={name:decodeURIComponent(user_styleName),path:decodeURIComponent(user_stylePath)},0===switchcount&&(switchUserStyle(e),switchcount=1);}}else "undefined"!=typeof user_styleName&&null!=user_styleName&&""!==user_styleName&&null!=user_stylePath&&""!==user_stylePath&&(e=[],e={name:decodeURIComponent(user_styleName),path:decodeURIComponent(user_stylePath)},0===switchcount&&(switchUserStyle(e),switchcount=1));},jQuery(document).ready((function(){profile_switch_userstyle();})),window.retrieveUserProfileDataForAnonymousUsers=function(e){if("undefined"!=typeof cmgxpvisitedid&&""!=cmgxpvisitedid&&cmgxpvisitedid==e){if(""!=typeof cmgxpvisitedid)return;}else{if("undefined"!=typeof cmgxpvisitedid&&""!=cmgxpvisitedid)return;}"undefined"!=typeof cmgxpvisitedid&&cmgxpvisitedid!=e&&(cmgxpvisitedid=e),cmg_userprofile_api_settings(),jQuery.ajaxSetup({async:!1}),db_conn=l,"mongodb"==db_conn?(urls=s+"/getuserprofile_single",post_type="POST",data_gets=JSON.stringify({uid:e,environment:n}),content_types="application/json"):(urls=apiServerURL+"/getdata/"+e,post_type="GET",data_gets={},content_types=""),jQuery.ajax({url:urls,type:post_type,data:data_gets,contentType:content_types,success:function(e){var a="";if("mongodb"==db_conn&&void 0!==e.Items&&e.Items.length){var t=JSON.stringify(e.Items[0]);t=t.replace(/\"pname\"/,'"publicname"').replace(/\"aimg\"/,'"avatarimage"').replace(/\"lpg\"/,'"lastplayedgame"').replace(/\"mgl\"/,'"mygameslist"').replace(/\"ul\"/,'"user_level"').replace(/\"picl\"/,'"progress_in_current_level"').replace(/\"mxpl\"/,'"max_xp_in_current_level"').replace(/\"lup\"/,'"lastUpdated"').replace(/\"cks\"/,'"cookies"').replace(/\"afimg\"/,'"cmg_avatar_fullbody_image"').replace(/\"lv\"/,'"level"').replace(/\"lsg\"/,'"localStorage"').replace(/\"fsa\"/,'"flashStorage"'),e.Items[0]=JSON.parse(t);}e.Items&&void 0!==e.Items[0]&&e.Items[0].localStorage&&""!=e.Items[0].localStorage.S&&0==e.Items[0].localStorage.S.indexOf("userprofile=cmgocbcmgdquseridcmgdq")&&e.Items[0].localStorage.S.indexOf("cmgzip")<0?(g=e.Items[0].localStorage,a=(a=(a=cmg_deminify_gamelist(g.S)).replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"').replace(/cmgeq/g,"=")).replace(/\\"/g,'"').replace(/""/g,'"')):e.Items&&void 0!==e.Items[0]&&e.Items[0].localStorage&&e.Items[0].localStorage.S.indexOf("cmgzip")>=0?a=g=cmg_decompress_data(e.Items[0].localStorage.S):(a=e.Items[0].localStorage.S,a=(a=cmg_deminify_gamelist(a)).replace(/'/g,'"')),visitorprofile="";for(var l=a.split("cmgsep"),r=0;r<l.length;r++)if(tmpData=l[r].split("="),isNaN(tmpData[1])||(tmpData[1]=parseInt(tmpData[1])),"userprofile"==tmpData[0]){visitorprofile=tmpData[1];var s=JSON.parse(visitorprofile);s.avatarimage.includes("char-tool-img.coolmathgames.com")&&(jQuery(".avatar-image-wrapper").children().children().children().css("display","none"),setTimeout((function(){jQuery(".avatar-image-wrapper").children().children().children().css("display","block"),jQuery(".avatar-image-wrapper").children().children().children().attr("src",decodeURIComponent(s.avatarimage));}),1e3));break;}},error:function(e){}});},"undefined"!=typeof user_id)a=getCookie("cmg_uid"),user_id==a?isCurrentUserAVisitor=!1:(isCurrentUserAVisitor=!0,retrieveUserProfileDataForAnonymousUsers(user_id),userprofile=visitorprofile,$(".user-hud").find(".user-progress").hide(),$(".user-hud").find(".totals").hide());else if(null!=a){a=getCookie("cmg_uid");var c=getCookie("cmg_fx").toLowerCase()+"/following";pageUrl=$(location).attr("href");var p="";pageUrl.includes("/following")&&(varSplit=pageUrl.split("/profile/"),p=varSplit[1].toLowerCase()),isCurrentUserAVisitor=p!=c;}else isCurrentUserAVisitor=!0;window.initializeUserprofileLocalStorage=function(){var e={userid:getCookie("cmg_uid"),lastplayedgame:0,mygameslist:[],user_level:1,progress_in_current_level:0,max_xp_in_current_level:100};null!=getCookie("cmg_fx")?e.publicname=getCookie("cmg_fx"):void 0!==drupalSettings.userprofile&&(e.publicname=drupalSettings.userprofile.publicname),void 0!==drupalSettings.userprofile&&-1!=drupalSettings.userprofile.avatarimage.indexOf("/sites/")&&(e.avatarimage=encodeURIComponent(drupalSettings.userprofile.avatarimage)),localStorage.setItem("userprofile",JSON.stringify(e));},window.display_user_profile_progressbar=function(){var e=localStorage.getItem("userprofile");if(null!=e){if((e=JSON.parse(e)).user_level>=50)var a="starbadge";else a="";if(e.user_level>100?user_level_cmg=100:user_level_cmg=e.user_level,"undefined"==typeof user_level_cmg&&(user_level_cmg=1),isCurrentUserAVisitor||jQuery(".user-hud .level").replaceWith('<div class="level level-'+user_level_cmg+" "+a+'"><a class="nav-link text-center"><span class="badge badge-primary">'+user_level_cmg+"</span></a></dev>"),jQuery(".welcome-box .level").replaceWith('<div class="level level-'+user_level_cmg+" "+a+'"><a class="nav-link text-center"><span class="badge badge-primary">'+user_level_cmg+"</span></a></dev>"),void 0!==e.max_xp_in_current_level){var t=e.max_xp_in_current_level,l=Math.floor(e.progress_in_current_level/t*100),r="";r=void 0===e.user_level?"0/100 "+Drupal.t("XP"):e.user_level<100?e.progress_in_current_level+"/"+t+" "+Drupal.t("XP"):Drupal.t("MAX LEVEL"),jQuery(".welcome-box .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-bar" role="progressbar" aria-label="Progress Towards Next Level"   data-width=" '+l+'" style="width: '+l+'%" aria-valuenow="'+e.progress_in_current_level+'" aria-valuemin="0" aria-valuemax="'+t+'"></div></div>'),jQuery(".welcome-box .user-total-xp").text(r),jQuery(".welcome-box .user-level span").text(user_level_cmg),navigator.cookieEnabled&&null!=sessionStorage.getItem("leveledup")&&l<=20&&user_level_cmg;}else jQuery(".welcome-box .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-bar" role="progressbar" data-width=" 0" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div>'),jQuery(".welcome-box .user-total-xp").text("0/100 XP");}else isCurrentUserAVisitor||jQuery(".user-hud .level").replaceWith('<div class="level level-1"><a class="nav-link text-center"><span class="badge badge-primary">1</span></a></dev>'),jQuery(".welcome-box .level").replaceWith('<div class="level level-1 "><a class="nav-link text-center"><span class="badge badge-primary">1</span></a></dev>'),jQuery(".welcome-box .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-bar" role="progressbar" data-width=" 0" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div>'),jQuery(".welcome-box .user-total-xp").text("0/100 XP"),jQuery(".welcome-box .user-level span").text("1");},window.changemyGamelistData=function(e,a){for(var t in a)if(a[t].id==e)return a[t].leaderboardCompleteSt="yes",a;return null;},"function"==typeof getCookie&&null!==getCookie("cmg_translation")&&"es"===getCookie("cmg_translation")?t="Cerrar sesión":"function"==typeof getCookie&&null!==getCookie("cmg_translation")&&"pt-br"===getCookie("cmg_translation")&&(t="Sair"),function(a,l,r,s){l.behaviors.cmatgame_leaderboard_post_user_score={attach:function(e,t){if(a("#edit-signmeout-submit").click((function(){localStorage.removeItem("userprofile"),localStorage.removeItem("cmg_lpg");})),navigator.cookieEnabled){var l=sessionStorage.getItem("game_id");user_score_json_data=sessionStorage.getItem(l+"user_score_json_data"),null!=l&&null!=user_score_json_data&&(a.post("/ajax/score",JSON.parse(user_score_json_data)),sessionStorage.removeItem(l+"user_score_json_data"),sessionStorage.removeItem("game_id"));}}},l.behaviors.cmatgame_subscriber_behavior={user_logout:function(e){return e.preventDefault(),window.cmg_user_logout(e),!1;},user_loginbar_update:function(){var r="";"undefined"!==window.location.pathname&&""!==window.location.pathname&&"/"!==window.location.pathname&&"/user/logout"!==window.location.pathname&&(r="?destination="+window.location.pathname);var i="/login";webhost=/cmatgame.local|coolmathgames.local|local/,i=webhost.test(window.location.host)?window.location.protocol+"//"+window.location.host+"/login"+r:"https://"+window.location.host+"/login"+r;var o='<li class="first"><a href="/profile/account-settings" title="My Account">My Account</a>&nbsp;</li><li>/</li><li class="last">&nbsp;<a href="/user/logout" class="logout" onClick="Drupal.behaviors.cmatgame_subscriber_behavior.user_logout(event); return false;" title="'+t+'">'+t+"</a></li>",n='<li class="first last"><a title="Subscriber Login" class="welcome-text" href="'+i+'">Subscriber Login</a></li>',m=getCookie("cmg_l"),c=getCookie("cmg_editor");"1"===getCookie("cmg_uid")&&a("body").addClass("administrator"),"undefined"!=typeof cmatgame_subscriber&&null!==cmatgame_subscriber&&(a("body").removeClass("logged-in").addClass("not-logged-in"),a("body").removeClass("not-active-user"),a("body").addClass("active-user")),null==c||""===c||isNaN(c)||(o='<li class="first"><a href="/user/'+(c=parseInt(c))+'/edit" title="My Account">'+l.t("My Account")+'</a>&nbsp;</li><li>/</li><li class="last">&nbsp;<a href="/user/logout" class="logout" onClick="Drupal.behaviors.cmatgame_subscriber_behavior.user_logout(event); return false;" title="'+t+'">'+t+"</a></li>",a("body").removeClass("logged-in").addClass("not-logged-in not-active-subscription editor-login"),a("body").removeClass("not-active-user"),a("body").addClass("active-user")),"undefined"!=typeof cmg_school_whitelisted&&"yes"===cmg_school_whitelisted&&(n=o=""),e(m)!==s&&""!==m&&null!==m?(a(".pane-cmatgame-subscription-userloginbar2 .welcome-box").replaceWith('<ul class="welcome-box">'+o+"</ul>"),a("body").removeClass("not-logged-in"),a("body").addClass("logged-in"),a("body").removeClass("not-active-user"),a("body").addClass("active-user")):a(".pane-cmatgame-subscription-userloginbar2 .welcome-box").replaceWith('<ul class="welcome-box">'+n+"</ul>");},attach:function(e,a){l.behaviors.cmatgame_subscriber_behavior.user_loginbar_update();}};}($,Drupal,0,this.document),window.displayUserFollowingDataOnFollowingPage=function(a,t){if(cmg_userprofile_api_settings(),"undefined"!=typeof fvid&&""!==fvid&&(fvid=parseInt(fvid),userprofile.userid,fvid),"en"==drupalSettings.language)var r="/profile";else r="/"+drupalSettings.language+"/profile";for(var i='<form data-drupal-selector="views-form-flag-followers-page-following" class="form-placeholder-include-children" data-msg-required="This field is required." action="'+r+'/following" method="post" id="views-form-flag-followers-page-following" accept-charset="UTF-8" novalidate="novalidate"><div class="table-responsive following"><div class="tabledrag-toggle-weight-wrapper"><button type="button" class="link tabledrag-toggle-weight">Show row weights</button></div><table id="draggableviews-table-flag-followers-page-following" class="cols-0 table table-bordered"><tbody><ul class="ui-sortable draggable" id="sortable">',o=a.split(","),m=1,c=Array(),p=0;p<o.length;p++){var d=o[p],u=new RegExp(d,"gm"),g=0,v="inactive";u.test(t)&&(g=1,v="active"),jQuery.ajaxSetup({async:!1});var f="",_="",y="",h="";"mongodb"==l?(f=s+"/getuserprofile_single",_="POST",y=JSON.stringify({uid:o[p],environment:n}),h="application/json"):(f="apiServerURL + "/getdata/" + following_uidsArray[i]",_="GET",y={},h="text/plain"),jQuery.ajax({url:f,type:_,data:y,contentType:h,success:function(a){if(a&&"object"===e(a)&&Object.keys(a).length>0){var t={uid:o[p],publicname:a.Items[0].pname.S,avatarImage:decodeURIComponent(a.Items[0].aimg.S),lastplayedgame:a.Items[0].lpg.S,user_level:a.Items[0].lv.S};if($("#sortable li").length%2==0)var l="playlist-item-following-alert-dark";else l="playlist-item-following-alert-light";if(t.user_level>userprofile.user_level){var s='<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(r+"/"+t.publicname.toLowerCase(),t.publicname)+' outleveled you </div></div><div class="col-sm-3 alert-icon-container"> <span class=" alert-outlevel-icon"></span></div>';jQuery("#sortable").append('<li id="follower-list-item-alertlist" class="row avatar ui-state-default   '+l+' draggable">'+s+"</li>");}var n=searchGamesById(a.Items[0].lpg.S),d="",u="";if(n.length>0&&(d=n[0].title,u=n[0].alias),m%2==1)var f="playlist-game-item-following-light";else f="playlist-game-item-following-dark";var _="<div></div>";if(c[m]=t.uid,g>=1)var y="with-followup-div",h="with-followup-div-last-played";else y="col-7 col-lg-7",h="";if(t.user_level>=50)var b="starbadge";else b="";if(t.user_level>100)var w=100;else w=t.user_level;i+='<li id="follower-list-item-'+t.publicname+'" class="row avatar ui-state-default playlist-game-item-following '+f+' draggable" ><div class="col handlesign-following">&nbsp;</div><div class="col-4 col-lg-3 profile-img-following"><div class="avatar-image"><a href="'+r+"/"+t.publicname+'"><img class="img-fluid-following" src="'+t.avatarImage+'" alt="'+t.publicname+'" onerror="this.style.display="none";" role="img"></a></div><div class="level level-'+t.user_level+" "+b+'"><a class="nav-link text-center"><span class="badge badge-primary">'+w+'</span></a></div></div><div class=" profile-info-following  '+y+'"><a href="'+r+"/"+t.publicname+'" hreflang="en" class="menu-item__link"><h5>'+t.publicname+'</h5></a><div class="last-played">',d&&(i+='<div class="last-played-txt"><h6>'+Drupal.t("Last played")+": </h6></div>"),i+='<div class="last-played-list-game '+h+'"><a href="/0-'+u+'"><h6> '+d+'</h6></a></div></div></div><div style="display: none;"><input class="draggableviews-id form-control col-md-4" data-drupal-selector="edit-draggableviews-0-id" data-msg-required="This field is required." type="hidden" name="draggableviews[0][id]" value='+t.uid+'><input class="draggableviews-parent form-control col-md-4" data-drupal-selector="edit-draggableviews-0-parent" data-msg-required="This field is required." type="hidden" name="draggableviews[0][parent]" value="0"></div>',g>=1&&(i+='<div class="follow-you-container"><div class="follows-you '+v+'">'+Drupal.t("FOLLOWS YOU")+"</div></div>");var S=t.publicname.trim();isCurrentUserAVisitor||(_='<a href="#!" class="deletegame"  data-id="'+S+'"  onclick="deletFollowerWithPubname(this);"><img align="right" class="delimg-following" src="/themes/custom/coolmath/assets/images/delete.png"></a>'),i+=_,i+="</li>",i+='<li id="confirm-blck-follower-list-item-'+t.publicname+'" class="ui-state-default '+f+' draggable" style="display : none;">',i+='<div class="follower-confirm-create-button" id="conform-create-button-id" onclick="get_playlist_premium_handler(this);"><div class="rmv-container">'+Drupal.t("Remove")+" "+t.publicname+'?</div><div class="acct-action-btn-container"><div class="follower-yes-btn-conatiner"><input onClick="ConfirmfollowerRemove(this,'+t.uid+');"  data-id="'+S+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="'+Drupal.t("Yes")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div><div class="follower-pa-btn-conatiner"><input onClick="cancelRemoveFollower(this);" data-id="'+S+'" data-drupal-selector="edit--profile-delete-submit" type="button" name="profile_premium_access_submit_button" value="'+window.noTxt+'" class=" following-confirm-access-btn button js-form-submit form-submit btn btn-primary btn-cancel"></div></div>',i+=" </li>",m++;}},error:function(e){currentElem[0].innerHTML="";}});}1==m&&(i+='<li class="user-profile-following-data"><span class="no-result-following-txt"><h3>'+Drupal.t("Not following anyone yet")+"</h3></span></li>"),i+="</ul></tbody></table></div></form>";var b=c.join();jQuery("#edit-follower-list-showing").val(b),jQuery(".user-profile-following-list").html(i),cmgyaftitle&&jQuery("#cmgyaftitle").length&&jQuery("#cmgyaftitle").parent().html(cmgyaftitle),isCurrentUserAVisitor||saveUserFollowings(a,t);},window.cancelRemoveFollower=function(e){var a="#follower-list-item-"+e.getAttribute("data-id"),t="#confirm-blck-follower-list-item-"+e.getAttribute("data-id");jQuery(t).hide(),jQuery(a).show();},window.deletFollowerWithPubname=function(e){event.preventDefault();var a="#follower-list-item-"+e.getAttribute("data-id"),t="#confirm-blck-follower-list-item-"+e.getAttribute("data-id");jQuery(t).show(),jQuery(a).hide();},window.ConfirmfollowerRemove=function(e,a){var t="#follower-list-item-"+e.getAttribute("data-id"),l="#confirm-blck-follower-list-item-"+e.getAttribute("data-id");jQuery(t).remove(),jQuery(l).remove(),t="#follower-list-item-"+e.getAttribute("data-id"),l="#confirm-blck-follower-list-item-"+e.getAttribute("data-id");var r=localStorage.getItem("userprofile");return r=JSON.parse(r),jQuery(l).show(),jQuery(t).hide(),jQuery.ajax({url:location.protocol+"//"+location.host+"/profile/"+r.publicname+"/following?unflag="+a,data:"message="+a,type:"POST",success:function(t){var l="<div role='contentinfo' aria-label='Status message' ><div class='alert alert-success alert-dismissible' role='alert'>"+Drupal.t("Removed")+" "+e.getAttribute("data-id")+"<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>×</span></button></div></div>";jQuery(".result_message").html(l);var r=localStorage.getItem("userprofile");r=JSON.parse(r),following_uids=r.mfi.split(","),following_uids=following_uids.filter((function(e){return e!=a;})),following_uids.length>0?following_uids=following_uids.join():following_uids="",saveUserFollowings(following_uids,r.mfe),1==updateFollowerShowingVal(a).length&&(outputHTML='<div class="no-follow-conatiner"><div class="user-profile-following-data"><span class="no-result-following-txt"><h3>'+Drupal.t("Not following anyone yet")+"</h3></span></div></div>",jQuery(".user-profile-following-list").html(outputHTML));}}),!1;},window.VisiterUnfollower=function(e){var a=localStorage.getItem("userprofile");return a=JSON.parse(a),jQuery.ajax({url:location.protocol+"//"+location.host+"/profile/"+a.publicname+"/following?unflag="+e,data:"message="+e,type:"POST",success:function(t){following_uids=a.mfi.split(","),following_uids=following_uids.filter((function(a){return a!=e;})),following_uids.length>0?following_uids=following_uids.join():following_uids="",saveUserFollowings(following_uids,a.mfe),jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings"><div class="form-group row"><input onClick="VisiterFollower('+e+');"  data-id="'+a.publicname+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="+ '+Drupal.t("Follow")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div>');}}),!1;},window.VisiterFollower=function(e){var a=localStorage.getItem("userprofile");return a=JSON.parse(a),jQuery.ajax({url:location.protocol+"//"+location.host+"/profile/"+a.publicname+"/following?flag="+e,data:"message="+e,type:"POST",success:function(t){void 0!==a.mfi&&null!=a.mfi&&"null"!=a.myfollowings?(following_uids=a.mfi,following_uids=following_uids+","+e):following_uids=e.toString(),saveUserFollowings(following_uids,a.mfe),jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings"><div class="form-group row"><input onClick="VisiterUnfollower('+e+');"  data-id="'+a.publicname+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="'+Drupal.t("Unfollow")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div></div></div>');}}),!1;},window.updateFollowerShowingVal=function(e){var a=jQuery("#edit-follower-list-showing").val().split(",");return a=a.filter((function(a){return a!=e;})),jQuery("#edit-follower-list-showing").val(a.join()),a;};var d=!0;supUpTime=0,window.saveUserProgress=function(){if((!/profile/.test(location.href)||"undefined"==typeof usrXpSaved||!usrXpSaved)&&(cmg_userprofile_api_settings(),(void 0===drupalSettings.cmatgame||void 0===drupalSettings.cmatgame.swfembed||""==drupalSettings.cmatgame.swfembed||void 0===drupalSettings.cmatgame.flash_emulation||0!=drupalSettings.cmatgame.flash_emulation||void 0===drupalSettings.cmatgame.swfembed||void 0===drupalSettings.cmatgame.swfembed.swf||""==drupalSettings.cmatgame.swfembed.swf)&&isUserValidFreeUserOrSubscriber())){var t=localStorage.getItem("userprofile");if(null==(t=JSON.parse(t))||void 0===t.userid||0==parseInt(t.userid)&&null==getCookie("cmg_uid"))return;var r=!1,i="undefined"!=typeof srvrUserProfileStr&&"0"!=srvrUserProfileStr?JSON.parse(srvrUserProfileStr):[];if("undefined"==typeof srvrUserProfileStr||"0"==srvrUserProfileStr||0==i.length)r=!0,0==t.userid&&null!=getCookie("cmg_uid")&&(t.userid=parseInt(getCookie("cmg_uid")));else{if(srvrUid=void 0!==i.userid?parseInt(i.userid):0,srvrLvl=void 0!==i.user_level?parseInt(i.user_level):1,srvrGames=void 0!==i.mygameslist&&i.mygameslist.length?i.mygameslist:[],srvrPicl=void 0!==i.progress_in_current_level?parseInt(i.progress_in_current_level):0,srvrUpTime=void 0!==i.lastUpdated?parseInt(i.lastUpdated):0,localUid=void 0!==t.userid?parseInt(t.userid):0,localLvl=void 0!==t.user_level?parseInt(t.user_level):1,localGames=void 0!==t.mygameslist&&t.mygameslist.length?t.mygameslist:[],localPicl=void 0!==t.progress_in_current_level?parseInt(t.progress_in_current_level):0,localUpTime=void 0!==t.lastUpdated?parseInt(t.lastUpdated):0,0==srvrUid||0==localUid||srvrUid!=localUid)return;if(localLvl<srvrLvl||srvrLvl==localLvl&&localPicl<srvrPicl)return;if(0==localGames.length&&srvrGames.length>0||srvrGames.length>localGames.length)return;if(srvrUpTime>localUpTime)return;r=!0;}if(!r)return;if(d){var o=removeduplicategameids();t.mygameslist=o,srvrUserProfileStr=JSON.stringify(t),localStorage.setItem("userprofile",srvrUserProfileStr);}void 0!==localStorage.getItem("cmg_avatar_profile_image")&&""!=localStorage.getItem("cmg_avatar_profile_image")&&null!=localStorage.getItem("cmg_avatar_profile_image")&&($(".profile-image").children().attr("src",localStorage.getItem("cmg_avatar_profile_image")),$(".user-avatar").children().children().attr("src",localStorage.getItem("cmg_avatar_profile_image")),t.avatarimage=localStorage.getItem("cmg_avatar_profile_image")+"&&"+localStorage.getItem("cmg_avatar_fullbody_image"),srvrUserProfileStr=JSON.stringify(t),localStorage.setItem("userprofile",srvrUserProfileStr));for(var m="",c=0;c<localStorage.length;c++)if("userprofile"==localStorage.key(c)){var p=localStorage.getItem(localStorage.key(c));p=(p=cmg_minify_gamelist(p)).replace(/"/g,"'"),m=m+localStorage.key(c)+"="+p+"cmgsep";}"undefined"!=typeof gameId?lastplayedgame=gameId:void 0!==t.lastplayedgame?lastplayedgame=t.lastplayedgame:lastplayedgame=0;var u="";void 0!==t&&null!=t&&t.avatarimage&&(u=t.avatarimage,t.avatarimage.indexOf("/sites/")>-1?u=encodeURIComponent(t.avatarimage):t.avatarimage.indexOf("/uploads/")>-1&&(u=t.avatarimage)),void 0!==localStorage.getItem("cmg_avatar_profile_image")&&""!=localStorage.getItem("cmg_avatar_profile_image")&&null!=localStorage.getItem("cmg_avatar_profile_image")&&(u=localStorage.getItem("cmg_avatar_profile_image"),jQuery(".avatar-image-wrapper").children().children().children().attr("src",u),jQuery(".tabbed-navbar").find(".icon-profile img").attr("src",u));var g="";if(void 0!==localStorage.getItem("cmg_avatar_fullbody_image")&&""!=localStorage.getItem("cmg_avatar_fullbody_image")&&null!=localStorage.getItem("cmg_avatar_fullbody_image")&&(g=localStorage.getItem("cmg_avatar_fullbody_image")),"object"==e(t)&&null!=t&&t.userid==a){jQuery.ajaxSetup({async:!1});var v="";v="mongodb"==l?s+"/insertuserprofile":apiServerURL+"/uploaddata",jQuery(".page-header, .page-header-mobile").find(".profile-image").children().attr("src")!=decodeURIComponent(u)&&(jQuery(".page-header, .page-header-mobile").find(".profile-image").children().attr("src",decodeURIComponent(u)),jQuery(".page-header, .page-header-mobile").find(".user-avatar").children().children().attr("src",decodeURIComponent(u))),jQuery.ajax({url:v,type:"POST",async:!0,data:JSON.stringify({uid:a,cks:0,lsg:m,lpg:lastplayedgame,lv:t.user_level,pname:t.publicname,aimg:u,fsa:0,environment:n,lup:Date.now(),cmg_avatar_fullbody_image:g}),success:function(e){supUpTime=(new Date()).getTime(),usrXpSaved=1,void 0!==localStorage.getItem("cmg_avatar_profile_image")&&""!=localStorage.getItem("cmg_avatar_profile_image")&&null!=localStorage.getItem("cmg_avatar_profile_image")&&(retrieveUserProgress(),localStorage.removeItem("cmg_avatar_profile_image"),localStorage.removeItem("cmg_avatar_fullbody_image"));},error:function(e,a){debugOut("XP->ls API saveUserProgress: Request failed: "+a);},contentType:"application/json",dataType:"json"});}return t;}},window.removeduplicategameids=function(){var e=localStorage.getItem("userprofile");e=JSON.parse(e),mygameslistData=e.mygameslist;var a=Object.values(mygameslistData.reduce((function(e,a){var t=e[a.id],l=searchGamesById(a.id);return null!=l&&0!=l.length&&(l=l[0].ilb),"1"==l?(!t||parseInt(a.level)>parseInt(t.level)||!t||parseInt(a.level)==parseInt(t.level)&&parseInt(a.timestamp)>parseInt(t.timestamp))&&(e[a.id]=a):(!t||parseInt(a.time)>parseInt(t.time)||!t||parseInt(a.time)==parseInt(t.time)&&parseInt(a.timestamp)>parseInt(t.timestamp))&&(e[a.id]=a),e;}),{}));return d=!1,a;},window.saveUserFollowings=function(e,a){if(isUserValidFreeUserOrSubscriber()){var t=localStorage.getItem("userprofile");(t=JSON.parse(t)).mfi=""==e?null:e,t.mfe=""==a?null:a,localStorage.setItem("userprofile",JSON.stringify(t)),saveUserProgress();}},window.saveUserProgressleaderboard=function(e,a,t){if((void 0===drupalSettings.cmatgame||void 0===drupalSettings.cmatgame.swfembed||""==drupalSettings.cmatgame.swfembed||void 0===drupalSettings.cmatgame.flash_emulation||0!=drupalSettings.cmatgame.flash_emulation||void 0===drupalSettings.cmatgame.swfembed||void 0===drupalSettings.cmatgame.swfembed.swf||""==drupalSettings.cmatgame.swfembed.swf)&&void 0!==e&&0!=parseInt(e)){cmg_userprofile_api_settings();var r="";r="mongodb"==l?s+"/apiLeaderboardURL_upload":apiLeaderboardURL+"/uploaddata",jQuery.ajax({url:r,type:"POST",data:JSON.stringify({uid:e,gid:a,ca:t,environment:m}),contentType:"application/json",dataType:"json"});}},window.checkHowManyLevelsEarned=function(e,a,t){e.user_level;var l=parseInt(e.progress_in_current_level);e.max_xp_in_current_level=t[e.user_level-1],totalXPGained=l+a-parseInt(e.max_xp_in_current_level),e.user_level<100&&(e.user_level=e.user_level+1);for(var r=e.user_level,s=parseInt(t[r-1]);totalXPGained>s;)totalXPGained-=s,s=parseInt(t[e.user_level]),e.max_xp_in_current_level=s,e.user_level<100&&(e.user_level=e.user_level+1);return e.progress_in_current_level=totalXPGained,e;},window.generateMyGamesData=function(e){for(var a=[],t=[],l=void 0!==e&&e.length?e.length:0,r=0;r<l;r++)if(null!=e[r]){t.push(e[r].id);var s=searchGamesById(e[r].id);void 0!==s&&void 0!==s.length&&s.length>0&&(s[0].timestamp=e[r].timestamp,s[0].time=e[r].time,s[0].level=e[r].level,s[0].isFavorite=e[r].isFavorite,void 0!==e[r].nXT&&(s[0].nXT=e[r].nXT),void 0!==e[r].cXT&&(s[0].cXT=e[r].cXT),void 0!==e[r].bookMark?(s[0].bookMark=e[r].bookMark,"undefined"!=typeof gameId&&(bookMark=e[r].bookMark)):s[0].bookMark=0,s[0].timebasedcompletedSt=e[r].timebasedcompletedSt,s[0].incrementgamestatus=e[r].incrementgamestatus,s[0].leaderboardCompleteSt=e[r].leaderboardCompleteSt,void 0===e[r].totalplays?s[0].totalplays=1:s[0].totalplays=e[r].totalplays,"1"==s[0].ilb?"no"==s[0].incrementgamestatus?s[0].xp=parseInt(s[0].level)*s[0].lxp:void 0!==s[0].xp&&1==s[0].timebasedcompletedSt?s[0].xp=parseInt(s[0].level)*s[0].lxp+parseInt(s[0].time)*s[0].mxp:s[0].xp=parseInt(s[0].level)*s[0].lxp:s[0].xp=s[0].time*s[0].mxp,-1==t.indexOf(s[0].id)&&a.push(s[0]));}return a;},window.updateMyGamesTimeSpentLevelBaseinuser=function(e,a){saveMyGamesLevelBased(e,1,a);},window.saveMyGames=function(e,t,l){if(void 0===e||""==e||0==e)return !0;var r=searchGamesById(e);if("undefined"!=typeof level_based_game_converted_2_time_based&&""!==level_based_game_converted_2_time_based||!r.length)return !0;var s=0,i=!1,o=0,n=0;if(void 0!==drupalSettings.language&&""!=drupalSettings.language&&"en"!=drupalSettings.language&&drupalSettings.language,null!=localStorage.getItem("ThumbsUp-"+e)&&"like"==localStorage.getItem("ThumbsUp-"+e)&&(n=1),"undefined"==typeof timeSpentOnCurrentGame&&(timeSpentOnCurrentGame=0),void 0!==r[0].ml&&parseInt(l)>parseInt(r[0].ml))return console.log("cmgGameEvent: Maybe bonus level from cmgGameEvent ("+l+") is greater than max level ("+parseInt(r[0].ml)+") allowed. ",new Date()),!0;if(("undefined"==typeof game_level||"undefined"!=typeof game_level&&""==game_level)&&(game_level=l),navigator.cookieEnabled){void 0!==a&&null!=a||null!=getCookie("cmg_uid")?void 0!==a&&null!=a||null==getCookie("cmg_uid")||(a=parseInt(getCookie("cmg_uid"))):a=0;var m=localStorage.getItem("userprofile"),c=searchGamesById(e);if(null==m)void 0!==a&&null!=a||(a=0),mygameslist=[{id:e,level:1,time:0,totalplays:1,isFavorite:n,timestamp:Date.now(),timebasedcompletedSt:!1,incrementgamestatus:"no"}],i=!0,(m={userid:a,lastplayedgame:e,mygameslist}).lastUpdated=(new Date()).getTime(),localStorage.setItem("userprofile",JSON.stringify(m)),o=1;else{(m=JSON.parse(m)).lastplayedgame=e,mygameslistData=m.mygameslist;var p=!1,d=!1,u=Date.now();if(mygameslistData.length>0&&c.length>0)for(var g=0;g<mygameslistData.length;g++)if(parseInt(mygameslistData[g].id)==parseInt(e)){t?(u=Date.now(),(1==mygameslistData[g].timebasedcompletedSt||mygameslistData[g].level>=parseInt(c[0].ml))&&(d=!0),game_level>parseInt(mygameslistData[g].level)&&(myLBGameData=c,i=!0,mygameslistData[g].level=game_level,d=!(game_level<c[0].ml))):(mygameslistData[g].time=mygameslistData[g].time?parseInt(mygameslistData[g].time)+1:1,d=!1);var v=localStorage.getItem("runoncestarted"),f=(JSON.parse(v)[e],"storagelocal-"+e+"-storagelocal"),_=localStorage.getItem(f);1==d&&"no"==_&&(level_based_game_converted_2_time_based=setInterval((function(){0===(new Date()).getSeconds()&&updateMyGamesTimeSpentLevelBaseinuser(e,l);}),1e3)),mygameslistData[g].isFavorite=n,mygameslistData[g].timestamp=Date.now(),mygameslistData[g].timebasedcompletedSt=d,mygameslistData[g].timecompleted=u,mygameslistData[g].incrementgamestatus="no",incrementedTotalPlays||(mygameslistData[g].totalplays=mygameslistData[g].totalplays?mygameslistData[g].totalplays+1:1,incrementedTotalPlays=!0),p=!0;}p||(mygameslistData.push({id:e,level:1,time:0,totalplays:1,isFavorite:n,timestamp:Date.now(),timebasedcompletedSt:d,timecompleted:u,incrementgamestatus:"no"}),o=t?parseInt(game_level):1,i=!0),m.mygameslist=mygameslistData,m.lastUpdated=(new Date()).getTime();}if(i){if(myGamesData=generateMyGamesData(m.mygameslist),c.length>0&&(s="1"==c[0].ilb?parseInt(c[0].lxp):o*parseInt(c[0].mxp)),void 0===m.progress_in_current_level)m.progress_in_current_level=s,m.user_level=1,m.max_xp_in_current_level=userprofile_level_xpData[0];else{var y=parseInt(m.progress_in_current_level);y+s>=parseInt(m.max_xp_in_current_level)?(totalXPGained=y+s-parseInt(m.max_xp_in_current_level),totalXPGained>=parseInt(userprofile_level_xpData[m.user_level])?m=checkHowManyLevelsEarned(m,s,userprofile_level_xpData):(m.progress_in_current_level=totalXPGained,m.user_level=parseInt(m.user_level)+1,m.max_xp_in_current_level=parseInt(userprofile_level_xpData[m.user_level-1])),1!=m.user_level&&navigator.cookieEnabled&&sessionStorage.setItem("leveledup",m.user_level)):m.progress_in_current_level=parseInt(m.progress_in_current_level)+s;}if(localStorage.setItem("userprofile",JSON.stringify(m)),isUserValidFreeUserOrSubscriber()){display_user_profile_progressbar();var h=searchGamesById(e);"en"==drupalSettings.language&&void 0!==h&&h.length?h[0].alias:void 0!==h&&h.length&&(drupalSettings.language,h[0].alias),1==d&&saveUserProgressleaderboard(a,e,u),saveUserProgress();}}}"function"==typeof cmg_game_xp_dsp&&(m.lastUpdated=(new Date()).getTime(),localStorage.setItem("userprofile",JSON.stringify(m)),cmg_game_xp_dsp());};var u="",g="";sXpLvl=-1,sXpUid=0,lXpUid=0,window.cmg_minify_gamelist=function(e){try{if(""!=e){var a=e.replace(/\"incrementgamestatus\"/g,'"ig"').replace(/\"isFavorite\"/g,'"fa"').replace(/\"bookMark\"/g,'"bm"').replace(/\"level\"/g,'"lv"').replace(/\"time\"/g,'"ti"').replace(/\"timebasedcompletedSt\"/g,'"tb"').replace(/\"timecompleted\"/g,'"tc"').replace(/\"timestamp\"/g,'"ts"').replace(/\"totalplays\"/g,'"tp"').replace(/\"leaderboardCompleteSt\"/g,'"lb"');""!=a&&"mongodb"==db_conn&&(a=a.replace(/\"userid\"/g,'"uid"').replace(/\"publicname\"/g,'"pname"').replace(/\"avatarimage\"/g,'"aimg"').replace(/\"lastplayedgame\"/g,'"lpg"').replace(/\"mygameslist\"/g,'"mgl"').replace(/\"user_level\"/g,'"ul"').replace(/\"progress_in_current_level\"/g,'"picl"').replace(/\"max_xp_in_current_level\"/g,'"mxpl"').replace(/\"lastUpdated\"/g,'"lup"').replace(/\"cookies\"/g,'"cks"').replace(/\"cmg_avatar_fullbody_image\"/g,'"afimg"').replace(/\"localstorage\"/g,'"lsg"').replace(/\"flashstorage\"/g,'"fsa"')),e=a;}else e="";}catch(e){}return e;},window.cmg_deminify_gamelist=function(e){try{if(""!=e){var a=e.replace(/\"ig\"/g,'"incrementgamestatus"').replace(/\"fa\"/g,'"isFavorite"').replace(/\"lv\"/g,'"level"').replace(/\"ti\"/g,'"time"').replace(/\"bm\"/g,'"bookMark"').replace(/\"tb\"/g,'"timebasedcompletedSt"').replace(/\"tc\"/g,'"timecompleted"').replace(/\"ts\"/g,'"timestamp"').replace(/\"tp\"/g,'"totalplays"').replace(/\"lb\"/g,'"leaderboardCompleteSt"');""!=(a=a.replace(/\'ig\'/g,'"incrementgamestatus"').replace(/\'fa\'/g,'"isFavorite"').replace(/\'lv\'/g,'"level"').replace(/\'ti\'/g,'"time"').replace(/\'bm\'/g,'"bookMark"').replace(/\'tb\'/g,'"timebasedcompletedSt"').replace(/\'tc\'/g,'"timecompleted"').replace(/\'ts\'/g,'"timestamp"').replace(/\'tp\'/g,'"totalplays"').replace(/\'lb\'/g,'"leaderboardCompleteSt"'))&&"mongodb"==db_conn&&(a=(a=a.replace(/\'uid\'/g,'"userid"').replace(/\'pname\'/g,'"publicname"').replace(/\'aimg\'/g,'"avatarimage"').replace(/\'lpg\'/g,'"lastplayedgame"').replace(/\'mgl\'/g,'"mygameslist"').replace(/\'ul\'/g,'"user_level"').replace(/\'picl\'/g,'"progress_in_current_level"').replace(/\'mxpl\'/g,'"max_xp_in_current_level"').replace(/\'lup\'/g,'"lastUpdated"').replace(/\'cks\'/g,'"cookies"').replace(/\'afimg\'/g,'"cmg_avatar_fullbody_image"').replace(/\'lv\'/g,'"level"').replace(/\'lsg\'/g,'"localstorage"').replace(/\'fsa\'/g,'"flashstorage"')).replace(/\"uid\"/g,'"userid"').replace(/\"pname\"/g,'"publicname"').replace(/\"aimg\"/g,'"avatarimage"').replace(/\"lpg\"/g,'"lastplayedgame"').replace(/\"mgl\"/g,'"mygameslist"').replace(/\"ul\"/g,'"user_level"').replace(/\"picl\"/g,'"progress_in_current_level"').replace(/\"mxpl\"/g,'"max_xp_in_current_level"').replace(/\"lup\"/g,'"lastUpdated"').replace(/\"cks\"/g,'"cookies"').replace(/\"afimg\"/g,'"cmg_avatar_fullbody_image"').replace(/\"lv\"/g,'"level"').replace(/\"lsg\"/g,'"localstorage"').replace(/\"fsa\"/g,'"flashstorage"')),e=a;}else e="";}catch(e){}return e;},window.cmg_merge_profile_obj=function(a,t){var l=!1,r=void 0!==a.mygameslist&&""!=a.mygameslist&&"0"!=a.mygameslist?a.mygameslist:[],s=void 0!==t.mygameslist&&""!=t.mygameslist&&"0"!=t.mygameslist?t.mygameslist:[],i=[];if(r.length&&s.length){for(var o=0;o<r.length;o++){var n=r[o],m=searchGamesById(n.id);m.length&&"object"==e(m)&&(m=m[0]);for(var c=!1,p=0;p<s.length;p++){var d=s[p];if(n.id==d.id)if(c=!0,"1"==m.ilb){var u=parseInt(r[o].level);u>parseInt(s[p].level)&&parseInt(n.timestamp)>parseInt(d.timestamp)&&(l=!0,t.mygameslist[p].level=u,t.mygameslist[p].totalplays&&(t.mygameslist[p].totalplays=parseInt(t.mygameslist[p].totalplays)+1),m.ml&&u>=parseInt(m.ml)&&1!=t.mygameslist[p].timebasedcompletedSt&&(t.mygameslist[p].timebasedcompletedSt=!0,checkLevelBasedGameCompletion(n.id)));}else lTime=parseInt(r[o].time),lTime>0&&(l=!0),aTime=parseInt(s[p].time),t.mygameslist[p].time=lTime+aTime,lTime+aTime>=parseInt(m.mta)&&parseInt(n.timestamp)>parseInt(d.timestamp)&&"yes"!=t.mygameslist[p].leaderboardCompleteSt&&(t.mygameslist[p].leaderboardCompleteSt="yes",checkTimeBasedGameCompletion(n.id));}c||i.push(n);}if(i.length)for(var g=0;g<i.length;g++)t.mygameslist.push(i[g]);void 0!==a.lastUpdated&&void 0!==t.lastUpdated&&parseInt(a.lastUpdated)>parseInt(t.lastUpdated)&&(t.lastUpdated=a.lastUpdated,void 0!==a.lastplayedgame&&""!=a.lastplayedgame&&(t.lastplayedgame=a.lastplayedgame));var v=void 0!==t.progress_in_current_level&&""!=t.progress_in_current_level?parseInt(t.progress_in_current_level):0,f=void 0!==a.progress_in_current_level&&""!=a.progress_in_current_level?parseInt(a.progress_in_current_level):0,_=void 0!==t.max_xp_in_current_level&&""!=t.max_xp_in_current_level?parseInt(t.max_xp_in_current_level):100,y=void 0!==t.user_level&&""!=t.user_level?parseInt(t.user_level):1,h=void 0!==a.user_level&&""!=a.user_level?parseInt(a.user_level):1;if("undefined"==typeof userprofile_level_xpData&&"undefined"!=typeof drupalSettings&&void 0!==drupalSettings.coolmath&&void 0!==drupalSettings.coolmath.userprofile_level_xp&&(window.userprofile_level_xp=drupalSettings.coolmath.userprofile_level_xp,window.userprofile_level_xpData=userprofile_level_xp.split(",")),void 0===window.userprofile_level_xpData&&(window.userprofile_level_xpData=[100,200,250,300,350,400,450,500,550,625,700,775,850,925,1e3,1075,1150,1225,1300,1375,1450,1525,1600,1700,1800,1900,2e3,2100,2200,2300,2400,2500,2600,2700,2800,2900,3e3,3100,3200,3300,3400,3500,3600,3700,3800,3900,4e3,4100,4200,4300,4400,4500,4600,4700,4800,4900,5e3,5100,5200,5300,5400,5500,5600,5700,5800,5900,6e3,6100,6200,6300,6400,6500,6600,6700,6800,6900,7e3,7100,7200,7300,7400,7500,7600,7700,7800,7900,8e3,8100,8200,8300,8400,8500,8600,8700,8800,8900,9e3,9100,9200,1e4]),y&&h){var b=getTotalXPGained(a,userprofile_level_xpData),w=getTotalXPGained(t,userprofile_level_xpData);getMergedProfileLevels(b+w,userprofile_level_xpData),(b>0||0==b&&(y>h||v>f))&&(l=!0),t=updateLevelsEarned(t,b,userprofile_level_xpData);}else{v>0&&f>0&&(l=!0);var S=parseInt(userprofile_level_xpData[y]);v+f>=_?(t.user_level=userprofile_level_xpData.length>t.user_level+1?t.user_level+1:userprofile_level_xpData.length,t.max_xp_in_current_level=S,t.progress_in_current_level=v+f-_):t.progress_in_current_level=v+f;}}else r.length&&(t.mygameslist=r,l=!0,void 0!==a.lastUpdated&&void 0!==t.lastUpdated&&parseInt(a.lastUpdated)>parseInt(t.lastUpdated)&&(t.lastUpdated=a.lastUpdated,void 0!==a.lastplayedgame&&""!=a.lastplayedgame&&(t.lastplayedgame=a.lastplayedgame)),void 0!==a.progress_in_current_level&&""!=a.progress_in_current_level&&(t.progress_in_current_level=a.progress_in_current_level),void 0!==a.max_xp_in_current_level&&""!=a.max_xp_in_current_level&&(t.max_xp_in_current_level=a.max_xp_in_current_level),void 0!==a.user_level&&""!=a.user_level&&(t.user_level=a.user_level),void 0!==a.lastUpdated&&""!=a.lastUpdated&&(t.lastUpdated=a.lastUpdated));return l&&(localStorage.setItem("userprofile",JSON.stringify(t)),initProgressTracker(gameId)),t;},window.updateLevelsEarned=function(e,a,t){var l=e.user_level,r=parseInt(e.progress_in_current_level);totalXPGained=r+a;for(var s=parseInt(e.user_level),i=parseInt(t[s-1]);totalXPGained>=i;)totalXPGained-=i,i=parseInt(t[e.user_level]),e.max_xp_in_current_level=i,e.user_level<100&&(l+=1,e.user_level=l);return e.progress_in_current_level=totalXPGained,e;},window.getMergedProfileLevels=function(e,a){for(var t=1,l=e,r=parseInt(a[t-1]);l>=r;)l-=r,r=parseInt(a[t]),t<100&&(t+=1);return t;},window.getTotalXPGained=function(e,a){var t=void 0!==e.user_level&&""!=e.user_level?parseInt(e.user_level):1,l=void 0!==e.progress_in_current_level&&""!=e.progress_in_current_level?parseInt(e.progress_in_current_level):0,r=parseInt(a[t-1]);for(totalXPGained=l;t>1;)t-=1,r=parseInt(a[t-1]),totalXPGained+=r;return totalXPGained;},window.checkTimeBasedGameCompletion=function(a){var t=localStorage.getItem("userprofile");if(null!=t&&a){t=JSON.parse(t);var l="cmg_comp_"+a,r=null!==localStorage.getItem(l)?parseInt(localStorage.getItem(l)):0;if("object"==e(t)&&t.mygameslist.length&&!r){var s=generateMyGamesData(t.mygameslist).filter((function(e){return e.id==a;}));if(0==s.length&&(s=cmatgameSearchGames.filter((function(e){return e.id==a;}))),s.length>0&&void 0!==s[0].time&&parseInt(s[0].time)>=parseInt(s[0].mta)&&("no"==s[0].leaderboardCompleteSt||void 0===s[0].leaderboardCompleteSt)){var i=t.mygameslist,o=changemyGamelistData(a,i);t.mygameslist=o,localStorage.setItem("userprofile",JSON.stringify(t)),saveUserProgressleaderboard(parseInt(t.userid),a,Date.now()),localStorage.setItem(l,s[0].id);}}}},window.checkLevelBasedGameCompletion=function(a){var t=localStorage.getItem("userprofile");if(null!=t&&a){t=JSON.parse(t);var l="cmg_comp_"+a,r=null!==localStorage.getItem(l)?parseInt(localStorage.getItem(l)):0;if("object"==e(t)&&t.mygameslist.length&&!r){var s=generateMyGamesData(t.mygameslist).filter((function(e){return e.id==a;}));if(0==s.length&&(s=cmatgameSearchGames.filter((function(e){return e.id==a;}))),s.length>0&&void 0!==s[0].level&&parseInt(s[0].level)>=parseInt(s[0].ml)&&("no"==s[0].leaderboardCompleteSt||void 0===s[0].leaderboardCompleteSt)){var i=t.mygameslist,o=changemyGamelistData(a,i);t.mygameslist=o,localStorage.setItem("userprofile",JSON.stringify(t)),saveUserProgressleaderboard(parseInt(t.userid),a,Date.now()),localStorage.setItem(l,s[0].id);}}}},window.cmg_compress_data=function(e){if(""!=e){var a=JSON.parse(e),t=a.mygameslist;delete a.mygameslist;var l=JSON.stringify(a);l=l.replace(/"/g,"cmgdq").replace(/{/g,"cmgocb").replace(/}/g,"cmgccb").replace(/,/g,"cmgcomma").replace(/\[/g,"cmgsqbr").replace(/\\/g,"cmgbb").replace(/</g,"cmglt").replace(/>/g,"cmggt").replace(/=/g,"cmgeq");var r,s="charCodeAt",i={},o=(e=JSON.stringify(t)).split(""),n=[],m=o[0],c=256;for(r=1;r<o.length;r++)null!=i[m+(e=o[r])]?m+=e:(n.push(1<m.length?i[m]:m[s](0)),i[m+e]=c,c++,m=e);for(n.push(1<m.length?i[m]:m[s](0)),r=0;r<n.length;r++)n[r]=String.fromCharCode(n[r]);var p=n.join("");return "cmgzip"+l+"mygameslist:"+(p=p.replace(/"/g,"cmgdq").replace(/{/g,"cmgocb").replace(/}/g,"cmgccb").replace(/,/g,"cmgcomma").replace(/\[/g,"cmgsqbr").replace(/\\/g,"cmgbb").replace(/</g,"cmglt").replace(/>/g,"cmggt").replace(/=/g,"cmgeq"));}return "";},window.cmg_decompress_data=function(e){if(""==e)return "";var a=e.indexOf("mygameslist:"),t=e.slice(a+12),l=e.slice(0,a);l=l.replace(/cmgzip/,"").replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"').replace(/cmgeq/g,"=").replace(/userprofile=/,"");var r,s={},i=(e=t.replace(/cmgzip/,"").replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"').replace(/cmgeq/g,"=")).split(""),n=f=i[0],m=[n],c=o=256;for(e=1;e<i.length;e++)r=c>(r=i[e].charCodeAt(0))?i[e]:s[r]?s[r]:f+n,m.push(r),n=r.charAt(0),s[o]=f+n,o++,f=r;t=m.join("").replace(/cmgsep/,"");try{var p=JSON.parse(t),d=JSON.parse(l);return d.mygameslist=p,"userprofile="+JSON.stringify(d)+"cmgsep";}catch(e){return null==getCookie("cmg_uid")?trackEvent("UserprofileXPError","ErrorParsingJson","No user id"):trackEvent("UserprofileXPError","ErrorParsingJson",getCookie("cmg_uid")),"";}},window.retrieveUserProgress=function(){if(cmg_userprofile_api_settings(),isUserValidFreeUserOrSubscriber()){jQuery.ajaxSetup({async:!1});var e="",t="",r="";db_conn=l,"mongodb"==db_conn?(urls=s+"/getuserprofile_single",e="POST",t=JSON.stringify({uid:getCookie("cmg_uid"),environment:n}),r="application/json"):(urls=apiServerURL+"/getdata/"+getCookie("cmg_uid"),e="GET",t={},r=""),jQuery.ajax({url:urls,type:e,data:t,contentType:r,success:function(e){if("mongodb"==db_conn||void 0!==e.Count&&"The level of configured provisioned throughput for the table was exceeded. Consider increasing your provisioning level with the UpdateTable API."!=e.message){if("mongodb"!=db_conn||void 0!==e.Items)if(0==e.Count||"mongodb"==db_conn&&0==e.length){sXpLvl=1,sXpUid=0,"undefined"!=typeof user_id&&(sXpUid=parseInt(user_id));var t=localStorage.getItem("userprofile");}else{if("mongodb"==db_conn&&void 0!==e.Items&&e.Items.length){var l=JSON.stringify(e.Items[0]);l=l.replace(/\"pname\"/,'"publicname"').replace(/\"aimg\"/,'"avatarimage"').replace(/\"lpg\"/,'"lastplayedgame"').replace(/\"mgl\"/,'"mygameslist"').replace(/\"ul\"/,'"user_level"').replace(/\"picl\"/,'"progress_in_current_level"').replace(/\"mxpl\"/,'"max_xp_in_current_level"').replace(/\"lup\"/,'"lastUpdated"').replace(/\"cks\"/,'"cookies"').replace(/\"afimg\"/,'"cmg_avatar_fullbody_image"').replace(/\"lv\"/,'"level"').replace(/\"lsg\"/,'"localStorage"').replace(/\"fsa\"/,'"flashStorage"'),e.Items[0]=JSON.parse(l);}u=e.Items[0].cookies.S,g=e.Items[0].localStorage;var r=e.Items[0].publicname.S;void 0!==e.Items[0].level&&(sXpLvl=parseInt(e.Items[0].level.S)),void 0!==e.Items[0].id&&(sXpUid=parseInt(e.Items[0].id.S));var s=decodeURIComponent(e.Items[0].avatarimage.S),i=e.Items[0].flashStorage.S;if("0"!=(i=(i=i.replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"')).replace(/\\"/g,'"').replace(/""/g,'"'))){flashStorageFromDB=JSON.parse(i);for(var o=0;o<flashStorageFromDB.length;o++)flashStorageFromDB[o].swfdata=decodeURI(flashStorageFromDB[o].swfdata);}var n=g.S;0==g.S.indexOf("userprofile=cmgocbcmgdquseridcmgdq")&&g.S.indexOf("cmgzip")<0?n=(n=(n=cmg_deminify_gamelist(n)).replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"').replace(/cmgeq/g,"=")).replace(/\\"/g,'"').replace(/""/g,'"'):g.S.indexOf("cmgzip")>=0?(g.S=cmg_decompress_data(e.Items[0].localStorage.S),n=g.S):n=(n=cmg_deminify_gamelist(n)).replace(/'/g,'"');var m=""!==n?n.split("cmgsep"):[];for(srvrUserProfileStr="0",o=0;o<m.length;o++)if(tmpData=m[o].split("="),"userprofile"==tmpData[0]){var c=localStorage.getItem("userprofile");if(srvrUserProfileStr=tmpData[1],null!=c){var p=JSON.parse(c),d=tmpData[1],v=JSON.parse(d),f=1;void 0!==p.user_level&&(f=p.user_level),lXpUid=0,void 0!==p.userid&&null!=p.userid&&(lXpUid=parseInt(p.userid)),apiUid=0,void 0!==v.userid&&(apiUid=parseInt(v.userid));var _=!1;if(0==lXpUid&&0!=apiUid){var y=JSON.parse(JSON.stringify(v)),h=cmg_merge_profile_obj(p,v);if(void 0!==h&&0==parseInt(lXpUid)&&0!=parseInt(sXpUid)){var b=void 0!==y.user_level&&""!=y.user_level?parseInt(y.user_level):1,w=void 0!==h.user_level&&""!=h.user_level?parseInt(h.user_level):1,S=void 0!==y.progress_in_current_level&&""!=y.progress_in_current_level?parseInt(y.progress_in_current_level):0,I=void 0!==h.progress_in_current_level&&""!=h.progress_in_current_level?parseInt(h.progress_in_current_level):0,x=void 0!==y.mygameslist&&""!=y.mygameslist?y.mygameslist.length:0,k=void 0!==h.mygameslist&&""!=h.mygameslist?h.mygameslist.length:0;(w>b||w==b&&I>S||w==b&&I==S&&k>x)&&(_=!0);}}void 0!==p.lastUpdated&&(void 0!==v.lastUpdated?p.lastUpdated<v.lastUpdated?void 0!==tmpData[0]&&void 0!==tmpData[1]&&localStorage.setItem(tmpData[0],tmpData[1]):(_||f>=sXpLvl&&lXpUid==sXpUid&&p.lastUpdated>v.lastUpdated)&&saveUserProgress():_||f>=sXpLvl&&lXpUid==sXpUid?saveUserProgress():trackEvent("XP deLevelingCheck","Incorrect updation2 stopped. Local level ="+lXpUid+" and API Level "+sXpLvl+". Uid="+sXpUid,document.title));}else void 0!==tmpData[0]&&void 0!==tmpData[1]&&localStorage.setItem(tmpData[0],tmpData[1]);}else void 0!==tmpData[0]&&void 0!==tmpData[1]&&localStorage.setItem(tmpData[0],tmpData[1]);var C=u.replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"');for(C=C.replace(/\\"/g,'"').replace(/""/g,'"'),tmpCookies=C.split("cmgsep"),o=0;o<tmpCookies.length;o++){var D=tmpCookies[o].split("=");if(/^( _ga| _gid| cmg_| mbox| __stripe|__stripe_mid| __gads| SESS| ascmg)/.test(D[0]));else{var U=new Date();U.setTime(U.getTime()+864e5);var j="expires="+U.toUTCString();document.cookie=D[0]+"="+D[1]+"; "+j+"; path=/;";}}if(null!=(t=localStorage.getItem("userprofile"))&&""!=t&&"0"!=t){try{t=JSON.parse(t),null!=getCookie("cmg_fx")?t.publicname=getCookie("cmg_fx"):t.publicname=r,void 0!==a&&null!=a&&a!=t.userid&&(0==t.userid||0==parseInt(t.userid)?(t.userid=a,-1!=s.indexOf("/sites/")&&(t.avatarimage=encodeURIComponent(s)),localStorage.setItem("userprofile",JSON.stringify(t)),saveUserProgress()):t.userid=a),-1!=s.indexOf("/sites/")&&(t.avatarimage=encodeURIComponent(s)),-1!=s.indexOf("/uploads/")&&(t.avatarimage=s),localStorage.setItem("userprofile",JSON.stringify(t));}catch(e){}myGamesData=generateMyGamesData(t.mygameslist),"undefined"!=typeof gameId&&gameId&&displayGameFavoriteStatus(myGamesData),t.user_level>100?user_level_cmg=100:user_level_cmg=t.user_level,jQuery(".user-hud .badge-primary").replaceWith('<span class="badge badge-primary">'+user_level_cmg+"</span>"),jQuery(".welcome-box .badge-primary").replaceWith('<span class="badge badge-primary">'+user_level_cmg+"</span>");var P=jQuery(".menu .profile-image img").attr("src");if(t.avatarimage&&""==P?jQuery(".menu .profile-image img").attr("src",decodeURIComponent(t.avatarimage)):s&&""==P&&jQuery(".menu .profile-image img").attr("src",s),void 0!==t.progress_in_current_level){var L=t.max_xp_in_current_level,Q=Math.floor(t.progress_in_current_level/L*100);t.user_level<100?(t.progress_in_current_level,Drupal.t("XP")):Drupal.t("MAX LEVEL"),jQuery(".welcome-box .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-bar" role="progressbar"   data-width=" '+Q+'" style="width: '+Q+'%" aria-valuenow="'+t.progress_in_current_level+'" aria-valuemin="0" aria-valuemax="'+L+'"></div></div>');}else jQuery(".user-xp").hide();}else{if(null!=getCookie("cmg_fx")&&(r=getCookie("cmg_fx")),null!=e.Items[0].aimg.S.includes("char-tool-img")){var O=[],T=0;null!=e.Items[0].mygameslist&&"undefined"!=e.Items[0].mygameslist&&""!=e.Items[0].mygameslist&&(O=e.Items[0].mygameslist.S),null!=e.Items[0].lv.S&&"undefined"!=e.Items[0].lv.S&&""!=e.Items[0].lv.S&&(T=e.Items[0].lv.S);var G={publicname:e.Items[0].pname.S,lastplayedgame:e.Items[0].lpg.S,user_level:T,flashStorage:e.Items[0].fsa.S,avatarimage:e.Items[0].aimg.S,localStorage:e.Items[0].lsg.S,mygameslist:O};localStorage.setItem("userprofile",JSON.stringify(G));}var N=null!=getCookie("cmg_uid")?getCookie("cmg_uid"):"anon";trackEvent("CMGUserProfileError","Userprofile object not found or not received from API",N);}}}else debugOut(new Date()+"CMGXP :API limit ");},error:function(e){}});}else{if("en"==drupalSettings.language)var i="/login";else i="/"+drupalSettings.language+"/login";jQuery(document).ready((function(){jQuery(".game-xp-progress").replaceWith('<div class="progress game-xp-progress"><div class="progress-text"><a href="'+i+'">'+Drupal.t("Login to Earn XP")+'</a></div><div class="progress-bar" role="progressbar"  data-width=" 70 %"  style="width:70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div></div>');}));}},window.displayGameFavoriteStatus=function(e){for(i=0;i<e.length;i++){var a=parseInt(e[i].id);"undefined"!=typeof gameId&&a==gameId&&(favoriteLiked=status,favoriteLiked=void 0!==e[i].bookMark?e[i].bookMark:0,favoriteLiked?(jQuery("body").addClass("favorited"),localStorage.setItem("svgControlFAClicked-"+gameId,!0)):jQuery("body").removeClass("favorited"));}},jQuery(document).ready((function(){retrieveUserProgress();})),window.switchUserStyle=function(e){var a=location.protocol+"//"+location.host+"/"+e.path;jQuery("#styleswitcher-css").attr("href",a),jQuery(".style-switcher").removeClass("active").filter('[data-rel="'+e.name+'"]').addClass("active"),jQuery(".style-switcher").filter('[data-rel="'+e.name+'"]').parent("li").insertBefore("#themes li:first");},window.displayUserProfileHeaderData=function(){if("en"==drupalSettings.language)var a="/profile";else a="/"+drupalSettings.language+"/profile";if(isCurrentUserAVisitor)if(isUserValidFreeUserOrSubscriber()){jQuery(document.body).addClass("logged-in");var t=localStorage.getItem("userprofile");null!=userprofile&&""!=userprofile&&"undefined"!=typeof userprofile?(t=JSON.parse(t),ownerUserID=t.userid,void 0!==t.mfi&&null!=t.mfi&&t.mfi.indexOf(user_id)>-1?jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings"><div class="form-group row"><input onClick="VisiterUnfollower('+user_id+');"  data-id="'+t.publicname+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="'+Drupal.t("Unfollow")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div></div></div>'):"undefined"!=typeof allow_follow_me&&"1"===allow_follow_me&&jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings"><div class="form-group row"><input onClick="VisiterFollower('+user_id+');"  data-id="'+t.publicname+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="+ '+Drupal.t("Follow")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div>')):jQuery(".settings").replaceWith("");}else jQuery(".settings").replaceWith("");var l=void 0!==userprofile.user_level?userprofile.user_level:1;if(l>=1&&l<=4&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_01+"</div>"),l>=5&&l<=9&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_02+"</div>"),l>=10&&l<=14&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_03+"</div>"),l>=15&&l<=19&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_04+"</div>"),l>=20&&l<=24&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_05+"</div>"),l>=25&&l<=29&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_06+"</div>"),l>=30&&l<=34&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_07+"</div>"),l>=35&&l<=39&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_08+"</div>"),l>=40&&l<=44&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_09+"</div>"),l>=45&&l<=49&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_10+"</div>"),l>=50&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_10+"</div>"),null!=userprofile&&""!=userprofile){null!=userprofile&&"object"!=("undefined"==typeof userprofile?"undefined":e(userprofile))&&(userprofile=JSON.parse(userprofile)),lastplayedgameId=userprofile.lastplayedgame,myGamesData=generateMyGamesData(userprofile.mygameslist);var r="";if(location.pathname!==a+"/subscribe"&&location.pathname!==a+"/premium-access"||"undefined"==typeof premium_nickname||null==premium_nickname||""===premium_nickname?"undefined"!=typeof user_nickname&&""!==user_nickname?(r=user_nickname,profile_path=user_nickname.toLocaleLowerCase()):void 0!==userprofile.publicname&&(r=userprofile.publicname,profile_path=userprofile.publicname.toLocaleLowerCase()):(r=premium_nickname,profile_path=r.toLocaleLowerCase()),void 0!==userprofile.user_level&&userprofile.user_level>100?user_level_cmg=100:void 0!==userprofile.user_level?user_level_cmg=userprofile.user_level:user_level_cmg=1,jQuery(".user-hud .user-name").replaceWith('<div class="user-name text-left"><a href="'+a+"/"+profile_path+'">'+r+"</a></div>"),jQuery(".user-hud .badge-primary").replaceWith('<span class="badge badge-primary">'+user_level_cmg+"</span>"),void 0!==userprofile.progress_in_current_level){var s=userprofile.max_xp_in_current_level;if(userprofile.user_level<100)var i=userprofile.progress_in_current_level+"/"+s+" "+Drupal.t("XP");else i=Drupal.t("MAX LEVEL");var o=Math.floor(userprofile.progress_in_current_level/s*100);jQuery(".user-hud .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-text">'+i+'</div><div class="progress-bar" role="progressbar"   data-width=" '+o+'" style="width: '+o+'%" aria-valuenow="'+userprofile.progress_in_current_level+'" aria-valuemin="0" aria-valuemax="'+s+'"></div></div>'),navigator.cookieEnabled&&null!=sessionStorage.getItem("leveledup")&&o<=20&&!isCurrentUserAVisitor&&userprofile.user_level;}else jQuery(".user-hud .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-text">0/'+userprofile_level_xpData[0]+' XP</div><div class="progress-bar" role="progressbar"  data-width="0%"  style="width:0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="'+userprofile_level_xpData[0]+'"></div></div>');if(0!=lastplayedgameId&&null!=lastplayedgameId&&""!=lastplayedgameId){var n=searchGamesById(lastplayedgameId);n.length>0&&(jQuery(".last-played").replaceWith("<div class='game-item card flex-row mb-3 last-played'><a href='/0-"+n[0].alias+"'><img class='card-img-left flex-auto d-lg-block' style='width: 82px; height: 50px;' src='/sites/default/files/styles/thumbnail_small/public/"+n[0].img+"'></a><div class='card-body d-flex d-flex flex-column align-items-start'><p class='card-text mb-1'>"+Drupal.t("Last played")+"</p><h3 class='mb-0 last-played'><a href='/0-"+n[0].alias+"'>"+n[0].title+"</a></h3></div></div>"),jQuery(".last-played-img").replaceWith("<a href='"+n[0].alias+"'><img class='card-img-left flex-auto d-lg-block' alt='"+n[0].title+" Game'  style='width: 82px; height: 50px;'' src='"+n[0].img+"'></a>"));}else jQuery(".last-played").replaceWith("<div class='game-item card flex-row mb-3 last-played'><a href='/'><img class='card-img-left flex-auto d-lg-block' style='width: 82px; height: 50px;' src='/themes/custom/coolmath/assets/themes/images/coolmath-logo-default.png'></a><div class='card-body d-flex d-flex flex-column align-items-start'><p class='card-text mb-1'>"+Drupal.t("Last played")+"</p><h3 class='mb-0 last-played'>"+Drupal.t("Play games to see them here!")+"</h3></div></div>");if(jQuery.isEmptyObject(userprofile.mygameslist)||jQuery(".total-games-played").replaceWith("<h3 class='card-header total-games-played col-lg-12 col-md-6 col-sm-12'>"+userprofile.mygameslist.length+"</h3>"),jQuery(".total-levels-completed").replaceWith('<h3 class="card-header total-levels-completed col-lg-12 col-md-6 col-sm-12">'+totalLevelsComplated(myGamesData)+"</h3>"),!isCurrentUserAVisitor){var m='<div class="form-group row"><div class="p-0 pr-md-2 p-lg-0 col-lg-12 col-md-6 col-sm-12 col-12"><a href="'+a+"/"+profile_path+'/edit" class="btn btn-primary btn-md mb-2">'+Drupal.t("Customize My Page")+'</a></div><div class="p-0 pl-md-2 p-lg-0 col-lg-12 col-md-6 col-sm-12 col-12"><a href="'+a+'/account-settings" class="btn btn-primary btn-md mb-2">'+Drupal.t("Account Settings")+"</a></div>";null==getCookie("cmg_sx")&&(m=m+'<a onclick="premium_access_event_handler();" href="'+a+'/premium-access/5b8689c9" class="btn btn-sm signup-link">'+Drupal.t("Get Premium Access")+"</a>"),jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings">'+m+"</div></div>");}"function"==typeof getCookie&&null!==getCookie("cmg_fx")&&null===getCookie("cmg_sx")&&jQuery(".pane-bean-new-go-ad-free").html('<a class="premium-profile-masthead prem-profile-btn"  href="'+a+'/premium-access/5b8689c9"><span class="prem-prof-star"><img src="/themes/custom/coolmath/assets/images/star-solid.svg"></span><span class="prem-prof-text">'+window.profileBtnTxt+"</span></a>"),myGamesData.length>0?(myGamesDataTotalPlays=sortMyGamesDataByTotalPlays(myGamesData),myGamesDataTotalPlays.length>0&&jQuery(".most-played").replaceWith('<div class="game-item card flex-row mb-3 most-played"><a href="/0-'+myGamesDataTotalPlays[0].alias+'"><img class="card-img-left flex-auto d-lg-block" style="width: 82px; height: 50px;" src="/sites/default/files/styles/thumbnail_small/public/'+myGamesDataTotalPlays[0].img+'"></a><div class="card-body d-flex flex-column align-items-start"><p class="card-text mb-1">'+Drupal.t("Most played")+'</p><h3 class="mb-0"><a href="/0-'+myGamesDataTotalPlays[0].alias+'">'+myGamesDataTotalPlays[0].title+"</a></h3></div></div>")):jQuery(".most-played").replaceWith('<div class="game-item card flex-row mb-3 most-played"><a href="/""><img class="card-img-left flex-auto d-lg-block" style="width: 82px; height: 50px;" src="/themes/custom/coolmath/assets/themes/images/coolmath-logo-default.png"></a><div class="card-body d-flex flex-column align-items-start"><p class="card-text mb-1">'+Drupal.t("Most played")+'</p><h3 class="mb-0">'+Drupal.t("Play games to see them here!")+"</h3></div></div>");}},window.totalLevelsComplated=function(e){for(var a=0,t=0;t<e.length;t++)"1"==e[t].ilb&&(a+=parseInt(e[t].level));return a;},window.getUnique=function(e){for(var a=[],t=e.length,l=0;l<t;l++)-1===a.indexOf(e[l])&&a.push(e[l]);return a;},window.displayMyGamesData=function(e,a,t){userprofilearray=[],userprofilearray=window.location.pathname.split("/"),"en"==drupalSettings.language?userprofilearray[2]:userprofilearray[3];var l='<div class="tab-pane animated fadeIn '+t+' " id="'+a+'"><div class="tab-pane-inner" id='+a+"-inner>",r=(e=getUnique(e)).length,s=Drupal.t("You haven’t Liked any games yet.")+"<br/>"+Drupal.t("To “Like” a game, go to that game’s page and click the Thumbs Up icon."),i=Drupal.t("hasn’t Liked any games yet."),o=user_nickname+" "+i;if("undefined"!=typeof user_id){var n=getCookie("cmg_uid");if(user_id==n)var m=s;else m=o;}if("tab4"==a&&r>10&&(r=10),r<=0)l="tab5"==a?l+'<div class="btn alert-dark btn-md message" style="width: 95%; margin:0 auto; text-transform:initial;">'+favGameAltMsg+"</div>":l+'<div class="btn alert-dark btn-md message" style="width: 95%; margin:0 auto; text-transform:initial;">'+m+"</div>";else for(var c=0;c<r;c++){var p=0,d="",u="";if("1"==e[c].ilb)p=Math.floor(e[c].level/e[c].ml*100),parseInt(e[c].level)>=parseInt(e[c].ml)&&(e[c].level=e[c].ml,u='<span class="completed-xpnew"></span>'),1==e[c].timebasedcompletedSt&&(u='<span class="completed-xpnew"></span>'),1==e[c].timebasedcompletedSt?g='<div class="game-progress-status"><div class="progress"><div class="progress-text">  '+e[c].xp+' XP</div><div class="progress-bar" role="progressbar"   data-width="100%"   style="width: 100%" aria-valuenow="500" aria-valuemin="0" aria-valuemax="500"></div></div><div class="">'+u+"</div></div>":parseInt(e[c].level)<=parseInt(e[c].ml)&&(parseInt(e[c].level)<parseInt(e[c].ml)&&(d=Drupal.t("Level")+" <br/>"+e[c].level+" / "+e[c].ml),parseInt(e[c].level)==parseInt(e[c].ml)&&(d=""),g='<div class="game-progress-status"><div class="progress"><div class="progress-text">  '+e[c].xp+' XP</div><div class="progress-bar" role="progressbar"   data-width=" '+p+'"  style="width: '+p+'%" aria-valuenow="500" aria-valuemin="0" aria-valuemax="500"></div></div><div class="levels-completed">'+d+" "+u+"</div></div>");else{var g="";parseInt(e[c].time)>=parseInt(e[c].mta)?(e[c].time=e[c].mta,g='<div class="game-progress-status"><div class="progress"><div class="progress-text">  '+e[c].xp+' XP</div><div class="progress-bar" role="progressbar"   data-width="100%"   style="width:100%;" aria-valuenow="500" aria-valuemin="0" aria-valuemax="500"></div></div><div class=""><span class="completed-xpnew"></span></div></div>'):(e[0].time,p=Math.floor(e[c].time/e[c].mta*100),d=void 0!==e[0].time?Drupal.t("Minutes")+"<br/>"+e[c].time+" / "+e[c].mta:Drupal.t("Minutes")+"<br/> "+e[c].time+" / "+e[c].mta,g='<div class="game-progress-status"><div class="progress"><div class="progress-text">  '+e[c].xp+' XP</div><div class="progress-bar" role="progressbar"   data-width=" '+p+'"  style="width: '+p+'%;" aria-valuenow="500" aria-valuemin="0" aria-valuemax="500"></div></div><div class="levels-completed">'+d+" </div></div>");}if("flash"==e[c].type)var v='<span class="icon-flash-js"> </span>';else v="";l=l+'<div class="game-item card my-game flex-row"><a href="/0-'+e[c].alias+'"><img class="card-img-left flex-auto d-block rounded" alt="'+e[c].title+' Game" src="/sites/default/files/styles/thumbnail_small/public/'+e[c].img+'">'+v+'</a><div class="card-body d-flex flex-column align-items-start"><h3 class="mb-0"><a href="/0-'+e[c].alias+'">'+e[c].title+"</a></h3>"+g+"</div></div>",u="";}l=l+"</div><div class='game-footer d-lg-none w-100 my-4 text-center'><a aria-expanded='false' data-toggle='collapse' class='view-all-mobile' href='#"+a+"-inner'>"+window.viewAlltxt+"</a></div></div>",jQuery("#"+a).replaceWith(l),ViewAllMobile();},window.compare=function(e,a){return e.title<a.title?-1:e.title>a.title?1:0;},window.sortMyGamesDataByTitle=function(e){return e.sort((function(e,a){return e.title>a.title?1:a.title>e.title?-1:0;}));},window.sortMyGamesDataByTimestamp=function(e){return e.sort((function(e,a){return e.timestamp<a.timestamp?1:a.timestamp<e.timestamp?-1:0;}));},window.sortMyGamesDataByXP=function(e){return e.sort((function(e,a){return e.xp<a.xp?-1:a.xp<e.xp?1:0;}));},window.sortMyGamesDataByTotalPlays=function(e){return e.sort((function(e,a){return e.totalplays<a.totalplays?1:a.totalplays<e.totalplays?-1:0;}));},jQuery(document).ready((function(){jQuery(".row.my-stuff").attr("style",""),jQuery("#follower-button").click((function(){var e=jQuery("#edit-username").val(),a=jQuery.trim(e);callFollowingRestAPI(a);})),jQuery(document).on("keypress","input",(function(e){if(13==e.which){var a=jQuery(this).val(),t=jQuery.trim(a);return callFollowingRestAPI(t),!1;}})),window.callFollowingRestAPI=function(e){if(""==e){var a='<div class="alert alert-danger">'+Drupal.t("Please enter a valid user name")+"</div>";jQuery(".result_message").html(a);}""!=e&&jQuery.ajax({url:location.protocol+"//"+location.host+"/profile-rest-api/"+e+"/following",type:"POST",success:function(e){var a=JSON.parse(e);if(1==a.valid_update){var t=a.following_uids,l=a.my_follower_ids;if(void 0!==t&&""!==t&&void 0!==l&&""!==l){saveUserFollowings(t,l),displayUserFollowingDataOnFollowingPage(t,l);var r=a.div_id_to_update,s=a.div_content_to_update;jQuery(r).html(s);}jQuery("#edit-username").val("");}else r=a.div_id_to_update,s=a.div_content_to_update,jQuery(r).html(s);}});};})),window.get_cmg_signup_custom_abtest=function(){return "undefined"==typeof signup_abtest_2_variations_custom_selection||""===signup_abtest_2_variations_custom_selection?signup_abtest_2_variations_custom_selection:"";},window.saveMyGamesLevelBased=function(e,t,l){if(void 0===e||""==e||0==e)return !0;var r=Date.now(),s=searchGamesById(e);if(r-lastKeyBoardorMouseActivityTime>6e4||"hidden"==document.visibilityState||!s.length)return !0;document.createTextNode((new Date()).toString());var i={};i[e]="yes";var o="storagelocal-"+e+"-storagelocal";localStorage.setItem(o,"yes"),localStorage.setItem("runoncestarted",JSON.stringify(i));var n=0,m=!1,c=0,p=0;if(null!=localStorage.getItem("ThumbsUp-"+e)&&"like"==localStorage.getItem("ThumbsUp-"+e)&&(p=1),"undefined"==typeof timeSpentOnCurrentGame&&(timeSpentOnCurrentGame=0),("undefined"==typeof game_level||"undefined"!=typeof game_level&&""==game_level)&&(game_level=0),navigator.cookieEnabled){var d=localStorage.getItem("userprofile"),u=searchGamesById(e);if(null==d)void 0!==a&&null!=a||(a=0),mygameslist=[{id:e,level:0,time:0,totalplays:1,isFavorite:p,timestamp:Date.now(),timebasedcompletedSt:!1,incrementgamestatus:"no"}],(d={userid:a,lastplayedgame:e,mygameslist}).lastUpdated=(new Date()).getTime(),c=1,m=!0;else{(d=JSON.parse(d)).lastplayedgame=e,mygameslistData=d.mygameslist;var g=!1,v=!0;if(mygameslistData.length>0)for(var f=0;f<mygameslistData.length;f++)mygameslistData[f].id==e&&(mygameslistData[f].time=mygameslistData[f].time?parseInt(mygameslistData[f].time)+1:1,m=!0,v=!0,mygameslistData[f].isFavorite=p,mygameslistData[f].timestamp=Date.now(),mygameslistData[f].timebasedcompletedSt=v,mygameslistData[f].incrementgamestatus="yes",incrementedTotalPlays||(mygameslistData[f].totalplays=mygameslistData[f].totalplays?mygameslistData[f].totalplays+1:1,incrementedTotalPlays=!0),g=!0);g||(mygameslistData.unshift({id:e,level:game_level,time:1,totalplays:1,isFavorite:p,timestamp:Date.now(),timebasedcompletedSt:v,incrementgamestatus:"yes"}),c=1,m=!0),d.mygameslist=mygameslistData,d.lastUpdated=(new Date()).getTime();}if(m){if(c=1,myGamesData=generateMyGamesData(d.mygameslist),n="1"==u[0].ilb?u[0].timebasedcompletedSt?c*parseInt(u[0].mxp):c*parseInt(u[0].lxp):c*parseInt(u[0].mxp),void 0===d.progress_in_current_level)d.progress_in_current_level=n,d.user_level=1,d.max_xp_in_current_level=parseInt(userprofile_level_xpData[0]);else{var _=parseInt(d.progress_in_current_level);_+n>=parseInt(d.max_xp_in_current_level)?(totalXPGained=_+n-parseInt(d.max_xp_in_current_level),totalXPGained>=parseInt(userprofile_level_xpData[d.user_level])?d=checkHowManyLevelsEarned(d,n,userprofile_level_xpData):(d.progress_in_current_level=totalXPGained,d.user_level=parseInt(d.user_level)+1,d.max_xp_in_current_level=parseInt(userprofile_level_xpData[d.user_level-1])),1!=d.user_level&&navigator.cookieEnabled&&sessionStorage.setItem("leveledup",d.user_level)):d.progress_in_current_level=parseInt(d.progress_in_current_level)+n;}localStorage.setItem("userprofile",JSON.stringify(d)),u=myGamesData.filter((function(a){return a.id==e;})),isUserValidFreeUserOrSubscriber()&&(void 0!==e&&display_completed_game_xp(u[0].xp),display_user_profile_progressbar(),saveUserProgress());}}"function"==typeof cmg_game_xp_dsp&&(d.lastUpdated=(new Date()).getTime(),localStorage.setItem("userprofile",JSON.stringify(d)),cmg_game_xp_dsp());},window.display_completed_game_xp=function(e){gameProgressHTML=' <div class="game-progress-status"><div class="progress game-xp-progress"><div class="progress-text"> '+e+" "+Drupal.t("XP")+'</div><div class="progress-bar" role="progressbar" style="width:100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div></div><div class=""><span class="completed-xpnew"></span></div></div>',jQuery(".game-progress-status").length?jQuery(".game-progress-status").replaceWith(gameProgressHTML):jQuery(".title-instructions").after(gameProgressHTML);},window.get_playlist_premium_handler=function(e){e.preventDefault(),sLeg=get_premium_access_leg_desc("4c044106"),trackEvent("Premium Subscription - "+sLeg,"Playlist Premium link clicked",document.title),trackGoalVirtualPV("/virtual/playlist-premium-click"),window.location.href=window.location.protocol+"//"+window.location.host+"/premium-access/4c044106"+get_signup_abtest_variant_3();},window.get_xp_leveled_up_msg=function(e){var a=!1;if(void 0!==e&&""!==e||(e="undefined"!=typeof userprofile&&void 0!==userprofile.user_level?parseInt(userprofile.user_level):1),void 0!==userprofile.progress_in_current_level&&void 0!==userprofile.user_level){var t=userprofile.max_xp_in_current_level,l=Math.floor(userprofile.progress_in_current_level/t*100);if(e>1&&(l<=20||e<userprofile.user_level)&&!isCurrentUserAVisitor&&void 0!==drupalSettings.userprofile){var r=drupalSettings.userprofile;void 0!==r.utln&&void 0!==r.utln[e]?a='theme, "'+r.utln[e]+'"!':void 0!==r.ualn&&void 0!==r.ualn[e]&&(a='avatar, "'+r.ualn[e]+'"!');}}return a;},window.display_xp_leveled_up_msg=function(e){jQuery(".leveled-up-status").length&&jQuery(".leveled-up-status").remove(),void 0!==e&&""!==e||(e="undefined"!=typeof userprofile&&"undefined"!==userprofile.user_level?parseInt(userprofile.user_level):1);var a=get_xp_leveled_up_msg(),t=localStorage.getItem("unlock_xp_level_up"),l=!1;null!==t?e>(t=parseInt(t))&&(l=!0):l=!0,a&&l&&jQuery(".row.user-hud.pt-5").length&&jQuery(".row.user-hud.pt-5").after('<div role="contentinfo" aria-label="Status message" class="leveled-up-status"><div class="alert alert-success alert-dismissible" role="alert">Level Up: You unlocked a new '+a+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">×</span> </button> </div> </div>');},window.xp_levelup_alert_handler=function(e){return e.preventDefault(),"undefined"!=typeof userprofile&&void 0!==userprofile.user_level&&localStorage.setItem("unlock_xp_level_up",userprofile.user_level),!1;},jQuery(window).resize((function(){ViewAllMobile();})),window.ViewAllMobile=function(){$(window).width()<768?index=2:$(window).width()<970?index=5:index="all",$(".view-all-mobile").each((function(){var e=$(this).parents(".tab-pane").find(".tab-pane-inner"),a=$(this).parent(),t=e.find(".game-item").length;a.show(),t<=3?a.hide():2==index?(e.removeClass("showSixitems"),e.addClass("showThreeitems")):5==index?(e.removeClass("showThreeitems"),e.addClass("showSixitems")):(e.removeClass("showThreeitems"),e.removeClass("showSixitems")),$(this).on("click",(function(t){t.preventDefault(),e.removeClass("showThreeitems"),e.removeClass("showSixitems"),a.hide();}));}));},window.cmg_premium_upsell_modal_trackevent=function(e){var a=get_premium_access_leg_desc("5b8689c9");pvCount=parseInt(localStorage.getItem("_cmg_pvc")||0),pvCount<=1&&(a=get_premium_access_leg_desc("be77d560")),trackEvent("Freemium-Upsell-Modal",e+" - Leg - "+a,document.title);},window.genrate_image_link=function(e,a){return escapeHtml('<div class="col-sm-3 alert-icon-container"><img class="alert-img-left flex-auto d-none d-lg-block rounded-lg" src=\'/sites/default/files/styles/thumbnail_small/public/'+a+'\'><span class=" alert-complete-icon"></span></div>');},window.genrate_link=function(e,a){return escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info"><a href=\''+e+'\' class="alert-link">'+a+"</a></div></div>");},window.genrate_gamename_link=function(e,a){return '<a href="'+e+'">'+a+"</a>";},window.escapeHtml=function(e){return e.replace(/"/g,"cmgdq").replace(/{/g,"cmgocb").replace(/}/g,"cmgccb").replace(/,/g,"cmgcomma").replace(/\[/g,"cmgsqbr").replace(/\\/g,"cmgbb").replace(/</g,"cmglt").replace(/>/g,"cmggt").replace(/=/g,"cmgeq");},window.getGetOrdinal=function(e){var a=["th","st","nd","rd"],t=e%100;return e+(a[(t-20)%10]||a[t]||a[0]);},window.playlist_banner_overlay_promo_signup_handler=function(e){event.preventDefault();var a="",t="/premium-access/39980b12",l="Get playlist masthead banner - masthead clicked";if(void 0!==e&&""!==e&&(l=e),a=get_premium_access_leg_desc("39980b12"),"function"==typeof getCookie&&null!==getCookie("cmg_fx")&&null===getCookie("cmg_sx")&&(t="/profile/premium-access/4c044106/"+getCookie("cmg_fx").toLowerCase(),a=get_premium_access_leg_desc("4c044106")),trackEvent("Premium Subscription - "+a,l,document.title),"function"==typeof get_signup_abtest_variant_2&&(t+=get_signup_abtest_variant_2()),"en"==drupalSettings.language)var r=t;else r="/"+drupalSettings.language+t;window.location.href=window.location.protocol+"//"+window.location.host+r;},window.playlist_banner_right_sidebar_handler=function(){event.preventDefault();var e="",a="/premium-access/a1ca2f3b",t="Get playlist banner screen mode - masthead clicked";if("undefined"!=typeof promo_action&&""!==promo_action&&(t=promo_action),e=get_premium_access_leg_desc("a1ca2f3b"),"function"==typeof getCookie&&null!==getCookie("cmg_fx")&&null===getCookie("cmg_sx")&&(a="/profile/premium-access/780ef8a3/"+getCookie("cmg_fx").toLowerCase(),e=get_premium_access_leg_desc("780ef8a3")),trackEvent("Premium Subscription - "+e,t,document.title),"function"==typeof get_signup_abtest_variant_2&&(a+=get_signup_abtest_variant_2()),"en"==drupalSettings.language)var l=a;else l="/"+drupalSettings.language+a;window.location.href=window.location.protocol+"//"+window.location.host+l;},jQuery(document).ready((function(){"function"==typeof isUserValidFreeUserOrSubscriber&&isUserValidFreeUserOrSubscriber()&&display_user_profile_block();})),window.funcloginchk=function(){null!=getCookie("cmg_uid")&&(navigator.cookieEnabled&&localStorage.removeItem("userprofile"),jQuery.ajax({method:"POST",url:"/user/logout",success:function(e){return !0;}}));},$(document).ready((function(){!function(){if("function"==typeof getCookie&&null!==getCookie("cmg_xps")){var e=decodeURIComponent(getCookie("cmg_xps"));e=e.substr(e.indexOf("/")+1).replace(/_/g,"-"),document.querySelector("body").classList.add("user-theme-"+e);}}(),setTimeout((function(){!function(e){if($(e).length>0){var a=getCookie("cmg_fx");a&&$(e).find("a").each((function(){var e=$(this).attr("href");if(e.search("premium-access")>=0&&e.search("bigscreen")<1)if(-1==e.search("profile")){var t=e.substring(0,e.search("premium-access"))+"profile/"+e.substring(e.search("premium-access"),e.length);$(this).attr("href",t+"/"+a.toLowerCase());}else $(this).attr("href",e+"/"+a.toLowerCase());else{if(e.search("premium-access")>=0&&e.search("bigscreen")>0)if(-1==e.search("profile")){var l=e.substring(0,e.search("premium-access"))+"profile/"+e.substring(e.search("premium-access"),e.length);$(this).attr("href",l+"?ts="+(new Date()).getTime());}else $(this).attr("href",e+"?ts="+(new Date()).getTime());}}));}}(".payment-info, .user-hud .settings, .pane-bean-new-go-ad-free, #conform-create-button-id, .user-playlist-message");}),300);})),window.addEventListener("message",(function(e){var a=/(local|dev|dev2|dev3|stage|stage2|www|edit)\.coolmathgames\.com/;if(e.data,"avataruploads"==e.data&&a.test(e.origin)&&""!=getCookie("cmg_uid")&&"undefined"!=getCookie("cmg_uid")&&null!=getCookie("cmg_uid"))saveUserProgress();else{if("avataruploads"==e.data&&a.test(e.origin)&&(""==getCookie("cmg_uid")||"undefined"==getCookie("cmg_uid")||null==getCookie("cmg_uid"))){var t="/user/login";if(null!=(l=localStorage.getItem("userprofile")))l=JSON.parse(l);else{localStorage.setItem("cmg_lpg",gameId);var l={userid:0,mygameslist:[{id:gameId,level:0,time:1,totalplays:1,isFavorite:0,timestamp:Date.now()}],user_level:1,progress_in_current_level:10,max_xp_in_current_level:100};}l.lastplayedgame=gameId,l.lastUpdated=Date.now(),l.avatarimage=localStorage.getItem("cmg_avatar_profile_image")+"&&"+localStorage.getItem("cmg_avatar_fullbody_image"),localStorage.setItem("userprofile",JSON.stringify(l)),/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)?window.location=t:window.open(t,"_blank");}}})),$link_length=1,$("link").each((function(){$link_length==$("link").length&&$(this).attr("id","styleswitcher-css"),$link_length+=1;})),$(".remberme label").on("toggle",(function(){$(this).find("input").prop("checked",!0);})),window.validateUsername=function(e){e?(jQuery(".username-error").html(""),jQuery(".username-error").parent().removeClass("has-error")):(jQuery(".username-error").html(Drupal.t("Please enter your login ID.")),jQuery(".username-error").parent().addClass("has-error"));},window.validatePassword=function(e){e?(jQuery(".password-error").html(""),jQuery(".password-error").parent().removeClass("has-error")):(jQuery(".password-error").html(Drupal.t("Please enter your password.")),jQuery(".password-error").parent().addClass("has-error"));},window.handleValidation=function(e){var a=e.target.name,t=e.target.value;"username"===a?validateUsername(t):"password"===a&&validatePassword(t);},window.submitForm=function(e){e.preventDefault();var a=e.target,t=new FormData(a),l=e.target.username.value,r=e.target.password.value;if(validateUsername(l),validatePassword(r),!l||!r)return !1;var s={};t.forEach((function(e,a){s[a]=e;})),fetch("/ajax/cmg/7b268a2358f68318b06ec12dbe0ca1e7",{method:"POST",body:t}).then((function(e){return e.ok?e.json():($(".form-error").html(Drupal.t("Invalid username or password.")),!1);})).then((function(e){e&&window.location.reload();})).catch((function(e){console.error("Error:",e);}));};}})[529]();;
(()=>{function a(){$("html").removeClass("menu-opened"),$(".mnav-content").slideUp(200),$(".mnav-overlay").fadeOut(300),$(".tabbed-navbar, .tabbed-navbar li a").removeClass("active");}$(document).ready((function(){$(".mobile-navbar").find(".search-results-container").length,"/"==location.pathname||$("body").hasClass("path-frontpage")?$(".tabbed-navbar .tab-home").addClass("active"):$("body").hasClass("logged-in")&&-1!==location.pathname.indexOf("/profile/")&&$(".tabbed-navbar .tab-profile").addClass("active"),$(".tabbed-navbar li a").on("click",(function(e){$(e.currentTarget).hasClass("tab-home")||(e.preventDefault(),$(e.currentTarget.getAttribute("href")).is(":visible")?a():(!function(a){$(a).find(".mnav-content-in").css("max-height",window.innerHeight),$("html").addClass("menu-opened");var e=$(a).find(".menu-search-bar"),n=$(".mnav-overlay");if(n.length>0)n.fadeIn(300);else{var t=document.createElement("div");t.classList.add("mnav-overlay"),t.style.display="none",$(".mobile-navbar").prepend(t),$(".mnav-overlay").fadeIn(300);}var i=300;e.length>0&&$("body").hasClass("mac")&&$("html").hasClass("mobile-device")&&(i=0),$(".mnav-content").not(a).hide(),$(".tabbed-navbar").addClass("active"),$(a).length>0&&$(a).slideDown(i,(function(){e.length>0&&$("body").hasClass("android")&&$("html").hasClass("mobile-device")&&$(".menu-search-bar").attr("autofocus","autofocus").trigger("focus");})),e.length>0&&$("body").hasClass("mac")&&$("html").hasClass("mobile-device")&&$(".menu-search-bar").attr("autofocus","autofocus").trigger("focus");}($(this).attr("href")),$(".tabbed-navbar li a").removeClass("active"),$(this).addClass("active")));})),$("#mnav_categories .pane-content > .menu > li.is-expanded > a").on("click",(function(a){a.preventDefault(),function(a){var e=$("#mnav_categories");e.find(".mnavh-action-left").removeClass("hide"),e.find(".mnav-heading h3").text($(a).text());var n='<li class="nested all-cat-link"><a href="'.concat($(a).attr("href"),'">').concat(Drupal.t("All @cat Games",{"@cat":$(a).text()}),"</a></li>"),t=$(a).siblings(".expandable-wrapper").find(" > .menu");0==t.find("> .all-cat-link").length&&t.prepend(n),e.find(".mnav-scroller").scrollTop(0),$(a).parent().addClass("show-menu"),$(a).css("opacity","0"),setTimeout((function(){$(a).parent().addClass("is-active");}),10),$(a).parent().siblings().hide();}(this);})),$(".mobile-navbar").on("click",".mnav-overlay, .mnav-con-head .close-btn",(function(){a();})),$("body").on("click","#close-search-box",(function(){closeSearch("menu"),window.matchMedia("(max-width: 960px)").matches&&a();})),$("#mnav_categories .mnavh-action-left a").on("click",(function(){var a,e;a=$("#mnav_categories"),(e=a.find(".pane-content > .menu > li.is-active")).siblings().show(),e.find("> a").css("opacity","1"),e.removeClass("is-active"),a.find(".mnav-scroller").scrollTop(0),setTimeout((function(){e.removeClass("show-menu");}),310),a.find(".mnav-heading h3").text(Drupal.t("Categories")),a.find(".mnavh-action-left").addClass("hide");})),$(".menu-language > a > span, .tab-lang .tab-title").text($("html").attr("lang").toUpperCase());})),$(window).on("resize",(function(){$(".mnav-content:visible").find(".mnav-content-in").css("max-height",window.innerHeight);}));})();;
(()=>{$(document).ready((function(){function e(e){$(e).siblings(":not(.expandable-wrapper)").attr("aria-expanded","true"),$(e).parent().addClass("open");}function a(e){$(e).siblings(":not(.expandable-wrapper)").attr("aria-expanded","false"),$(e).parent().removeClass("open");}$(".page-header .pane-menu-menu-desktop-header-menu:eq(0) li.is-expanded").each((function(e,a){var n=$(a).find("> a"),t='<button class="btn nav-expand-btn"><span class="visually-hidden">Show submenu for '.concat(n.text(),"</span></button>");n.after(t);})),$(".nav-expand-btn").on("click",(function(){$(this).parent().hasClass("open")?a(this):e(this);}));var n=$(".page-header .pane-menu-menu-desktop-header-menu .pane-content > .menu > li > a");n.on("keyup",(function(a){9==(a.keyCode?a.keyCode:a.which)&&(n.parent(".is-expanded").removeClass("open"),$("body").hasClass("search-expanded")&&closeSearch("menu"),($(this).parent().hasClass("menu-language")||$(this).parent().hasClass("menu-profile"))&&e(this));})),$(document).on("mousemove",(function(){a(n);})),$(".menu-search-bar").on("focus",(function(){$(".page-header .expandable-wrapper:visible").parent().removeClass("open"),$(".page-header .expandable-wrapper:visible").siblings().attr("aria-expanded","false");})),$(".navbar-right .menu-language > a").on("click",(function(e){e.preventDefault(),$(this).parent().toggleClass("active");})),$(document).on("mouseup",(function(e){var a;(a=$(".navbar-right .menu-language")).is(e.target)||0!==a.has(e.target).length||$(".navbar-right .menu-language").removeClass("active"),(a=$(".navbar-right .menu-profile")).is(e.target)||0!==a.has(e.target).length||$(".navbar-right .menu-profile").removeClass("active");}));}));var e="en"!=drupalSettings.language?"/"+drupalSettings.language:"";window.loginFrmData='\n  <form class="cmg-overlay-login-form" onsubmit="submitForm(event)" id="cmg-overlay-6b1279480676d86cd9b32f88420a9864" name="cmg-overlay-next" action="">\n    <div class="header-user-widget">\n    <h2>'.concat(Drupal.t("Log In"),'</h2>\n    <div class="error form-error"></div>\n      <div class="field username">\n        <input id="username" onblur="handleValidation(event)" oninput="handleValidation(event)" class="textbox" type="text" name="username" placeholder="').concat(Drupal.t("Your Login ID or Nickname"),'" autocomplete="username" />\n        <div class="error username-error"></div>\n      </div>\n      <div class="field password">\n        <input id="password" onblur="handleValidation(event)" oninput="handleValidation(event)" class="textbox" type="password" name="password" placeholder="').concat(Drupal.t("Your password"),'"  autocomplete="current-password" />\n        <input type="hidden" id="csrf-token" class="csrf-token" name="csrf_token" value="" />\n        <div class="error password-error"></div>\n      </div>\n      <div class="field remberme">\n        <label>\n          <input type="checkbox" id="checkbox" name="remember_me" class="mr-2 " />\n          <span>').concat(Drupal.t("Remember me"),'</span>\n        </label>\n        <a href="').concat(e,'/user/password">').concat(Drupal.t("Forgot password?"),'</a>\n      </div>\n      <div class="user-promo-menu">\n        <div class="user-menu-top">\n          <button type="submit"  class="btn button login">').concat(Drupal.t("Log In"),'</button>\n        </div>\n        <div class="user-menu-footer">\n          <a href="').concat(e,'/signup" class="btn button signup" title="').concat(Drupal.t("Sign up for free"),'">').concat(Drupal.t("Sign up for free"),'</a>\n          <a href="#" class="go-ad-free-btn" id="cmg-goadfree" onclick="goadfree_event_handler()" title="').concat(Drupal.t("Want to remove all ads? Go Premium!"),'">').concat(Drupal.t("Want to remove all ads? Go Premium!"),"</a>\n        </div>\n      </div>\n    </div>\n  </form>\n  "),$(document).on("click",".navbar-right .menu-profile > a",(function(e){e.preventDefault();var a=$(".page-header:visible").not(".page-header-mobile").find(".navbar-right .menu-profile .expandable-content .mnav-scroller");if($(this).parent().toggleClass("active"),getCookie("cmg_l"))jQuery(".navbar-right .menu-profile ul").length||(retrieveUserProgress(),display_user_profile_block(),$("body").addClass("logged-in"));else{if(!jQuery(a).find(".cmg-overlay-login-form").length){var n='<a href="#" class="login-link d-flex align-items-center" aria-label="login button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8.44448 1.11111C11.1378 1.11111 13.3245 3.29778 13.3245 5.99111C13.3245 8.68444 11.1378 10.8711 8.44448 10.8711C5.75115 10.8711 3.56448 8.68444 3.56448 5.99111C3.56448 3.29778 5.75115 1.11111 8.44448 1.11111ZM8.44448 0C5.12892 0 2.45337 2.68444 2.45337 5.99111C2.45337 9.29778 5.13781 11.9822 8.44448 11.9822C11.7511 11.9822 14.4356 9.29778 14.4356 5.99111C14.4356 2.68444 11.7511 0 8.44448 0Z" fill="white"></path><path d="M15.44 15.1196H1.44003C1.12892 15.1196 0.888916 14.8707 0.888916 14.5685V14.3462C0.888916 12.7729 1.84892 11.3596 3.28892 10.8174C3.57336 10.7018 3.89336 10.8529 4.00892 11.1374C4.11558 11.4218 3.97336 11.7418 3.68892 11.8574C2.78225 12.204 2.15114 13.0396 2.02669 14.0174H14.8622C14.7378 13.0485 14.1067 12.204 13.2089 11.8662C12.9245 11.7596 12.7822 11.4396 12.8889 11.1462C12.9956 10.8618 13.3156 10.7107 13.6089 10.8262C15.04 11.3685 16 12.7907 16 14.3551V14.5774C16 14.8796 15.7511 15.1285 15.4489 15.1285L15.44 15.1196Z" fill="white"></path><path d="M10.3202 6.80038C10.0179 6.80038 9.76904 6.55149 9.76904 6.24927V5.38705C9.76904 5.07594 10.0179 4.83594 10.3202 4.83594C10.6224 4.83594 10.8713 5.08483 10.8713 5.38705V6.24927C10.8713 6.56038 10.6224 6.80038 10.3202 6.80038Z" fill="white"></path><path d="M6.56014 6.80038C6.24903 6.80038 6.00903 6.55149 6.00903 6.24927V5.38705C6.00903 5.07594 6.25792 4.83594 6.56014 4.83594C6.86237 4.83594 7.11126 5.08483 7.11126 5.38705V6.24927C7.11126 6.56038 6.86237 6.80038 6.56014 6.80038Z" fill="white"></path></svg><span>'.concat(Drupal.t("Log in"),"</span></a>");jQuery(".navbar-right a.profile-image").replaceWith(n),$(".navbar-right .menu-profile .welcome-box").html(""),jQuery(a).html(loginFrmData),jQuery("body").removeClass("logged-in");}}})),$(document).on("click",".mobile-navbar .tab-profile",(function(){var e=$(".page-header-mobile:visible").find(".menu-profile .mnav-content-in .mnav-scroller");getCookie("cmg_l")||jQuery(e).find(".cmg-overlay-login-form").length||jQuery(e).html(loginFrmData);}));})();;
