"use strict";(globalThis.webpackChunkixl_webpack=globalThis.webpackChunkixl_webpack||[]).push([["commons-ixl_utils_IxlModal_jsx"],{646030:(e,t,o)=>{o.d(t,{Z:()=>_}),o(868535),o(963452),o(427142);var s=o(406042),i=o(642980),n=o(745247),r=o.n(n),l=o(496323),a=o.n(l),d=(o(634562),o(380742)),h=o(210977),p=o(124482),c=o(547397);function y(e,t,o,s,i){const n=o?window.innerWidth:window.innerHeight,r=o?e.width:e.height,l=m(t,o,s);return l+r*(1-i)<=n&&l-r*i>=0}function m(e,t,o){return t?e.left+(o?0:e.width/2):e.top+(o?0:e.height/2)}const b={open:r().bool,closeCallback:r().func,focusCallback:r().func,blurCallback:r().func,mouseLeaveCallback:r().func,showCloseButton:r().bool,extraClassName:r().string,extraClassNameUnderlay:r().string,minMargin:r().number,zIndex:r().number,maskClosable:r().bool,hideMask:r().bool,closeButtonAriaLabelOverride:r().string,ariaLabelledBy:r().string,ariaDescribedBy:r().string,alignmentMode:r().string,targetNodeInfo:r().shape({domNode:r().any,offset:r().number.isRequired,preferredDirections:r().arrayOf(r().oneOf(["above","below","left","right"])).isRequired,onRenderCallback:r().func,crossAxisAlignToEdge:r().bool}),onKeyDown:r().func,autoCenter:r().bool,shouldFocusOnOpen:r().bool,isAlertDialog:r().bool,dataCy:r().string,children:r().node.isRequired},u={open:!1,showCloseButton:!0,extraClassName:"",extraClassNameUnderlay:"",minMargin:10,zIndex:1e3,maskClosable:!1,hideMask:!1,closeButtonAriaLabelOverride:"",ariaLabelledBy:"",ariaDescribedBy:"",alignmentMode:"center",targetNodeInfo:null,autoCenter:!0,shouldFocusOnOpen:!1,isAlertDialog:!1,closeCallback:c.Z,focusCallback:c.Z,blurCallback:c.Z,mouseLeaveCallback:c.Z,onKeyDown:c.Z,dataCy:void 0};class g extends s.Component{constructor(e){super(e),this._onResize=this._onResize.bind(this),this._onEscape=this._onEscape.bind(this),this._onFocusPopover=this._onFocusPopover.bind(this),this._onBlurPopover=this._onBlurPopover.bind(this),this._onMouseLeavePopover=this._onMouseLeavePopover.bind(this),this._onMaskClose=this._onMaskClose.bind(this),this.forceResizePopover=this.forceResizePopover.bind(this),this._centerPopover=this._centerPopover.bind(this),this._setupTabs=this._setupTabs.bind(this),this._removeTabs=this._removeTabs.bind(this),this._controlTab=this._controlTab.bind(this),this._setModalRef=this._setModalRef.bind(this),this._setModalContentRef=this._setModalContentRef.bind(this),this._setUnderlayRef=this._setUnderlayRef.bind(this),this._setModalArrowRef=this._setModalArrowRef.bind(this)}componentDidMount(){window.addEventListener("resize",this._onResize),document.addEventListener("keydown",this._onEscape),this._setupTabs(),this._onResize()}componentDidUpdate(e){this._removeTabs(),a().ios&&a().ios>=11&&a().ios<=11.2&&(!e.open&&this.props.open?document.body.classList.add("prevent-ios-body-scroll"):e.open&&!this.props.open&&document.body.classList.remove("prevent-ios-body-scroll")),this._setupTabs(),this._onResize(),this.props.shouldFocusOnOpen&&!e.open&&this.props.open&&(this._tabOrder.length>0?setTimeout((()=>this._tabOrder[0].focus()),0):setTimeout((()=>this.modal.focus()),0))}componentWillUnmount(){this._removeTabs(),window.removeEventListener("resize",this._onResize),document.removeEventListener("keydown",this._onEscape),document.body.classList.remove("prevent-ios-body-scroll")}_setupTabs(){let e=Array.prototype.slice.call(i.findDOMNode(this).querySelectorAll(["a","input:not([type=hidden]):enabled","select","textarea","button:not([disabled])",'.practice-audio-button:not([tabindex="-1"])'].join(",")));e=e.filter((e=>e.offsetHeight>0));const t=e.filter((e=>0===e.tabIndex)),o=e.filter((e=>e.tabIndex>0));o.sort(((e,t)=>e.tabIndex>t.tabIndex)),this._tabOrder=t.concat(o);const s=this;this._tabOrder.forEach((e=>{e.addEventListener("keydown",s._controlTab)}))}_removeTabs(){const e=this;this._tabOrder.forEach((t=>{t.removeEventListener("keydown",e._controlTab)}))}_controlTab(e){if(e.key===p.R8.TAB.key){e.preventDefault();let t=this._tabOrder.indexOf(e.target);e.shiftKey?t--:t++,t<0&&(t=this._tabOrder.length-1),t>=this._tabOrder.length&&(t=0),this._tabOrder[t].focus()}}forceResizePopover(){this._positionPopover()}_positionPopover(){const e=this.props;"target-node"===e.alignmentMode&&e.targetNodeInfo&&e.targetNodeInfo.domNode?this._alignPopoverToTargetNode():this.props.autoCenter&&this._centerPopover()}_alignPopoverToTargetNode(){const{preferredDirections:e,onRenderCallback:t}=this.props.targetNodeInfo,o={left:this._alignPopoverToTargetNodeLeft,right:this._alignPopoverToTargetNodeRight,above:this._alignPopoverToTargetNodeAbove,below:this._alignPopoverToTargetNodeBelow};let s=!1;for(let i=0;i<e.length&&!s;i++){const n=e[i];s=o[n].call(this),s&&t&&t(n)}s||(o[e[0]].call(this,!0),t&&t(e[0]))}_alignPopoverToTargetNodeBelow(e){const{domNode:t,offset:o,crossAxisAlignToEdge:s}=this.props.targetNodeInfo,i=this.modal,n=i.getBoundingClientRect(),r=this.modal.style.left?parseInt(this.modal.style.left):0,l=this.modal.style.top?parseInt(this.modal.style.top):0,a=t.getBoundingClientRect();if(a.bottom+n.height<=window.innerHeight&&y(n,a,!0,s,o)||e){const e=m(a,!0,s),t=n.left+n.width*o;i.style.left=`${r+Math.round(e-t)}px`;const d=a.bottom,h=n.top;i.style.top=`${l+Math.round(d-h)}px`;const p=this.modalArrow.style;return p.borderLeft="10px solid transparent",p.borderRight="10px solid transparent",p.borderTop="",p.borderBottom="5px solid #FFFFFF",p.top="-5px",p.bottom="",p.left=`calc(${100*o}% - 10px)`,p.right="",!0}}_alignPopoverToTargetNodeAbove(e){const{domNode:t,offset:o,crossAxisAlignToEdge:s}=this.props.targetNodeInfo,i=this.modal,n=i.getBoundingClientRect(),r=this.modal.style.left?parseInt(this.modal.style.left):0,l=this.modal.style.top?parseInt(this.modal.style.top):0,a=t.getBoundingClientRect();if(a.top-n.height>=0&&y(n,a,!0,s,o)||e){const e=m(a,!0,s),t=n.left+n.width*o;i.style.left=`${r+Math.round(e-t)}px`;const d=a.top,h=n.bottom;i.style.top=`${l+Math.round(d-h)}px`;const p=this.modalArrow.style;return p.borderLeft="10px solid transparent",p.borderRight="10px solid transparent",p.borderTop="5px solid #FFFFFF",p.borderBottom="",p.top="",p.bottom="-5px",p.left=`calc(${100*o}% - 10px)`,p.right="",!0}}_alignPopoverToTargetNodeLeft(e){const{domNode:t,offset:o,crossAxisAlignToEdge:s}=this.props.targetNodeInfo,i=this.modal,n=i.getBoundingClientRect(),r=this.modal.style.left?parseInt(this.modal.style.left):0,l=this.modal.style.top?parseInt(this.modal.style.top):0,a=t.getBoundingClientRect();if(a.left-n.width>=0&&y(n,a,!1,s,o)||e){const e=a.left,t=n.right;i.style.left=`${r+Math.round(e-t)}px`;const d=m(a,!1,s),h=n.top+n.height*o;i.style.top=`${l+Math.round(d-h)}px`;const p=this.modalArrow.style;return p.borderLeft="5px solid #FFFFFF",p.borderRight="",p.borderTop="10px solid transparent",p.borderBottom="10px solid transparent",p.top=`calc(${100*o}% - 10px)`,p.bottom="",p.left="",p.right="-5px",!0}}_alignPopoverToTargetNodeRight(e){const{domNode:t,offset:o,crossAxisAlignToEdge:s}=this.props.targetNodeInfo,i=this.modal,n=i.getBoundingClientRect(),r=this.modal.style.left?parseInt(this.modal.style.left):0,l=this.modal.style.top?parseInt(this.modal.style.top):0,a=t.getBoundingClientRect();if(a.right+n.width<=window.innerWidth&&y(n,a,!1,s,o)||e){const e=a.right,t=n.left;i.style.left=`${r+Math.round(e-t)}px`;const d=m(a,!1,s),h=n.top+n.height*o;i.style.top=`${l+Math.round(d-h)}px`;const p=this.modalArrow.style;return p.borderLeft="",p.borderRight="5px solid #FFFFFF",p.borderTop="10px solid transparent",p.borderBottom="10px solid transparent",p.top=`calc(${100*o}% - 10px)`,p.bottom="",p.left="-5px",p.right="",!0}}_centerPopover(){const e=document.documentElement.clientHeight,t=document.documentElement.clientWidth;this._lastHeight||(this._lastHeight=e),this._lastWidth||(this._lastWidth=t),/(android)/i.test(navigator.userAgent)&&(this._lastWidth===t&&3*this._lastHeight/4>e?this._androidKeyboardShown=!0:this._lastWidth===t&&4*this._lastHeight/3<e&&(this._androidKeyboardShown=!1)),this.modalContent.style.removeProperty("height"),this.modal.style.removeProperty("right"),this.modal.style.removeProperty("left"),this.modalContent.style.removeProperty("width");const o=this.modalContent.getBoundingClientRect(),s=this.underlay.getBoundingClientRect(),i=o.height,n=o.width,r=e-i,l=this.props.minMargin+(s.width-n)/2;r>2*l?(this.modal.style.top=r/2+"px",this.modal.style.removeProperty("bottom")):this._androidKeyboardShown?this.modal.style.top=`${l}px`:(this.modal.style.top=`${l}px`,this.modal.style.bottom=`${l}px`,this.modalContent.style.height=e-2*l+"px");const a=t-n;a>2*l?(this.modal.style.left=a/2+"px",this.modal.style.removeProperty("right")):(this.modal.style.left=`${l}px`,this.modal.style.right=`${l}px`,this.modalContent.style.width=t-2*l+"px"),this._lastHeight=e,this._lastWidth=t}_setModalRef(e){this.modal=e}_setModalContentRef(e){this.modalContent=e}_setUnderlayRef(e){this.underlay=e}_setModalArrowRef(e){this.modalArrow=e}_onResize(){this.props.open&&this.props.autoCenter&&this._positionPopover()}_onEscape(e){this.props.open&&e.key===p.R8.ESCAPE.key&&this.props.showCloseButton&&this.props.closeCallback()}_onFocusPopover(){this.props.focusCallback&&this.props.focusCallback()}_onBlurPopover(){this.props.blurCallback&&this.props.blurCallback()}_onMouseLeavePopover(){this.props.mouseLeaveCallback&&this.props.mouseLeaveCallback()}_onMaskClose(e){this.props.maskClosable&&e.currentTarget===e.target&&this.props.closeCallback()}render(){const{extraClassName:e,alignmentMode:t,open:o,zIndex:i,hideMask:n,closeCallback:r,closeButtonAriaLabelOverride:l,showCloseButton:a,dataCy:p}=this.props;let c=null;a&&(c=s.createElement(d.OO.Consumer,null,(e=>{let{getI18nMessage:t}=e;return s.createElement("button",{className:"modal-close",onClick:r,"aria-label":l||t("close_button.aria_text"),"data-cy":"ixl-modal-close"})})));const y={display:o?"block":"none",zIndex:i},m=(0,h.WM)("ixl-modal-outer-container",e,t,{hidden:n}),b={zIndex:i},u=(0,h.WM)("ixl-modal-mask",{hidden:n}),g={zIndex:i+1},_=(0,h.WM)({"ixl-modal":!0}),k=this.props.extraClassNameUnderlay||"ixl-modal-underlay";return s.createElement("div",{className:m,onKeyDown:this.props.onKeyDown,style:y},s.createElement("div",{className:u,style:b,onClick:this._onMaskClose}),s.createElement("div",{className:_,style:g,role:this.props.isAlertDialog?"alertdialog":"dialog","aria-modal":"true","aria-labelledby":this.props.ariaLabelledBy,"aria-describedby":this.props.ariaDescribedBy,onFocus:this._onFocusPopover,onBlur:this._onBlurPopover,onMouseLeave:this._onMouseLeavePopover,tabIndex:-1,ref:this._setModalRef,"data-cy":p,"data-state":this.props.open?"open":"closed"},s.createElement("div",{className:"ixl-modal-arrow",ref:this._setModalArrowRef}),s.createElement("div",{className:"ixl-modal-container"},s.createElement("div",{className:"ixl-modal-inside"},s.createElement("div",{className:"ixl-modal-content",ref:this._setModalContentRef},this.props.children)),c),s.createElement("div",{className:k,ref:this._setUnderlayRef})))}}g.propTypes=b,g.defaultProps=u,g.displayName="IxlModal";const _=g},124482:(e,t,o)=>{o.d(t,{R8:()=>s});const s={ZERO:{keyCode:48,key:0},ONE:{keyCode:49,key:1},TWO:{keyCode:50,key:2},THREE:{keyCode:51,key:3},FOUR:{keyCode:52,key:4},FIVE:{keyCode:53,key:5},SIX:{keyCode:54,key:6},SEVEN:{keyCode:55,key:7},EIGHT:{keyCode:56,key:8},NINE:{keyCode:57,key:9},NUMPAD_ZERO:{keyCode:96,key:0},NUMPAD_ONE:{keyCode:97,key:1},NUMPAD_TWO:{keyCode:98,key:2},NUMPAD_THREE:{keyCode:99,key:3},NUMPAD_FOUR:{keyCode:100,key:4},NUMPAD_FIVE:{keyCode:101,key:5},NUMPAD_SIX:{keyCode:102,key:6},NUMPAD_SEVEN:{keyCode:103,key:7},NUMPAD_EIGHT:{keyCode:104,key:8},NUMPAD_NINE:{keyCode:105,key:9},LEFT_ARROW:{keyCode:37,key:"ArrowLeft"},RIGHT_ARROW:{keyCode:39,key:"ArrowRight"},UP_ARROW:{keyCode:38,key:"ArrowUp"},DOWN_ARROW:{keyCode:40,key:"ArrowDown"},PAGE_UP:{keyCode:33,key:"PageUp"},PAGE_DOWN:{keyCode:34,key:"PageDown"},HOME:{keyCode:36,key:"Home"},END:{keyCode:35,key:"End"},SPACE:{keyCode:32,key:" "},BACKSPACE:{keyCode:8,key:"Back-space"},TAB:{keyCode:9,key:"Tab"},ESCAPE:{keyCode:27,key:"Escape"},ENTER:{keyCode:13,key:"Enter"},DELETE:{keyCode:46,key:"Delete"},SHIFT:{keyCode:16,key:"Shift"}}}}]);