(globalThis.webpackChunkixl_webpack=globalThis.webpackChunkixl_webpack||[]).push([["commons-ixl_utils_SkillPickerUtils_jsx"],{764281:(e,t,l)=>{"use strict";l.d(t,{Z:()=>s,X:()=>i}),l(890140);const s=e=>{if(Array.isArray(e)){const t=e.map(s),l={};return Object.assign(l,...t),l}return"options"in e?s(e.options):Object.fromEntries([[e.skill,e]])},i=e=>{window.PROD_YUI.use(["ixl_analytics-commonjs_teacher_selectors_components_skillPicker_SkillPicker"],(t=>{const s=l(843012);["ixl_analytics-commonjs_teacher_selectors_components_skillPicker_SkillPicker","ixl_analytics-commonjs_teacher_selectors_components_skillPicker_SkillPickerBody","ixl_analytics-commonjs_teacher_selectors_components_skillPicker_SkillPickerSearchResults","ixl_analytics-commonjs_teacher_selectors_utils_SkillPickerUtils","ixl_util-commonjs_FeatureToggle","ixl_util-commonjs_GlobalResources"].forEach((e=>s.addModule(e,t.IXL.Intl.getModule(e)._text))),e.setState({SkillPickerComponent:l(717608)})}))}},114040:(e,t,l)=>{const s=l(406042),i=l(999134),{dropdownElementTypeHasNoDataMessage:a}=l(903525),{callKeyDownHandler:n}=l(657125),o=l(103024),r={option:i.object.isRequired,touchStart:i.func.isRequired,touchMove:i.func.isRequired,touchEnd:i.func.isRequired,setItemInHierarchy:i.func.isRequired},c=e=>{let{option:t,touchStart:l,touchMove:i,touchEnd:r,setItemInHierarchy:c}=e;const d=t.options&&0===t.options.length&&!a(t.dropdownElementType),p=o("option",{"has-data":t.hasData,disabled:d});return s.createElement("div",{className:p,role:"button",tabIndex:0,onClick:()=>c(t),onTouchStart:l,onTouchMove:i,onTouchEnd:e=>r(e,t),onKeyDown:e=>n(e,(()=>c(t)))},s.createElement("div",{className:"option-content"},s.createElement("div",{className:"data-indicator"}),s.createElement("span",{className:"option-name",dangerouslySetInnerHTML:{__html:t.name}})),d?null:s.createElement("div",{className:"chevron"}))};c.displayName="Option",c.propTypes=r,e.exports=c},717608:(e,t,l)=>{const s=l(406042),i=l(235451),a=l(843012).getModule("ixl_analytics-commonjs_teacher_selectors_components_skillPicker_SkillPicker"),{useState:n,useEffect:o,useRef:r,useCallback:c,useImperativeHandle:d}=s,p=l(347378),u=l(103024),h=l(662918),m=l(703465),k=l(903525),{callKeyDownHandler:S}=l(657125),{skillPickerSearch:b}=l(834889),{useOutsideClickHandler:g}=l(722456),_=l(367801),{ENTER_KEY:f}=l(657125),{SubscriptionType:y}=l(977752),{disabledSkillTooltipsPropType:T}=l(923234),E={json:i.array.isRequired,title:i.string,selectedSubjects:i.string,selectedLowGrade:i.number,selectedHighGrade:i.number,showDataIndicators:i.bool,noSelectName:i.string,initialSkill:i.string,initialSkillSubject:i.string,skillNameFromReport:i.string,skillPlanSelected:i.bool,suggestedSkillSelected:i.bool,smallRightHandStyle:i.bool,callback:i.func.isRequired,handleOutsideClickCallback:i.func,beginAtSkillLevel:i.bool,selectInitialSkill:i.bool,unselectableSkillIds:i.arrayOf(i.number.isRequired),autoFocusSearchBox:i.bool,skillPath:i.arrayOf(i.shape({item:i.string.isRequired,name:i.string.isRequired,scroll:i.number.isRequired})),disabledSkillTooltips:T,subscriptionType:i.oneOf(Object.values(y)),subscriptionStatusBySubject:i.object},N={handleOutsideClickCallback(){},skillPlanSelected:!1,suggestedSkillSelected:!1,smallRightHandStyle:!1,beginAtSkillLevel:!1,selectInitialSkill:!0,unselectableSkillIds:[],autoFocusSearchBox:!1,skillPath:null,skillNameFromReport:void 0,title:void 0,selectedSubjects:void 0,selectedLowGrade:void 0,selectedHighGrade:void 0,showDataIndicators:!1,noSelectName:void 0,initialSkill:void 0,initialSkillSubject:void 0,disabledSkillTooltips:{},subscriptionType:void 0,subscriptionStatusBySubject:void 0},v=s.forwardRef(((e,t)=>{const[l,i]=n(!1),[y,T]=n(""),[E,N]=n(null),[v,w]=n(((e,t,l,s,i)=>{let a={skill:null,skillName:null,skillCode:null,subjectName:null,gradeName:null,skillPlanSelected:l,suggestedSkillSelected:s};if(t)a={...a,skillName:t};else if(e&&""!==e){const t=k.findSkillInfo(parseInt(e),i);t&&(a={...a,skill:parseInt(e),skillName:k.createSkillName(t.skill,l,s),skillCode:p.isFeatureEnabled("PERMACODES")?t.skill.permacode:t.skill.skillCode,subjectName:t.subject,gradeName:t.skill.gradeLetterName})}return a})(e.initialSkill,e.noSelectName,e.skillPlanSelected,e.suggestedSkillSelected,e.json)),I=r(),O=r(),C=r();d(t,(()=>({gradeName:v.gradeName,skillCode:v.skillCode,subjectName:v.subjectName,handleFocus:()=>{i(!0)},setLimitedInitialSkill:e=>{const{skill:t,skillName:l,subjectName:s}=e;x(t,l,null,s,null,!1,!1)},isSkillSelected:null!==v.skill&&void 0!==v.skill})));const{handleOutsideClickCallback:R}=e,{insideRef:j}=g(c((()=>{l&&(i(!1),T(""),C.current&&C.current.reset(),R())}),[l,i,T,R]));_((()=>{e.autoFocusSearchBox&&L()})),o((()=>{l&&I.current&&I.current.focus()}),[l]);const L=()=>{i(!0),T(""),N(null)},P=()=>{0===y.length&&l?i(!1):L()},G=e=>{const t=e.target.value;T(t),0===t.length&&N(null),t.length>0&&b(t,N)},x=(t,l,s,a,n,o,r,c)=>{w({skill:t,skillName:l,skillCode:s,subjectName:a,gradeName:n,skillPlanSelected:o,suggestedSkillSelected:r}),i(!1),T(""),N(null),e.callback&&e.callback(t,o,r,c,a,l)},M=e=>{if(e.key===f&&O.current&&null!==O.current.onlyOption){const e=O.current.onlyOption;x(e.skill,e.selectedSkillName,e.selectedSkillCode,e.selectedSubjectName,e.selectedGradeLetter,e.skillPlanSelected,e.suggestedSkillSelected)}},D=v.skillName||e.skillNameFromReport?s.createElement("span",{className:"option-selection",dangerouslySetInnerHTML:{__html:v.skillName||e.skillNameFromReport}}):s.createElement("span",{className:"option-selection"},a.getRaw("select_skill")),H=y.length>0,A=u("skill-typeable-dropdown","typeable-dropdown",{"small-placeholder":e.smallRightHandStyle}),B=u("skill-picker",{active:l}),U=u("dropdown-title",{active:l,"hide-placeholder":H,"show-explanation":l&&!H}),F=u("dropdown-icon",{"dropdown-x":H,"dropdown-arrow":!H}),K=u("dropdown-wrapper",{"right-align-dropdown":e.smallRightHandStyle}),q=u("",{dropdown:H,"skill-trees-menu":!H,active:l}),$=(()=>{const t=v.skillName||e.skillNameFromReport;if(!l&&(t||e.title)){const t=e.title?s.createElement("span",{className:"option-title"},e.title):null;return s.createElement("div",{className:"prompt-query-or-selection-wrapper",onClick:L,role:"button",onKeyDown:e=>S(e,L),tabIndex:0},t,D)}const i=u("placeholder",{"small-placeholder":e.smallRightHandStyle});return s.createElement("div",{className:"prompt-query-or-selection-wrapper"},s.createElement("label",{className:i},a.getRaw("looking_for_skill")),s.createElement("div",{className:"explanation-text"},a.getRaw("search_prompt")),s.createElement("input",{type:"text",value:y,onKeyDown:M,onChange:G,ref:I}))})(),W=(t=>t?s.createElement(m,{json:e.json,callback:x,filterText:y,skillSearchResults:E,unselectableSkillIds:e.unselectableSkillIds,disabledSkillTooltips:e.disabledSkillTooltips,ref:O,subscriptionType:e.subscriptionType,subscriptionStatusBySubject:e.subscriptionStatusBySubject}):s.createElement(h,{json:e.json,selectedSubjects:e.selectedSubjects,selectedLowGrade:e.selectedLowGrade,selectedHighGrade:e.selectedHighGrade,showDataIndicators:e.showDataIndicators,callback:x,initialSkill:e.beginAtSkillLevel?e.initialSkill:void 0,initialSkillSubject:e.initialSkillSubject,unselectableSkillIds:e.unselectableSkillIds,active:l,selectInitialSkill:e.selectInitialSkill,skillPath:e.skillPath,disabledSkillTooltips:e.disabledSkillTooltips,ref:C,subscriptionType:e.subscriptionType,subscriptionStatusBySubject:e.subscriptionStatusBySubject}))(H);return s.createElement("div",{className:A,onFocus:()=>i(!0),ref:j},s.createElement("div",{className:B},s.createElement("div",{className:"skill-picker-open"},s.createElement("div",{className:U},$,s.createElement("div",{className:F,onClick:P,role:"button",onKeyDown:e=>S(e,P)}))),s.createElement("div",{className:K},s.createElement("div",{className:q},s.createElement("div",{className:"inner-dropdown"},W)))))}));v.displayName="SkillPicker",v.defaultProps=N,v.propTypes=E,e.exports=v},662918:(e,t,l)=>{l(868535),l(963452),l(879586),l(427142);const s=l(406042),i=l(642980),a=l(235451),n=l(843012).getModule("ixl_analytics-commonjs_teacher_selectors_components_skillPicker_SkillPickerBody"),o=l(273586),r=l(716707),c=l(347378),d=l(423059),p=l(903525),{DropdownElementType:u,dropdownElementTypeHasNoDataMessage:h}=l(903525),{SUBJECT_INT_TO_I18N_KEY:m}=l(855051),{callKeyDownHandler:k}=l(657125),S=l(103024),{SubscriptionType:b,getDisabledTooltipText:g}=l(977752),{disabledSkillTooltipsPropType:_}=l(923234),f={json:a.array.isRequired,selectedSubjects:a.string,selectedLowGrade:a.number,selectedHighGrade:a.number,showDataIndicators:a.bool,callback:a.func.isRequired,initialSkill:a.string,initialSkillSubject:a.string,selectInitialSkill:a.bool,unselectableSkillIds:a.arrayOf(a.number.isRequired),active:a.bool.isRequired,skillPath:a.arrayOf(a.shape({item:a.string.isRequired,name:a.string.isRequired,scroll:a.number.isRequired})),disabledSkillTooltips:_,subscriptionType:a.oneOf(Object.values(b)),subscriptionStatusBySubject:a.object};class y extends s.Component{constructor(e){super(e),this.options=s.createRef(),this.state=this._getDefaultState(e),this.scrollToOption=s.createRef(),this.reset=this.reset.bind(this),this.back=this.back.bind(this),this.returnSelectedSkill=this.returnSelectedSkill.bind(this),this._getJson=this._getJson.bind(this),this.setItemInHierarchy=this.setItemInHierarchy.bind(this),this._pushItem=this._pushItem.bind(this),this.selectAndReturnSkill=this.selectAndReturnSkill.bind(this),this._getHeader=this._getHeader.bind(this),this._hasManuallySelectedOptions=this._hasManuallySelectedOptions.bind(this),this._filterGradesByGlobalOptions=this._filterGradesByGlobalOptions.bind(this),this._isWithinGlobalOptionsGrades=this._isWithinGlobalOptionsGrades.bind(this),this._filterSkillPlansByGlobalOptions=this._filterSkillPlansByGlobalOptions.bind(this),this._isSkillPlanWithinGrades=this._isSkillPlanWithinGrades.bind(this),this._calculateHeaderAndOptions=this._calculateHeaderAndOptions.bind(this)}UNSAFE_componentWillReceiveProps(e){this.props.selectedSubjects===e.selectedSubjects&&this.props.selectedLowGrade===e.selectedLowGrade&&this.props.selectedHighGrade===e.selectedHighGrade||this.setState(this._getDefaultState(e))}componentDidUpdate(e){if(this.scrollToOption.current&&e.active!==this.props.active&&this.props.active){const e=i.findDOMNode(this.scrollToOption.current),t=e.parentNode;t.scrollTop=e.offsetTop-t.offsetTop}}_getDefaultState(e){let t=[];const l={skill:null,skillName:null,skillPlanSelected:null,suggestedSkillSelected:null,skillCode:null,gradeLetter:null,scrollToSkill:null};let s;if(e.initialSkill){let s,i=e.json;if(e.skillPath){t=JSON.parse(JSON.stringify(e.skillPath));for(const e in t)i=i.filter((l=>l.value===t[e].item))[0].options;s=i.filter((t=>t.skill===e.initialSkill))}else for(s=p.getSingleSkillPrintJsonForSkillPicker(e.initialSkill,e.json)[0];s&&"options"in s;){for(let e=0;e<i.length;e++)if(i[e].value===s.value){i=i[e].options;break}t.push({item:s.value,name:s.name,scroll:0}),s=s.options[0]}if(0===t.length)for(let l=0;l<i.length;l++)if(i[l].name===e.initialSkillSubject){t.push({item:i[l].value,name:i[l].name,scroll:0}),s={skill:null,gradeLetterName:null,name:null,skillCode:null};break}if(t.length>0){t[0].propagatedFromGlobalOptions=1===e.json.length;const a=i.findIndex((e=>e.skill===s.skill)),n=a<=1?0:a-2;return Object.assign(l,{gradeLetter:s.gradeLetterName}),e.selectInitialSkill&&Object.assign(l,{skill:s.skill,skillName:s.name,skillPlanSelected:null,suggestedSkillSelected:null,skillCode:s.skillCode,scrollToSkill:i[n].skill}),Object.assign({},l,{selected:t})}}let i=null,a=null;if(1===e.json.length)i=e.json[0].value,a=e.json[0].name;else if(e.selectedSubjects&&1===e.selectedSubjects.split(",").length)for(i=e.selectedSubjects,s=0;s<e.json.length;s++)String(e.json[s].value)===i&&(a=e.json[s].name);let n=null,o=null;const r=e.selectedLowGrade;if(i&&null!==r&&r===e.selectedHighGrade){const t=function(e){e.equivalent===r&&(n=String(e.grade),o=e.name)};for(s=0;s<e.json.length;s++){const l=e.json[s];l.value===i&&l.dropdownElementType===u.GRADES_TREE_SUBJECT&&l.options.forEach(t)}}return null!==i&&t.push({item:i,name:a,scroll:0,propagatedFromGlobalOptions:!0}),null!==n&&t.push({item:n,name:o,scroll:0,propagatedFromGlobalOptions:!0}),Object.assign({},l,{selected:t})}reset(e){e&&e.preventDefault(),this.setState(this._getDefaultState(this.props))}back(e){let t;this.setState((e=>{const l=e.selected.slice(0);return t=l.pop(),t.numParentsPushed&&l.splice(-t.numParentsPushed),{skill:null,selected:l}}),(function(){this.options.current.scrollTop=t.scroll})),e.preventDefault()}returnSelectedSkill(){this.state.skill&&this.props.callback&&this.props.callback(this.state.skill,this.state.skillName,this.state.skillCode,this.state.selected[0].name,this.state.gradeLetter,this.state.skillPlanSelected,this.state.suggestedSkillSelected,this.state.selected)}_findSelected(e,t){let l;const s=t;return e.forEach((e=>{e.value===s&&(l=e)})),l}_getJson(){const e=this.state.selected.length+1;let t={headerI18nKey:"select_subject",options:this.props.json};for(let l=1;l<e;l++){const e=this.state.selected[l-1].item;t=this._findSelected(t.options,e)}return t}setItemInHierarchy(e){this._pushItem(e.value,e.name,i.findDOMNode(this.options.current).scrollTop,e.parentsToPush),i.findDOMNode(this.options.current).scrollTop=0}_pushItem(e,t,l,s){this.setState((i=>{const a=i.selected.slice(0),n={item:e,name:t,scroll:l};if(s){n.numParentsPushed=s.length;for(let e=0;e<s.length;e++)a.push({item:s[e].value,scroll:0})}return a.push(n),{selected:a}}))}selectAndReturnSkill(e){let t,l,s,i,a,n;e.currentTarget.dataset?(t=e.currentTarget.dataset.value,l=e.currentTarget.dataset.name,s=e.currentTarget.dataset.skillCode,i=e.currentTarget.dataset.gradeLetter,a=e.currentTarget.dataset.skillPlanSelected,n=e.currentTarget.dataset.suggestedSkillSelected):(t=e.currentTarget.getAttribute("data-value"),l=e.currentTarget.getAttribute("data-name"),s=e.currentTarget.getAttribute("data-skill-code"),i=e.currentTarget.getAttribute("data-grade-letter"),a=e.currentTarget.getAttribute("data-skill-plan-selected"),n=e.currentTarget.getAttribute("data-suggested-skills-selected")),this.setState({skill:t,skillName:l,skillCode:s,gradeLetter:i,skillPlanSelected:"true"===a||!0===a,suggestedSkillSelected:"true"===n||!0===n,scrollToSkill:null},this.returnSelectedSkill)}_getHeader(e,t){const l=n.getRaw(e,{levelName:t});return this._hasManuallySelectedOptions()?s.createElement("div",null,s.createElement("div",{className:"header-space active",role:"button",tabIndex:0,onKeyDown:e=>k(e,this.back),onClick:this.back},s.createElement("div",{className:"left-arrow"})),l):s.createElement("div",null,s.createElement("div",{className:"header-space"}),l)}_hasManuallySelectedOptions(){const e=this.state.selected;for(let t=0;t<e.length;t++)if(!e[t].propagatedFromGlobalOptions)return!0;return!1}_filterGradesByGlobalOptions(e){return e.filter(this._isWithinGlobalOptionsGrades)}_isWithinGlobalOptionsGrades(e){const t=this.props.selectedLowGrade,l=this.props.selectedHighGrade;return void 0===t||void 0===l||t<=e.equivalent&&e.equivalent<=l}_filterSkillPlansByGlobalOptions(e){return e.filter(this._isSkillPlanWithinGrades)}_isSkillPlanWithinGrades(e){const t=this.props.selectedLowGrade,l=this.props.selectedHighGrade;return void 0===t||void 0===l||this._rangesIntersect(t,l,e.lowGrade,e.highGrade)}_rangesIntersect(e,t,l,s){return e<l?t>=l:s>=e}_calculateHeaderAndOptions(e){let t,l,s=e.headerI18nKey,i=e.levelName,a=e.options.slice(0);if(a[0].dropdownElementType===u.SKILL_SOURCE){const e=this._filterGradesByGlobalOptions(a[0].options);if(1===e.length&&(t=[a[0]],a[0]=JSON.parse(JSON.stringify(e[0])),a[0].parentsToPush=t),"4"===this.state.selected[0].item&&(a[0].name=n.getRaw("spanish_units_title")),1===a.length){const e=a[0];for(s=e.headerI18nKey,i=e.levelName,t?t.push(e):t=[e],a=JSON.parse(JSON.stringify(e.options)),l=0;l<a.length;l++)a[l].parentsToPush=t}}else if(a[0].dropdownElementType===u.GRADE)if("4"===this.state.selected[0].item){const e=a[0];for(s=e.headerI18nKey,i=e.levelName,t=[e],a=JSON.parse(JSON.stringify(e.options)),l=0;l<a.length;l++)a[l].parentsToPush=t}else a=this._filterGradesByGlobalOptions(a);else a[0].dropdownElementType===u.SKILL_PLAN&&(a=this._filterSkillPlansByGlobalOptions(a));return{headerI18nKey:s,levelName:i,options:a}}render(){let e=this.props.showDataIndicators&&0!==this.state.selected.length;const t=[];let l,i;const a=this._getJson(),b=a.dropdownElementType===u.SUGGESTED_SKILL,_=a.dropdownElementType===u.COTEACHER_SUGGESTED_SKILL;if(!a)return null;if(h(a.dropdownElementType)&&0===a.options.length){const e=m[parseInt(this.state.selected[0].item)];let t,o;switch(a.dropdownElementType){case u.SKILL_SOURCE:t="select_skill_plan",o="no_pinned_skill_plans";break;case u.SUGGESTED_SKILL:t="select_skill",o="no_suggested_skill";break;case u.COTEACHER_SUGGESTED_SKILL:t="select_skill",o="no_coteacher_suggested_skill"}l=s.createElement("div",null,s.createElement("div",{className:"header-space active",role:"button",tabIndex:0,onKeyDown:e=>k(e,this.back),onClick:this.back},s.createElement("div",{className:"left-arrow"})),n.getRaw(t)),i=s.createElement("div",{className:"options",ref:this.options},s.createElement("div",{className:"no-pinned-skill-plans",dangerouslySetInnerHTML:{__html:n.getRaw(`${o}.${e}`)}}))}else if(a&&!a.options[0].skill){const t=this._calculateHeaderAndOptions(a);for(let l=0;l<t.options.length;l++){const s=t.options[l].dropdownElementType;s!==u.SKILL_SOURCE&&s!==u.SUGGESTED_SKILL||(e=!1)}l=this._getHeader(t.headerI18nKey,t.levelName),i=s.createElement(r,{json:t.options,setItemInHierarchy:this.setItemInHierarchy,filterSkillPlansByGlobalOptions:this._filterSkillPlansByGlobalOptions,ref:this.options})}else{l=s.createElement("div",null,s.createElement("div",{className:"header-space active",role:"button",tabIndex:0,onKeyDown:e=>k(e,this.back),onClick:this.back},s.createElement("div",{className:"left-arrow"})),n.getRaw("select_skill"));const e=this.selectAndReturnSkill,r=a.options,h=this.props.unselectableSkillIds||[],m=this.state.skill;let f=!1;const y=function(){f=!1},T=function(){f=!0},E=function(t){f||(t.persist(),e(t))},N=function(){},v=this.state.scrollToSkill,w=this.scrollToOption,{disabledSkillTooltips:I,subscriptionStatusBySubject:O,subscriptionType:C}=this.props;r.forEach((l=>{const i=l.dropdownElementType===u.CORE_CURRICULUM_SKILL,a=p.createSkillName(l,i,b||_),n=l.skillName,r=l.isCheckpointSkill;let f,R;c.isFeatureEnabled("PERMACODES")?b||_?R="":(f=l.permacode,R=l.isNew&&!i?o.getRaw("new_skill.number_placeholder"):`${l.lightweightSkillNumber}.`):(f=l.skillCode,R=l.skillCode);const j=h.indexOf(parseInt(l.skill))>=0,L=j&&g(I,r,this.state.selected[1]&&"Skill plans"===this.state.selected[1].name,this.state.selected[0],O,C),P=S("option",{unselectable:j,isCheckpoint:r,selected:String(m)===l.skill,"has-data":l.hasData}),G=j?N:e,x=s.createElement("div",{key:`skill${l.skill}`,"data-value":l.skill,"data-name":a,"data-skill-code":f,"data-skill-plan-selected":""===l.skillCode,"data-suggested-skills-selected":b,"data-grade-letter":l.gradeLetterName,className:P,onClick:G,onTouchStart:j?N:y,onTouchMove:j?N:T,onTouchEnd:j?N:E,role:"button",tabIndex:0,onKeyDown:e=>k(e,G),ref:v===l.skill?w:null},s.createElement("div",{className:"data-indicator"}),R?s.createElement("div",{className:"skill-code"},R):null,s.createElement("div",{className:"skill-name",dangerouslySetInnerHTML:{__html:n}}));var M;t.push(j?(M=x,s.createElement(d,{additionalTooltipClassNames:"unselectable-checkpoint-tooltip",displayBelowMouse:!1,followMouse:!0,tooltipContent:L,delayInMS:0,useMaxWidth:!1},M)):x)})),i=s.createElement("div",{className:"options",ref:this.options},t)}const f=S("skill-picker-body",{"show-data-indicators":e});return s.createElement("div",{className:f},s.createElement("div",{className:"header"},s.createElement("div",{className:"header-browse-prompt"},n.getRaw("browse_prompt")),l),i)}}y.displayName="SkillPickerBody",y.defaultProps={selectInitialSkill:!0,unselectableSkillIds:[],skillPath:null,selectedSubjects:void 0,selectedLowGrade:void 0,selectedHighGrade:void 0,initialSkill:void 0,initialSkillSubject:void 0,showDataIndicators:!1,disabledSkillTooltips:{},subscriptionType:void 0,subscriptionStatusBySubject:void 0},y.propTypes=f,e.exports=y},716707:(e,t,l)=>{l(868535),l(427142),l(879586);const s=l(406042),i=l(235451),a=l(114040),n={json:i.array.isRequired,setItemInHierarchy:i.func.isRequired,filterSkillPlansByGlobalOptions:i.func.isRequired},o=s.forwardRef(((e,t)=>{const l=[];let i=!1;const n=()=>{i=!1},o=()=>{i=!0},r=(t,l)=>{i||(e.setItemInHierarchy(l),t.preventDefault())};return e.json.forEach(((t,i)=>{l.push(s.createElement(a,{key:i,option:t,touchStart:n,touchMove:o,touchEnd:r,setItemInHierarchy:e.setItemInHierarchy,filterSkillPlansByGlobalOptions:e.filterSkillPlansByGlobalOptions}))})),s.createElement("div",{className:"options",ref:t},l)}));o.displayName="SkillPickerOptions",o.propTypes=n,e.exports=o},703465:(e,t,l)=>{l(868535),l(427142),l(879586);const s=l(843012).getModule("ixl_analytics-commonjs_teacher_selectors_components_skillPicker_SkillPickerSearchResults"),i=l(347378),a=l(406042),{useImperativeHandle:n,useRef:o}=a,r=l(235451),c=l(423059),d=l(903525),{callKeyDownHandler:p}=l(657125),{compareSkillPickerSearchResults:u}=l(834889),h=l(103024),{getDisabledTooltipText:m}=l(977752),{disabledSkillTooltipsPropType:k}=l(923234),S={json:r.array.isRequired,callback:r.func.isRequired,filterText:r.string.isRequired,skillSearchResults:r.object,unselectableSkillIds:r.arrayOf(r.number.isRequired),disabledSkillTooltips:k,subscriptionType:r.object,subscriptionStatusBySubject:r.object},b=a.forwardRef(((e,t)=>{const l=o(null);n(t,(()=>({onlyOption:l.current})));const r=[];null!==e.skillSearchResults&&e.skillSearchResults.bundles.forEach((t=>{"skills"===t.type&&t.results.forEach((t=>{let l={displayName:t.formattedName,skill:t.skillid,rank:t.rank,subjectNumber:t.subjectNumber,gradeNumber:t.gradeNumber,tag:t.tag,unselectable:e.unselectableSkillIds.indexOf(t.skillid)>=0};if(t.isSkillPlanOnlySkill){const s=`<span class="skill-name">${t.formattedName}</span>`,a=i.isFeatureEnabled("PERMACODES")?t.permacode:"",n=l.unselectable&&m(e.disabledSkillTooltips,t.isCheckpointSkill,t.isSkillPlanOnlySkill,{name:t.subject,item:t.subjectNumber},e.subscriptionStatusBySubject,e.subscriptionType);l={...l,isCheckpoint:t.isCheckpointSkill,skillCode:"",skillPlanSelected:!0,selectedSubjectName:t.subject,selectedGradeLetter:t.gradeLetterName,selectedSkillName:s,selectedSkillCode:a,tooltip:n}}else{const s=d.findSkillInfo(t.skillid,e.json);if(!s)return;const a=t.extendedSkillCodeMatch?"":s.skill.gradeLetterName,n=t.defaultSkillNumber?t.defaultSkillNumber:"",o=a&&n?"-":"",r=s.skill,c=d.createSkillName(r),p=i.isFeatureEnabled("PERMACODES")?r.permacode:r.skillCode,u=""===r.skillCode,h=s.subject,k=r.gradeLetterName,S=l.unselectable&&m(e.disabledSkillTooltips,r.isCheckpointSkill,t.isSkillPlanOnlySkill,{name:h,item:s.subjectIntConstant},e.subscriptionStatusBySubject,e.subscriptionType);l={...l,skillCode:`${a}${o}${n}`,isCheckpoint:r.isCheckpointSkill,selectedSkillName:c,selectedSkillCode:p,skillPlanSelected:u,selectedSubjectName:h,selectedGradeLetter:k,tooltip:S}}r.push(l)}))})),r.sort(u);const k=t=>{if(t.preventDefault(),e.callback){const l=t.currentTarget;"false"===(l.dataset?l.dataset.unselectable:l.getAttribute("data-unselectable"))&&e.callback(l.dataset?l.dataset.value:l.getAttribute("data-value"),l.dataset?l.dataset.name:l.getAttribute("data-name"),l.dataset?l.dataset.skillCode:l.getAttribute("data-skill-code"),l.dataset?l.dataset.subjectName:l.getAttribute("data-subject-name"),l.dataset?l.dataset.gradeLetter:l.getAttribute("data-grade-letter"),l.dataset?l.dataset.skillPlanSelected:l.getAttribute("data-skill-plan-selected"))}};if(e.filterText.length<=0)return l.current=null,null;const S=r.map((e=>{const t=h("skill-search-result",{unselectable:e.unselectable});let l=null;e.tag&&(l=a.createElement("span",{className:"matching-area",dangerouslySetInnerHTML:{__html:e.tag}}));const s=a.createElement("div",{className:t,role:"button","data-value":e.skill,"data-name":e.selectedSkillName,"data-skill-code":e.selectedSkillCode,"data-skill-plan-selected":e.skillPlanSelected,"data-subject-name":e.selectedSubjectName,"data-grade-letter":e.selectedGradeLetter,"data-unselectable":e.unselectable,onClick:k,onTouchStart:k,onKeyDown:e=>p(e,k),tabIndex:0,key:e.skill},a.createElement("div",{dangerouslySetInnerHTML:{__html:e.skillCode},className:"skill-code"}),a.createElement("div",{className:"indented-area"},a.createElement("span",{dangerouslySetInnerHTML:{__html:e.displayName},className:"skill-name"}),l));return e.tooltip?a.createElement(c,{additionalTooltipClassNames:"unselectable-checkpoint-tooltip",displayBelowMouse:!1,followMouse:!0,tooltipContent:e.tooltip,delayInMS:0,useMaxWidth:!1},s):s}));return l.current=1===r.length?r[0]:null,0===S.length&&null!==e.skillSearchResults&&S.push(a.createElement("div",{className:"skill-search-result",key:"no-results"},a.createElement("div",{className:"no-results"},s.getRaw("no_results")))),S}));b.displayName="SkillPickerSearchResults",b.defaultProps={unselectableSkillIds:[],skillSearchResults:null,disabledSkillTooltips:{},subscriptionType:void 0,subscriptionStatusBySubject:void 0},b.propTypes=S,e.exports=b},423059:(e,t,l)=>{const s=l(406042),i=l(235451),a=l(642517),n={allowMobile:i.bool,additionalTooltipClassNames:i.string,delayInMS:i.number,displayBelowMouse:i.bool,centerHorizontally:i.bool,followMouse:i.bool,tooltipContent:i.node.isRequired,xOffset:i.number,xOffsetRatio:i.number,yOffsetBottom:i.number,yOffsetTop:i.number,useMaxWidth:i.bool,maxWidth:i.number,id:i.string,tabIndex:i.string,displayOnFocus:i.bool};class o extends s.PureComponent{constructor(e){super(e),this.state={renderTooltip:!1},this._centerTooltip=this._centerTooltip.bind(this),this._handleMovementEvent=this._handleMovementEvent.bind(this),this._handleMouseEnter=this._handleMouseEnter.bind(this),this._handleMouseLeave=this._handleMouseLeave.bind(this),this._handleMobileTap=this._handleMobileTap.bind(this),this._setWrapperRef=this._setWrapperRef.bind(this),this._setTooltipRef=this._setTooltipRef.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this._handleFocus=this._handleFocus.bind(this),this._handleBlur=this._handleBlur.bind(this)}componentDidMount(){this.props.centerHorizontally&&this._centerTooltip()}componentWillUnmount(){this.timer&&window.clearTimeout(this.timer),this.props.displayOnFocus&&document.removeEventListener("scroll",this.hideTooltip,!0)}_centerTooltip(){const e=this.wrapper.getBoundingClientRect(),t=(e.left+e.right)/2,l=this.tooltip,s=t-l.getBoundingClientRect().width/2+this.props.xOffset;l.style.left=`${s}px`}_handleMovementEvent(e){if(this.props.centerHorizontally&&!this.state.renderTooltip&&this._centerTooltip(),this.props.followMouse||!this.state.renderTooltip){const t=e.clientX&&!this.props.centerHorizontally?e.clientX:e.target.getBoundingClientRect().x+this.props.xOffset,l=e.clientY&&!this.props.centerHorizontally?e.clientY:e.target.getBoundingClientRect().y,s=this.tooltip,i=s.getBoundingClientRect(),a=i.height,n=i.width;if(this.props.displayBelowMouse){let e=l+this.props.yOffsetBottom;e+a>(document.documentElement.clientHeight||window.innerHeight)&&(e=l-this.props.yOffsetTop-a),s.style.top=`${e}px`}else{let e=l-this.props.yOffsetTop-a;e<0&&(e=l+this.props.yOffsetBottom),s.style.top=`${e}px`}if(!this.props.centerHorizontally){const e=this.props.xOffset+n*this.props.xOffsetRatio;let l=t+e;const a=document.documentElement.clientWidth||window.innerWidth;this.props.useMaxWidth?(s.style.maxWidth=`${this.props.maxWidth}px`,s.style.whiteSpace="normal"):l+n>a&&(l=t-e-i.width),s.style.left=`${l}px`}}}_handleMouseEnter(e){!a&&this.props.tooltipContent&&this._startTooltipDisplayTimer()}_handleMobileTap(e){a&&this.props.allowMobile&&this.props.tooltipContent&&this._startTooltipDisplayTimer()}hideTooltip(){this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.setState({renderTooltip:!1}),this.props.displayOnFocus&&document.removeEventListener("scroll",this.hideTooltip,!0)}_handleMouseLeave(){this.hideTooltip()}_startTooltipDisplayTimer(){this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.timer=window.setTimeout(this.showTooltip,this.props.delayInMS)}showTooltip(){this.setState({renderTooltip:!0})}_setWrapperRef(e){this.wrapper=e}_setTooltipRef(e){this.tooltip=e}_handleFocus(e){this._handleMovementEvent(e),this._startTooltipDisplayTimer(),this.props.displayOnFocus&&document.addEventListener("scroll",this.hideTooltip,!0)}_handleBlur(){this.hideTooltip()}render(){let e="plain-tooltip-wrapper";this.state.renderTooltip&&(e+=" show-tooltip");const t=`plain-tooltip ${this.props.additionalTooltipClassNames}`;return s.createElement("div",{className:e,"data-cy":"plain-tooltip-wrapper",ref:this._setWrapperRef,onMouseMove:this._handleMovementEvent,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onFocus:this.props.displayOnFocus?this._handleFocus:null,onBlur:this.props.displayOnFocus?this._handleBlur:null,onTouchStart:this._handleMobileTap},this.props.children,s.createElement("span",{className:t,ref:this._setTooltipRef,id:this.props.id?this.props.id:null,tabIndex:this.props.tabIndex?this.props.tabIndex:null},this.props.tooltipContent))}}o.propTypes=n,o.defaultProps={allowMobile:!1,additionalTooltipClassNames:"",delayInMS:700,displayBelowMouse:!0,centerHorizontally:!1,followMouse:!1,xOffset:0,xOffsetRatio:0,yOffsetBottom:25,yOffsetTop:15,useMaxWidth:!1,maxWidth:300,tabIndex:null,displayOnFocus:!1},e.exports=o},903525:(e,t,l)=>{const s=l(347378),i={SKILL_SOURCE:1,GRADE:2,GRADES_TREE_SUBJECT:3,SUBJECT:4,SKILL_PLAN:5,CORE_CURRICULUM_SKILL:6,SUGGESTED_SKILL:7,COTEACHER_SUGGESTED_SKILL:8},a=(e,t,l,s,n)=>{if(void 0===t||0===t.length)return!1;let o;if(t[0].skill){for(o=0;o<t.length;o++)if(e(t[o]))return n(t[o],l);return!1}for(o=0;o<t.length;o++){const r=t[o];let c=l;(null===c&&r.dropdownElementType===i.SUBJECT||r.dropdownElementType===i.GRADES_TREE_SUBJECT)&&(c=r);const d=a(e,r.options,c,s,n);if(d)return s(d,r)}return!1},n=(e,t)=>{const l=((e,t)=>a(e,t,null,(e=>e),((e,t)=>({subject:t.name,subjectIntConstant:parseInt(t.value),skill:e}))))(e,t);return l||(console.log(`did not find available skill matching ${e}`),null)};e.exports={DropdownElementType:i,findSkillInfo:(e,t)=>n((t=>t.skill===String(e)),t),findSkillInfoOfMatchingSkill:n,createSkillName:(e,t,l)=>{if(s.isFeatureEnabled("PERMACODES")){const s=e.skillCode?` (${e.skillCode})`:"",i=!0!==t&&!0!==l&&e.skillCode?`<span class="grade-and-code">${e.gradeShortOrdinal}${s}</span>`:"",{skillName:a}=e;return`${i}<span class="skill-name">${a}</span>`}return`<span class="skill-name">${e.enhancedSkillCode} ${e.skillName}</span>`},createSkillNameFrontEnd:(e,t,l,s)=>{if(s){const s=e.skillCode?` (${e.skillCode})`:"",i=!0!==t&&!0!==l&&e.skillCode?`<span class="grade-and-code">${e.gradeShortOrdinal}${s}</span>`:"",{skillName:a}=e;return`${i}<span class="skill-name">${a}</span>`}return`<span class="skill-name">${e.enhancedSkillCode} ${e.skillName}</span>`},getSingleSkillPrintJsonForSkillPicker:(e,t)=>[a((t=>t.skill===String(e)),t,null,((e,t)=>Object.assign({},t,{options:[e]})),(e=>e))],getFirstSkillPrintJsonForSkillPicker:e=>[a((()=>!0),e,null,((e,t)=>Object.assign({},t,{options:[e]})),(e=>e))],dropdownElementTypeHasNoDataMessage:e=>e===i.SKILL_SOURCE||e===i.SUGGESTED_SKILL||e===i.COTEACHER_SUGGESTED_SKILL}},923234:(e,t,l)=>{const s=l(235451),i=s.shape({educationalBulk:s.string,educationalSite:s.string}),a=s.shape({hold:i,future:i,canceled:i,expired:i}),n=s.shape({checkpoint:s.string,regular:a});e.exports={disabledSkillTooltipsPropType:n}},977752:(e,t,l)=>{l(890140);const s=l(843012).getModule("ixl_analytics-commonjs_teacher_selectors_utils_SkillPickerUtils"),i={EDUCATIONAL_SITE:"EDUCATIONAL_SITE",SPECIAL:"SPECIAL",EDUCATIONAL_BULK:"EDUCATIONAL_BULK",FAMILY:"FAMILY",CORPORATE:"CORPORATE"};e.exports={SubscriptionType:i,getDisabledTooltipText:(e,t,l,a,n,o)=>{if(t)return s.getRaw(e.checkpoint);if(l)return s.getRaw(e.skillPlanOnly);if(!n||!a)return"";const r=o||i.EDUCATIONAL_SITE;if(r!==i.EDUCATIONAL_BULK&&r!==i.EDUCATIONAL_SITE)return s.getRaw(e.regular.expired.educationalSite,{subject:a.name});const c=n[parseInt(a.item)].toLowerCase(),d=(e=>{const[t,...l]=e.split("_");return`${t.toLowerCase()}${l.map((e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("")}`})(r);return e.regular[c]&&e.regular[c][d]?s.getRaw(e.regular[c][d],{subject:a.name}):""}}},347378:(e,t,l)=>{var s=l(843012).getModule("ixl_util-commonjs_FeatureToggle");e.exports={isFeatureEnabled:function(e){return"true"===s.getRaw(e)}}},273586:(e,t,l)=>{var s=l(843012);e.exports=s.getModule("ixl_util-commonjs_GlobalResources")}}]);